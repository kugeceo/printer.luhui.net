(function(a,l){var s,d,o,c,u,f,h,r,p,g,t,n,v,_,x,m,y,b,w,e,i,L,z,k,S,V,K,C,T,A,E,M,N,I,D,O,B;function R(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function P(){return r++}function H(e){return e.match(t)[0]}function W(e,t){var i=e.charAt(0);return 0===(e=y.test(e)?e:"."===i?function(e){for(e=e.replace(n,"/");e.match(v);)e=e.replace(v,"/");return e=e.replace(_,"$1/")}((t?H(t):d.cwd)+e):"/"===i?(i=d.cwd.match(b))?i[0]+e.substring(1):e:d.base+e).indexOf("//")&&(e=location.protocol+e),e}function j(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}a.seajs||(s=a.seajs={version:"2.2.3"},d=s.data={},o=R("Object"),c=R("String"),u=Array.isArray||R("Array"),f=R("Function"),h=R("Undefined"),r=0,p=d.events={},s.on=function(e,t){return(p[e]||(p[e]=[])).push(t),s},s.off=function(e,t){if(!e&&!t)return p=d.events={},s;var i=p[e];if(i)if(t)for(var n=i.length-1;0<=n;n--)i[n]===t&&i.splice(n,1);else delete p[e];return s},g=s.emit=function(e,t){var i,n=p[e];if(n)for(n=n.slice();i=n.shift();)i(t);return s},t=/[^?#]*\//,n=/\/\.\//g,v=/\/[^/]+\/\.\.\//,_=/([^:/])\/\//g,x=/^([^/:]+)(\/.+)$/,m=/{([^{]+)}/g,y=/^\/\/.|:\//,b=/^.*?\/\/.*?\//,B=H((w=document).URL),e=w.scripts,i=w.getElementById("seajsnode")||e[e.length-1],e=H(((i=i).hasAttribute?i.src:i.getAttribute("src",4))||B),s.resolve=function(e,t){return e?(o=e,r=e=(r=d.alias)&&c(r[o])?r[o]:o,(o=d.paths)&&(n=r.match(x))&&c(o[n[1]])&&(r=o[n[1]]+n[2]),o=e=r,(i=d.vars)&&-1<o.indexOf("{")&&(o=o.replace(m,function(e,t){return c(i[t])?i[t]:e})),r=(n=e=o).length-1,function(e){var t=d.map,i=e;if(t)for(var n=0,r=t.length;n<r;n++){var o=t[n];if((i=f(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return i}(W(e="#"===(o=n.charAt(r))?n.substring(0,r):".js"===n.substring(r-2)||0<n.indexOf("?")||".css"===n.substring(r-3)||"/"===o?n:n+".js",t))):"";var i,n,r,o},L=w.head||w.getElementsByTagName("head")[0]||w.documentElement,z=L.getElementsByTagName("base")[0],k=/\.css(?:\?|$)/i,K=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,s.request=function(e,t,i,n){var r=k.test(e),o=w.createElement(r?"link":"script");i&&(o.charset=i),h(n)||o.setAttribute("crossorigin",n),function(e,t,i,n){var r="onload"in e;if(i&&(K||!r))return setTimeout(function(){!function e(t,i){var n=t.sheet;var r;if(K)n&&(r=!0);else if(n)try{n.cssRules&&(r=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(r=!0)}setTimeout(function(){r?i():e(t,i)},20)}(e,t)},1);function o(){e.onload=e.onerror=e.onreadystatechange=null,i||d.debug||L.removeChild(e),e=null,t()}r?(e.onload=o,e.onerror=function(){g("error",{uri:n,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}}(o,t,r,e),r?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),S=o,z?L.insertBefore(o,z):L.appendChild(o),S=null},C=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,T=/\\\\/g,A=s.cache={},M={},N={},I={},D=j.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6},j.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,n=e.length;i<n;i++)t[i]=j.resolve(e[i],this.uri);return t},j.prototype.load=function(){var e=this;if(!(e.status>=D.LOADING)){e.status=D.LOADING;var t=e.resolve();g("load",t);for(var i,n=e._remain=t.length,r=0;r<n;r++)(i=j.get(t[r])).status<D.LOADED?i._waitings[e.uri]=(i._waitings[e.uri]||0)+1:e._remain--;if(0!==e._remain){for(var o,a={},r=0;r<n;r++)(i=A[t[r]]).status<D.FETCHING?i.fetch(a):i.status===D.SAVED&&i.load();for(o in a)a.hasOwnProperty(o)&&a[o]()}else e.onload()}},j.prototype.onload=function(){var e=this;e.status=D.LOADED,e.callback&&e.callback();var t,i,n=e._waitings;for(t in n)n.hasOwnProperty(t)&&((i=A[t])._remain-=n[t],0===i._remain&&i.onload());delete e._waitings,delete e._remain},j.prototype.fetch=function(e){var t=this,i=t.uri;t.status=D.FETCHING;var n={uri:i};g("fetch",n);var r=n.requestUri||i;function o(){s.request(n.requestUri,n.onRequest,n.charset,n.crossorigin)}r&&!N[r]?M[r]?I[r].push(t):(M[r]=!0,I[r]=[t],g("request",n={uri:i,requestUri:r,onRequest:function(){delete M[r],N[r]=!0,E&&(j.save(i,E),E=null);var e,t=I[r];delete I[r];for(;e=t.shift();)e.load()},charset:f(d.charset)?d.charset(r):d.charset,crossorigin:f(d.crossorigin)?d.crossorigin(r):d.crossorigin}),n.requested||(e?e[n.requestUri]=o:o())):t.load()},j.prototype.exec=function(){var e=this;if(e.status>=D.EXECUTING)return e.exports;e.status=D.EXECUTING;var i=e.uri;function n(e){return j.get(n.resolve(e)).exec()}n.resolve=function(e){return j.resolve(e,i)},n.async=function(e,t){return j.use(e,t,i+"_async_"+r++),n};var t=e.factory,t=f(t)?t(n,e.exports={},e):t;return t===l&&(t=e.exports),delete e.factory,e.exports=t,e.status=D.EXECUTED,g("exec",e),t},j.resolve=function(e,t){e={id:e,refUri:t};return g("resolve",e),e.uri||s.resolve(e.id,t)},j.define=function(e,t,i){var n,r=arguments.length;1===r?(i=e,e=l):2===r&&(i=t,u(e)?(t=e,e=l):t=l),!u(t)&&f(i)&&(o=i.toString(),n=[],o.replace(T,"").replace(C,function(e,t,i){i&&n.push(i)}),t=n);var o,r={id:e,uri:j.resolve(e),deps:t,factory:i};r.uri||!w.attachEvent||(o=function(){if(S)return S;if(V&&"interactive"===V.readyState)return V;for(var e=L.getElementsByTagName("script"),t=e.length-1;0<=t;t--){var i=e[t];if("interactive"===i.readyState)return V=i}}())&&(r.uri=o.src),g("define",r),r.uri?j.save(r.uri,r):E=r},j.save=function(e,t){var i=j.get(e);i.status<D.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=D.SAVED)},j.get=function(e,t){return A[e]||(A[e]=new j(e,t))},j.use=function(e,r,t){var o=j.get(t,u(e)?e:[e]);o.callback=function(){for(var e=[],t=o.resolve(),i=0,n=t.length;i<n;i++)e[i]=A[t[i]].exec();r&&r.apply(a,e),delete o.callback},o.load()},j.preload=function(e){var t=d.preload,i=t.length;i?j.use(t,function(){t.splice(0,i),j.preload(e)},d.cwd+"_preload_"+r++):e()},s.use=function(e,t){return j.preload(function(){j.use(e,t,d.cwd+"_use_"+r++)}),s},j.define.cmd={},a.define=j.define,s.Module=j,d.fetchedList=N,d.cid=P,s.require=function(e){e=j.get(j.resolve(e));return e.status<D.EXECUTING&&(e.onload(),e.exec()),e.exports},d.base=(e.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",e])[1],d.dir=e,d.cwd=B,d.charset="utf-8",d.history={},d.preload=(O=[],B=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(B+=" "+w.cookie).replace(/(seajs-\w+)=1/g,function(e,t){O.push(t)}),O),s.config=function(e){for(var t in e){var i=e[t],n=d[t];if(d.history[t]=d.history[t]||[],d.history[t].push(function(e){if(o(e)){var t,i={};for(t in e)i[t]=e[t];return i}return e}(i)),n&&o(n))for(var r in i)n[r]=i[r];else u(n)?i=n.concat(i):"base"===t&&("/"!==i.slice(-1)&&(i+="/"),i=W(i)),d[t]=i}return g("config",e),s})})(this),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";function g(e){return null!=e&&e===e.window}var t=[],L=w.document,i=Object.getPrototypeOf,l=t.slice,v=t.concat,s=t.push,r=t.indexOf,n={},o=n.toString,_=n.hasOwnProperty,a=_.toString,d=a.call(Object),x={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},c={type:!0,src:!0,noModule:!0};function y(e,t,i){var n,r=(t=t||L).createElement("script");if(r.text=e,i)for(n in c)i[n]&&(r[n]=i[n]);t.head.appendChild(r).parentNode.removeChild(r)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var z=function(e,t){return new z.fn.init(e,t)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(e){var t=!!e&&"length"in e&&e.length,i=p(e);return!m(e)&&!g(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}z.fn=z.prototype={jquery:"3.3.1",constructor:z,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=z.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return z.each(this,e)},map:function(i){return this.pushStack(z.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:t.sort,splice:t.splice},z.extend=z.fn.extend=function(){var e,t,i,n,r,o=arguments[0]||{},a=1,l=arguments.length,s=!1;for("boolean"==typeof o&&(s=o,o=arguments[a]||{},a++),"object"==typeof o||m(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(i=e[t])&&(s&&i&&(z.isPlainObject(i)||(n=Array.isArray(i)))?(r=n?(n=!1,r&&Array.isArray(r)?r:[]):r&&z.isPlainObject(r)?r:{},o[t]=z.extend(s,r,i)):void 0!==i&&(o[t]=i));return o},z.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==o.call(e))&&(!(e=i(e))||"function"==typeof(e=_.call(e,"constructor")&&e.constructor)&&a.call(e)===d)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e){y(e)},each:function(e,t){var i,n=0;if(f(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(u,"")},makeArray:function(e,t){t=t||[];return null!=e&&(f(Object(e))?z.merge(t,"string"==typeof e?[e]:e):s.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!=a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(f(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return v.apply([],a)},guid:1,support:x}),"function"==typeof Symbol&&(z.fn[Symbol.iterator]=t[Symbol.iterator]),z.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(i){function u(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320)}function n(){w()}var e,h,y,o,r,p,f,g,b,s,d,w,L,a,z,v,l,c,_,k="sizzle"+ +new Date,x=i.document,S=0,m=0,V=ae(),K=ae(),C=ae(),T=function(e,t){return e===t&&(d=!0),0},A={}.hasOwnProperty,t=[],E=t.pop,M=t.push,N=t.push,I=t.slice,D=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",P="\\["+B+"*("+R+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+B+"*\\]",H=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",W=new RegExp(B+"+","g"),j=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),X=new RegExp("^"+B+"*,"+B+"*"),F=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),$=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),U=new RegExp(H),q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{N.apply(t=I.call(x.childNodes),x.childNodes),t[x.childNodes.length].nodeType}catch(e){N={apply:t.length?function(e,t){M.apply(e,I.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,i,n){var r,o,a,l,s,d,c,u=t&&t.ownerDocument,f=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return i;if(!n&&((t?t.ownerDocument||t:x)!==L&&w(t),t=t||L,z)){if(11!==f&&(s=J.exec(e)))if(r=s[1]){if(9===f){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&_(t,a)&&a.id===r)return i.push(a),i}else{if(s[2])return N.apply(i,t.getElementsByTagName(e)),i;if((r=s[3])&&h.getElementsByClassName&&t.getElementsByClassName)return N.apply(i,t.getElementsByClassName(r)),i}if(h.qsa&&!C[e+" "]&&(!v||!v.test(e))){if(1!==f)u=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(ie,ne):t.setAttribute("id",l=k),o=(d=p(e)).length;o--;)d[o]="#"+l+" "+ge(d[o]);c=d.join(","),u=ee.test(e)&&he(t.parentNode)||t}if(c)try{return N.apply(i,u.querySelectorAll(c)),i}catch(e){}finally{l===k&&t.removeAttribute("id")}}}return g(e.replace(j,"$1"),t,i,n)}function ae(){var i=[];function n(e,t){return i.push(e+" ")>y.cacheLength&&delete n[i.shift()],n[e+" "]=t}return n}function le(e){return e[k]=!0,e}function se(e){var t=L.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var i=e.split("|"),n=i.length;n--;)y.attrHandle[i[n]]=t}function ce(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function fe(a){return le(function(o){return o=+o,le(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=oe.support={},r=oe.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},w=oe.setDocument=function(e){var t,e=e?e.ownerDocument||e:x;return e!==L&&9===e.nodeType&&e.documentElement&&(a=(L=e).documentElement,z=!r(L),x!==L&&(t=L.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",n,!1):t.attachEvent&&t.attachEvent("onunload",n)),h.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=se(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=Q.test(L.getElementsByClassName),h.getById=se(function(e){return a.appendChild(e).id=k,!L.getElementsByName||!L.getElementsByName(k).length}),h.getById?(y.filter.ID=function(e){var t=e.replace(te,u);return function(e){return e.getAttribute("id")===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&z){e=t.getElementById(e);return e?[e]:[]}}):(y.filter.ID=function(e){var t=e.replace(te,u);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&z){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),y.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},y.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&z)return t.getElementsByClassName(e)},l=[],v=[],(h.qsa=Q.test(L.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),se(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(h.matchesSelector=Q.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){h.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),l.push("!=",H)}),v=v.length&&new RegExp(v.join("|")),l=l.length&&new RegExp(l.join("|")),t=Q.test(a.compareDocumentPosition),_=t||Q.test(a.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===i?e===L||e.ownerDocument===x&&_(x,e)?-1:t===L||t.ownerDocument===x&&_(x,t)?1:s?D(s,e)-D(s,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!r||!o)return e===L?-1:t===L?1:r?-1:o?1:s?D(s,e)-D(s,t):0;if(r===o)return ce(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?ce(a[n],l[n]):a[n]===x?-1:l[n]===x?1:0}),L},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&w(e),t=t.replace($,"='$1']"),h.matchesSelector&&z&&!C[t+" "]&&(!l||!l.test(t))&&(!v||!v.test(t)))try{var i=c.call(e,t);if(i||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,L,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==L&&w(e),_(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==L&&w(e);var i=y.attrHandle[t.toLowerCase()],i=i&&A.call(y.attrHandle,t.toLowerCase())?i(e,t,!z):void 0;return void 0!==i?i:h.attributes||!z?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},oe.escape=function(e){return(e+"").replace(ie,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,r=0;if(d=!h.detectDuplicates,s=!h.sortStable&&e.slice(0),e.sort(T),d){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return s=null,e},o=oe.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(y=oe.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,u),e[3]=(e[3]||e[4]||e[5]||"").replace(te,u),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&U.test(i)&&(t=p(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,u).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(e){e=oe.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===n:"!="===i?e!==n:"^="===i?n&&0===e.indexOf(n):"*="===i?n&&-1<e.indexOf(n):"$="===i?n&&e.slice(-n.length)===n:"~="===i?-1<(" "+e.replace(W," ")+" ").indexOf(n):"|="===i&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(p,e,t,g,v){var _="nth"!==p.slice(0,3),x="last"!==p.slice(-4),m="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,l,s,d=_!=x?"nextSibling":"previousSibling",c=e.parentNode,u=m&&e.nodeName.toLowerCase(),f=!i&&!m,h=!1;if(c){if(_){for(;d;){for(a=e;a=a[d];)if(m?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;s=d="only"===p&&!s&&"nextSibling"}return!0}if(s=[x?c.firstChild:c.lastChild],x&&f){for(h=(l=(n=(r=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&n[1])&&n[2],a=l&&c.childNodes[l];a=++l&&a&&a[d]||(h=l=0)||s.pop();)if(1===a.nodeType&&++h&&a===e){r[p]=[S,l,h];break}}else if(f&&(h=l=(n=(r=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&n[1]),!1===h)for(;(a=++l&&a&&a[d]||(h=l=0)||s.pop())&&((m?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++h||(f&&((r=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[S,h]),a!==e)););return(h-=v)===g||h%g==0&&0<=h/g}}},PSEUDO:function(e,o){var t,a=y.pseudos[e]||y.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],y.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=D(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var n=[],r=[],l=f(e.replace(j,"$1"));return l[k]?le(function(e,t,i,n){for(var r,o=l(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,l(n,null,i,r),n[0]=null,!r.pop()}}),has:le(function(t){return function(e){return 0<oe(t,e).length}}),contains:le(function(t){return t=t.replace(te,u),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:le(function(i){return q.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace(te,u).toLowerCase(),function(e){var t;do{if(t=z?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ue(!1),disabled:ue(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:fe(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=y.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})y.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function pe(){}function ge(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ve(a,e,t){var l=e.dir,s=e.next,d=s||l,c=t&&"parentNode"===d,u=m++;return e.first?function(e,t,i){for(;e=e[l];)if(1===e.nodeType||c)return a(e,t,i);return!1}:function(e,t,i){var n,r,o=[S,u];if(i){for(;e=e[l];)if((1===e.nodeType||c)&&a(e,t,i))return!0}else for(;e=e[l];)if(1===e.nodeType||c)if(n=(r=e[k]||(e[k]={}))[e.uniqueID]||(r[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[l]||e;else{if((r=n[d])&&r[0]===S&&r[1]===u)return o[2]=r[2];if((n[d]=o)[2]=a(e,t,i))return!0}return!1}}function _e(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function xe(e,t,i,n,r){for(var o,a=[],l=0,s=e.length,d=null!=t;l<s;l++)(o=e[l])&&(i&&!i(o,n,r)||(a.push(o),d&&t.push(l)));return a}function me(h,p,g,v,_,e){return v&&!v[k]&&(v=me(v)),_&&!_[k]&&(_=me(_,e)),le(function(e,t,i,n){var r,o,a,l=[],s=[],d=t.length,c=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(p||"*",i.nodeType?[i]:i,[]),u=!h||!e&&p?c:xe(c,l,h,i,n),f=g?_||(e?h:d||v)?[]:t:u;if(g&&g(u,f,i,n),v)for(r=xe(f,s),v(r,[],i,n),o=r.length;o--;)(a=r[o])&&(f[s[o]]=!(u[s[o]]=a));if(e){if(_||h){if(_){for(r=[],o=f.length;o--;)(a=f[o])&&r.push(u[o]=a);_(null,f=[],r,n)}for(o=f.length;o--;)(a=f[o])&&-1<(r=_?D(e,a):l[o])&&(e[r]=!(t[r]=a))}}else f=xe(f===t?f.splice(d,f.length):f),_?_(null,t,f,n):N.apply(t,f)})}function ye(v,_){function e(e,t,i,n,r){var o,a,l,s=0,d="0",c=e&&[],u=[],f=b,h=e||m&&y.find.TAG("*",r),p=S+=null==f?1:Math.random()||.1,g=h.length;for(r&&(b=t===L||t||r);d!==g&&null!=(o=h[d]);d++){if(m&&o){for(a=0,t||o.ownerDocument===L||(w(o),i=!z);l=v[a++];)if(l(o,t||L,i)){n.push(o);break}r&&(S=p)}x&&((o=!l&&o)&&s--,e&&c.push(o))}if(s+=d,x&&d!==s){for(a=0;l=_[a++];)l(c,u,t,i);if(e){if(0<s)for(;d--;)c[d]||u[d]||(u[d]=E.call(n));u=xe(u)}N.apply(n,u),r&&!e&&0<u.length&&1<s+_.length&&oe.uniqueSort(n)}return r&&(S=p,b=f),c}var x=0<_.length,m=0<v.length;return x?le(e):e}return pe.prototype=y.filters=y.pseudos,y.setFilters=new pe,p=oe.tokenize=function(e,t){var i,n,r,o,a,l,s,d=K[e+" "];if(d)return t?0:d.slice(0);for(a=e,l=[],s=y.preFilter;a;){for(o in i&&!(n=X.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(r=[])),i=!1,(n=F.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(j," ")}),a=a.slice(i.length)),y.filter)!(n=G[o].exec(a))||s[o]&&!(n=s[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?oe.error(e):K(e,l).slice(0)},f=oe.compile=function(e,t){var i,n=[],r=[],o=C[e+" "];if(!o){for(i=(t=t||p(e)).length;i--;)((o=function e(t){for(var n,i,r,o=t.length,a=y.relative[t[0].type],l=a||y.relative[" "],s=a?1:0,d=ve(function(e){return e===n},l,!0),c=ve(function(e){return-1<D(n,e)},l,!0),u=[function(e,t,i){return i=!a&&(i||t!==b)||((n=t).nodeType?d:c)(e,t,i),n=null,i}];s<o;s++)if(i=y.relative[t[s].type])u=[ve(_e(u),i)];else{if((i=y.filter[t[s].type].apply(null,t[s].matches))[k]){for(r=++s;r<o&&!y.relative[t[r].type];r++);return me(1<s&&_e(u),1<s&&ge(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(j,"$1"),i,s<r&&e(t.slice(s,r)),r<o&&e(t=t.slice(r)),r<o&&ge(t))}u.push(i)}return _e(u)}(t[i]))[k]?n:r).push(o);(o=C(e,ye(r,n))).selector=e}return o},g=oe.select=function(e,t,i,n){var r,o,a,l,s,d="function"==typeof e&&e,c=!n&&p(e=d.selector||e);if(i=i||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&z&&y.relative[o[1].type]){if(!(t=(y.find.ID(a.matches[0].replace(te,u),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=G.needsContext.test(e)?0:o.length;r--&&(a=o[r],!y.relative[l=a.type]);)if((s=y.find[l])&&(n=s(a.matches[0].replace(te,u),ee.test(o[0].type)&&he(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&ge(o)))return N.apply(i,n),i;break}}return(d||f(e,c))(n,t,!z,i,!t||ee.test(e)&&he(t.parentNode)||t),i},h.sortStable=k.split("").sort(T).join("")===k,h.detectDuplicates=!!d,w(),h.sortDetached=se(function(e){return 1&e.compareDocumentPosition(L.createElement("fieldset"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||de(O,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),oe}(w);z.find=h,z.expr=h.selectors,z.expr[":"]=z.expr.pseudos,z.uniqueSort=z.unique=h.uniqueSort,z.text=h.getText,z.isXMLDoc=h.isXML,z.contains=h.contains,z.escapeSelector=h.escape;function b(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&z(e).is(i))break;n.push(e)}return n}function k(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var S=z.expr.match.needsContext;function V(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var K=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,i,n){return m(i)?z.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?z.grep(e,function(e){return e===i!==n}):"string"!=typeof i?z.grep(e,function(e){return-1<r.call(i,e)!==n}):z.filter(i,e,n)}z.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?z.find.matchesSelector(n,e)?[n]:[]:z.find.matches(e,z.grep(t,function(e){return 1===e.nodeType}))},z.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(z(e).filter(function(){for(t=0;t<n;t++)if(z.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)z.find(e,r[t],i);return 1<n?z.uniqueSort(i):i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&S.test(e)?z(e):e||[],!1).length}});var T,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(z.fn.init=function(e,t,i){if(!e)return this;if(i=i||T,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==i.ready?i.ready(e):e(z):z.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:A.exec(e))||!n[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof z?t[0]:t,z.merge(this,z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:L,!0)),K.test(n[1])&&z.isPlainObject(t))for(var n in t)m(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(e=L.getElementById(n[2]))&&(this[0]=e,this.length=1),this}).prototype=z.fn,T=z(L);var E=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}z.fn.extend({has:function(e){var t=z(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(z.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&z(e);if(!S.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&z.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?z.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(z(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(z.uniqueSort(z.merge(this.get(),z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),z.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return b(e,"parentNode")},parentsUntil:function(e,t,i){return b(e,"parentNode",i)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return b(e,"nextSibling")},prevAll:function(e){return b(e,"previousSibling")},nextUntil:function(e,t,i){return b(e,"nextSibling",i)},prevUntil:function(e,t,i){return b(e,"previousSibling",i)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return V(e,"iframe")?e.contentDocument:(V(e,"template")&&(e=e.content||e),z.merge([],e.childNodes))}},function(n,r){z.fn[n]=function(e,t){var i=z.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=z.filter(t,i)),1<this.length&&(M[n]||z.uniqueSort(i),E.test(n)&&i.reverse()),this.pushStack(i)}});var I=/[^\x20\t\r\n\f]+/g;function D(e){return e}function O(e){throw e}function B(e,t,i,n){var r;try{e&&m(r=e.promise)?r.call(e).done(t).fail(i):e&&m(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}z.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},z.each(e.match(I)||[],function(e,t){i[t]=!0}),i):z.extend({},n);function r(){for(l=l||n.once,a=o=!0;d.length;c=-1)for(t=d.shift();++c<s.length;)!1===s[c].apply(t[0],t[1])&&n.stopOnFalse&&(c=s.length,t=!1);n.memory||(t=!1),o=!1,l&&(s=t?[]:"")}var o,t,a,l,s=[],d=[],c=-1,u={add:function(){return s&&(t&&!o&&(c=s.length-1,d.push(t)),function i(e){z.each(e,function(e,t){m(t)?n.unique&&u.has(t)||s.push(t):t&&t.length&&"string"!==p(t)&&i(t)})}(arguments),t&&!o&&r()),this},remove:function(){return z.each(arguments,function(e,t){for(var i;-1<(i=z.inArray(t,s,i));)s.splice(i,1),i<=c&&c--}),this},has:function(e){return e?-1<z.inArray(e,s):0<s.length},empty:function(){return s=s&&[],this},disable:function(){return l=d=[],s=t="",this},disabled:function(){return!s},lock:function(){return l=d=[],t||o||(s=t=""),this},locked:function(){return!!l},fireWith:function(e,t){return l||(t=[e,(t=t||[]).slice?t.slice():t],d.push(t),o||r()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},z.extend({Deferred:function(e){var o=[["notify","progress",z.Callbacks("memory"),z.Callbacks("memory"),2],["resolve","done",z.Callbacks("once memory"),z.Callbacks("once memory"),0,"resolved"],["reject","fail",z.Callbacks("once memory"),z.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return l.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return z.Deferred(function(n){z.each(o,function(e,t){var i=m(r[t[4]])&&r[t[4]];l[t[1]](function(){var e=i&&i.apply(this,arguments);e&&m(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var s=0;function d(r,o,a,l){return function(){function e(){var e,t;if(!(r<s)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?l?t.call(e,d(s,o,D,l),d(s,o,O,l)):(s++,t.call(e,d(s,o,D,l),d(s,o,O,l),d(s,o,D,o.notifyWith))):(a!==D&&(i=void 0,n=[e]),(l||o.resolveWith)(i,n))}}var i=this,n=arguments,t=l?e:function(){try{e()}catch(e){z.Deferred.exceptionHook&&z.Deferred.exceptionHook(e,t.stackTrace),s<=r+1&&(a!==O&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(z.Deferred.getStackHook&&(t.stackTrace=z.Deferred.getStackHook()),w.setTimeout(t))}}return z.Deferred(function(e){o[0][3].add(d(0,e,m(n)?n:D,e.notifyWith)),o[1][3].add(d(0,e,m(t)?t:D)),o[2][3].add(d(0,e,m(i)?i:O))}).promise()},promise:function(e){return null!=e?z.extend(e,a):a}},l={};return z.each(o,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),i.add(t[3].fire),l[t[0]]=function(){return l[t[0]+"With"](this===l?void 0:this,arguments),this},l[t[0]+"With"]=i.fireWith}),a.promise(l),e&&e.call(l,l),l},when:function(e){function t(t){return function(e){r[t]=this,o[t]=1<arguments.length?l.call(arguments):e,--i||a.resolveWith(r,o)}}var i=arguments.length,n=i,r=Array(n),o=l.call(arguments),a=z.Deferred();if(i<=1&&(B(e,a.done(t(n)).resolve,a.reject,!i),"pending"===a.state()||m(o[n]&&o[n].then)))return a.then();for(;n--;)B(o[n],t(n),a.reject);return a.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;z.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&R.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},z.readyException=function(e){w.setTimeout(function(){throw e})};var P=z.Deferred();function H(){L.removeEventListener("DOMContentLoaded",H),w.removeEventListener("load",H),z.ready()}z.fn.ready=function(e){return P.then(e).catch(function(e){z.readyException(e)}),this},z.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--z.readyWait:z.isReady)||(z.isReady=!0)!==e&&0<--z.readyWait||P.resolveWith(L,[z])}}),z.ready.then=P.then,"complete"===L.readyState||"loading"!==L.readyState&&!L.documentElement.doScroll?w.setTimeout(z.ready):(L.addEventListener("DOMContentLoaded",H),w.addEventListener("load",H));var W=function(e,t,i,n,r,o,a){var l=0,s=e.length,d=null==i;if("object"===p(i))for(l in r=!0,i)W(e,t,l,i[l],!0,o,a);else if(void 0!==n&&(r=!0,m(n)||(a=!0),d&&(t=a?(t.call(e,n),null):(d=t,function(e,t,i){return d.call(z(e),i)})),t))for(;l<s;l++)t(e[l],i,a?n:n.call(e[l],l,t(e[l],i)));return r?e:d?t.call(e):s?t(e[0],i):o},j=/^-ms-/,X=/-([a-z])/g;function F(e,t){return t.toUpperCase()}function $(e){return e.replace(j,"ms-").replace(X,F)}function U(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function q(){this.expando=z.expando+q.uid++}q.uid=1,q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[$(t)]=i;else for(n in t)r[$(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map($):(t=$(t))in n?[t]:t.match(I)||[]).length;for(;i--;)delete n[t[i]]}void 0!==t&&!z.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!z.isEmptyObject(e)}};var G=new q,Y=new q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(e){}Y.set(e,t,i)}else i=void 0;return i}z.extend({hasData:function(e){return Y.hasData(e)||G.hasData(e)},data:function(e,t,i){return Y.access(e,t,i)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,i){return G.access(e,t,i)},_removeData:function(e,t){G.remove(e,t)}}),z.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){Y.set(this,i)}):W(this,function(e){var t;return o&&void 0===e?void 0!==(t=Y.get(o,i))||void 0!==(t=J(o,i))?t:void 0:void this.each(function(){Y.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=Y.get(o),1===o.nodeType&&!G.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(n=a[t].name).indexOf("data-")&&(n=$(n.slice(5)),J(o,n,r[n]));G.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),z.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=G.get(e,t),i&&(!n||Array.isArray(i)?n=G.access(e,t,z.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=z.queue(e,t),n=i.length,r=i.shift(),o=z._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){z.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return G.get(e,i)||G.access(e,i,{empty:z.Callbacks("once memory").add(function(){G.remove(e,[t+"queue",i])})})}}),z.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?z.queue(this[0],t):void 0===i?this:this.each(function(){var e=z.queue(this,t,i);z._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&z.dequeue(this,t)})},dequeue:function(e){return this.each(function(){z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--r||o.resolveWith(a,[a])}var n,r=1,o=z.Deferred(),a=this,l=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";l--;)(n=G.get(a[l],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),o.promise(t)}});function ee(e,t,i,n){var r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in n=i.apply(e,n||[]),t)e.style[r]=o[r];return n}var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&z.contains(e.ownerDocument,e)&&"none"===z.css(e,"display")};function oe(e,t,i,n){var r,o,a=20,l=n?function(){return n.cur()}:function(){return z.css(e,t,"")},s=l(),d=i&&i[3]||(z.cssNumber[t]?"":"px"),c=(z.cssNumber[t]||"px"!==d&&+s)&&ie.exec(z.css(e,t));if(c&&c[3]!==d){for(s/=2,d=d||c[3],c=+s||1;a--;)z.style(e,t,c+d),(1-o)*(1-(o=l()/s||.5))<=0&&(a=0),c/=o;c*=2,z.style(e,t,c+d),i=i||[]}return i&&(c=+c||+s||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}var ae={};function le(e,t){for(var i,n,r,o,a,l=[],s=0,d=e.length;s<d;s++)(n=e[s]).style&&(i=n.style.display,t?("none"===i&&(l[s]=G.get(n,"display")||null,l[s]||(n.style.display="")),""===n.style.display&&re(n)&&(l[s]=(a=o=void 0,o=(r=n).ownerDocument,a=r.nodeName,(r=ae[a])||(o=o.body.appendChild(o.createElement(a)),r=z.css(o,"display"),o.parentNode.removeChild(o),"none"===r&&(r="block"),ae[a]=r)))):"none"!==i&&(l[s]="none",G.set(n,"display",i)));for(s=0;s<d;s++)null!=l[s]&&(e[s].style.display=l[s]);return e}z.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?z(this).show():z(this).hide()})}});var se=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ce=/^$|^module$|\/(?:java|ecma)script/i,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&V(e,t)?z.merge([e],i):i}function he(e,t){for(var i=0,n=e.length;i<n;i++)G.set(e[i],"globalEval",!t||G.get(t[i],"globalEval"))}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var pe=/<|&#?\w+;/;function ge(e,t,i,n,r){for(var o,a,l,s,d,c=t.createDocumentFragment(),u=[],f=0,h=e.length;f<h;f++)if((o=e[f])||0===o)if("object"===p(o))z.merge(u,o.nodeType?[o]:o);else if(pe.test(o)){for(a=a||c.appendChild(t.createElement("div")),l=(de.exec(o)||["",""])[1].toLowerCase(),l=ue[l]||ue._default,a.innerHTML=l[1]+z.htmlPrefilter(o)+l[2],d=l[0];d--;)a=a.lastChild;z.merge(u,a.childNodes),(a=c.firstChild).textContent=""}else u.push(t.createTextNode(o));for(c.textContent="",f=0;o=u[f++];)if(n&&-1<z.inArray(o,n))r&&r.push(o);else if(s=z.contains(o.ownerDocument,o),a=fe(c.appendChild(o),"script"),s&&he(a),i)for(d=0;o=a[d++];)ce.test(o.type||"")&&i.push(o);return c}t=L.createDocumentFragment().appendChild(L.createElement("div")),(h=L.createElement("input")).setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),t.appendChild(h),x.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue;var ve=L.documentElement,_e=/^key/,xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,me=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function be(){return!1}function we(){try{return L.activeElement}catch(e){}}function Le(e,t,i,n,r,o){var a,l;if("object"==typeof t){for(l in"string"!=typeof i&&(n=n||i,i=void 0),t)Le(e,l,i,n,t[l],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=be;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return z().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=z.guid++)),e.each(function(){z.event.add(this,t,r,n,i)})}z.event={global:{},add:function(t,e,i,n,r){var o,a,l,s,d,c,u,f,h,p=G.get(t);if(p)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&z.find.matchesSelector(ve,r),i.guid||(i.guid=z.guid++),(l=p.events)||(l=p.events={}),(a=p.handle)||(a=p.handle=function(e){return void 0!==z&&z.event.triggered!==e.type?z.event.dispatch.apply(t,arguments):void 0}),s=(e=(e||"").match(I)||[""]).length;s--;)u=h=(d=me.exec(e[s])||[])[1],f=(d[2]||"").split(".").sort(),u&&(c=z.event.special[u]||{},u=(r?c.delegateType:c.bindType)||u,c=z.event.special[u]||{},d=z.extend({type:u,origType:h,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&z.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[u])||((h=l[u]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,a)||t.addEventListener&&t.addEventListener(u,a)),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),z.event.global[u]=!0)},remove:function(e,t,i,n,r){var o,a,l,s,d,c,u,f,h,p,g,v=G.hasData(e)&&G.get(e);if(v&&(s=v.events)){for(d=(t=(t||"").match(I)||[""]).length;d--;)if(h=g=(l=me.exec(t[d])||[])[1],p=(l[2]||"").split(".").sort(),h){for(u=z.event.special[h]||{},f=s[h=(n?u.delegateType:u.bindType)||h]||[],l=l[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&g!==c.origType||i&&i.guid!==c.guid||l&&!l.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(e,c));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(e,p,v.handle)||z.removeEvent(e,h,v.handle),delete s[h])}else for(h in s)z.event.remove(e,h+t[d],i,n,!0);z.isEmptyObject(s)&&G.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a=z.event.fix(e),l=new Array(arguments.length),s=(G.get(this,"events")||{})[a.type]||[],e=z.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,a)){for(o=z.event.handlers.call(this,a,s),t=0;(n=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(r=((z.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,l))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,r,o,a,l=[],s=t.delegateCount,d=e.target;if(s&&d.nodeType&&!("click"===e.type&&1<=e.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],a={},i=0;i<s;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<z(r,this).index(d):z.find(r,this,null,[d]).length),a[r]&&o.push(n);o.length&&l.push({elem:d,handlers:o})}return d=this,s<t.length&&l.push({elem:d,handlers:t.slice(s)}),l},addProp:function(t,e){Object.defineProperty(z.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[z.expando]?e:new z.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==we()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===we()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&V(this,"input"))return this.click(),!1},_default:function(e){return V(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},z.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},z.Event=function(e,t){if(!(this instanceof z.Event))return new z.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ye:be,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&z.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[z.expando]=!0},z.Event.prototype={constructor:z.Event,isDefaultPrevented:be,isPropagationStopped:be,isImmediatePropagationStopped:be,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ye,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ye,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ye,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},z.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},z.event.addProp),z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){z.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||z.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),z.fn.extend({on:function(e,t,i,n){return Le(this,e,t,i,n)},one:function(e,t,i,n){return Le(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,z(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=be),this.each(function(){z.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r]);return this}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Se=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ke(e,t){return V(e,"table")&&V(11!==t.nodeType?t:t.firstChild,"tr")&&z(e).children("tbody")[0]||e}function Ce(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Te(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ae(e,t){var i,n,r,o,a,l;if(1===t.nodeType){if(G.hasData(e)&&(o=G.access(e),a=G.set(t,o),l=o.events))for(r in delete a.handle,a.events={},l)for(i=0,n=l[r].length;i<n;i++)z.event.add(t,r,l[r][i]);Y.hasData(e)&&(e=Y.access(e),e=z.extend({},e),Y.set(t,e))}}function Ee(i,n,r,o){n=v.apply([],n);var e,t,a,l,s,d,c=0,u=i.length,f=u-1,h=n[0],p=m(h);if(p||1<u&&"string"==typeof h&&!x.checkClone&&Se.test(h))return i.each(function(e){var t=i.eq(e);p&&(n[0]=h.call(this,e,t.html())),Ee(t,n,r,o)});if(u&&(t=(e=ge(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(l=(a=z.map(fe(e,"script"),Ce)).length;c<u;c++)s=e,c!==f&&(s=z.clone(s,!0,!0),l&&z.merge(a,fe(s,"script"))),r.call(i[c],s,c);if(l)for(d=a[a.length-1].ownerDocument,z.map(a,Te),c=0;c<l;c++)s=a[c],ce.test(s.type||"")&&!G.access(s,"globalEval")&&z.contains(d,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?z._evalUrl&&z._evalUrl(s.src):y(s.textContent.replace(Ve,""),d,s))}return i}function Me(e,t,i){for(var n,r=t?z.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||z.cleanData(fe(n)),n.parentNode&&(i&&z.contains(n.ownerDocument,n)&&he(fe(n,"script")),n.parentNode.removeChild(n));return e}z.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,l,s,d,c=e.cloneNode(!0),u=z.contains(e.ownerDocument,e);if(!(x.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||z.isXMLDoc(e)))for(a=fe(c),n=0,r=(o=fe(e)).length;n<r;n++)l=o[n],s=a[n],d=void 0,"input"===(d=s.nodeName.toLowerCase())&&se.test(l.type)?s.checked=l.checked:"input"!==d&&"textarea"!==d||(s.defaultValue=l.defaultValue);if(t)if(i)for(o=o||fe(e),a=a||fe(c),n=0,r=o.length;n<r;n++)Ae(o[n],a[n]);else Ae(e,c);return 0<(a=fe(c,"script")).length&&he(a,!u&&fe(e,"script")),c},cleanData:function(e){for(var t,i,n,r=z.event.special,o=0;void 0!==(i=e[o]);o++)if(U(i)){if(t=i[G.expando]){if(t.events)for(n in t.events)r[n]?z.event.remove(i,n):z.removeEvent(i,n,t.handle);i[G.expando]=void 0}i[Y.expando]&&(i[Y.expando]=void 0)}}}),z.fn.extend({detach:function(e){return Me(this,e,!0)},remove:function(e){return Me(this,e)},text:function(e){return W(this,function(e){return void 0===e?z.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ee(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ke(this,e).appendChild(e)})},prepend:function(){return Ee(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ke(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(z.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return z.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ue[(de.exec(e)||["",""])[1].toLowerCase()]){e=z.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(z.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Ee(this,arguments,function(e){var t=this.parentNode;z.inArray(this,i)<0&&(z.cleanData(fe(this)),t&&t.replaceChild(e,this))},i)}}),z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){z.fn[e]=function(e){for(var t,i=[],n=z(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),z(n[o])[a](t),s.apply(i,t.get());return this.pushStack(i)}});var Ne,Ie,De,Oe,Be,Re,Pe,He=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),We=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)},je=new RegExp(ne.join("|"),"i");function Xe(){var e;Pe&&(Re.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Pe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(Re).appendChild(Pe),e=w.getComputedStyle(Pe),Ne="1%"!==e.top,Be=12===Fe(e.marginLeft),Pe.style.right="60%",Oe=36===Fe(e.right),Ie=36===Fe(e.width),Pe.style.position="absolute",De=36===Pe.offsetWidth||"absolute",ve.removeChild(Re),Pe=null)}function Fe(e){return Math.round(parseFloat(e))}function $e(e,t,i){var n,r,o=e.style;return(i=i||We(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||z.contains(e.ownerDocument,e)||(r=z.style(e,t)),!x.pixelBoxStyles()&&He.test(r)&&je.test(t)&&(n=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=i.width,o.width=n,o.minWidth=e,o.maxWidth=t)),void 0!==r?r+"":r}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Re=L.createElement("div"),(Pe=L.createElement("div")).style&&(Pe.style.backgroundClip="content-box",Pe.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle="content-box"===Pe.style.backgroundClip,z.extend(x,{boxSizingReliable:function(){return Xe(),Ie},pixelBoxStyles:function(){return Xe(),Oe},pixelPosition:function(){return Xe(),Ne},reliableMarginLeft:function(){return Xe(),Be},scrollboxSize:function(){return Xe(),De}}));var qe=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"},Qe=["Webkit","Moz","ms"],Je=L.createElement("div").style;function et(e){return z.cssProps[e]||(z.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Qe.length;i--;)if((e=Qe[i]+t)in Je)return e}(e)||e)}function tt(e,t,i){var n=ie.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function it(e,t,i,n,r,o){var a="width"===t?1:0,l=0,s=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(s+=z.css(e,i+ne[a],!0,r)),n?("content"===i&&(s-=z.css(e,"padding"+ne[a],!0,r)),"margin"!==i&&(s-=z.css(e,"border"+ne[a]+"Width",!0,r))):(s+=z.css(e,"padding"+ne[a],!0,r),"padding"!==i?s+=z.css(e,"border"+ne[a]+"Width",!0,r):l+=z.css(e,"border"+ne[a]+"Width",!0,r));return!n&&0<=o&&(s+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-s-l-.5))),s}function nt(e,t,i){var n=We(e),r=$e(e,t,n),o="border-box"===z.css(e,"boxSizing",!1,n),a=o;if(He.test(r)){if(!i)return r;r="auto"}return a=a&&(x.boxSizingReliable()||r===e.style[t]),"auto"!==r&&(parseFloat(r)||"inline"!==z.css(e,"display",!1,n))||(r=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(r=parseFloat(r)||0)+it(e,t,i||(o?"border":"content"),a,n,r)+"px"}function rt(e,t,i,n,r){return new rt.prototype.init(e,t,i,n,r)}z.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=$e(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,l=$(t),s=Ge.test(t),d=e.style;if(s||(t=et(l)),a=z.cssHooks[t]||z.cssHooks[l],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:d[t];"string"===(o=typeof i)&&(r=ie.exec(i))&&r[1]&&(i=oe(e,t,r),o="number"),null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(z.cssNumber[l]?"":"px")),x.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(s?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,n){var r,o=$(t);return Ge.test(t)||(t=et(o)),(o=z.cssHooks[t]||z.cssHooks[o])&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=$e(e,t,n)),"normal"===r&&t in Ze&&(r=Ze[t]),""===i||i?(t=parseFloat(r),!0===i||isFinite(t)?t||0:r):r}}),z.each(["height","width"],function(e,a){z.cssHooks[a]={get:function(e,t,i){if(t)return!qe.test(z.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,a,i):ee(e,Ye,function(){return nt(e,a,i)})},set:function(e,t,i){var n,r=We(e),o="border-box"===z.css(e,"boxSizing",!1,r),i=i&&it(e,a,i,o,r);return o&&x.scrollboxSize()===r.position&&(i-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(r[a])-it(e,a,"border",!1,r)-.5)),i&&(n=ie.exec(t))&&"px"!==(n[3]||"px")&&(e.style[a]=t,t=z.css(e,a)),tt(0,t,i)}}}),z.cssHooks.marginLeft=Ue(x.reliableMarginLeft,function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||e.getBoundingClientRect().left-ee(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),z.each({margin:"",padding:"",border:"Width"},function(r,o){z.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+ne[t]+o]=n[t]||n[t-2]||n[0];return i}},"margin"!==r&&(z.cssHooks[r+o].set=tt)}),z.fn.extend({css:function(e,t){return W(this,function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){for(n=We(e),r=t.length;a<r;a++)o[t[a]]=z.css(e,t[a],!1,n);return o}return void 0!==i?z.style(e,t,i):z.css(e,t)},e,t,1<arguments.length)}}),(z.Tween=rt).prototype={constructor:rt,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||z.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(z.cssNumber[i]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return(e&&e.get?e:rt.propHooks._default).get(this)},run:function(e){var t,i=rt.propHooks[this.prop];return this.options.duration?this.pos=t=z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:rt.propHooks._default).set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=z.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){z.fx.step[e.prop]?z.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[z.cssProps[e.prop]]&&!z.cssHooks[e.prop]?e.elem[e.prop]=e.now:z.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},z.fx=rt.prototype.init,z.fx.step={};var ot,at,lt=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function dt(){at&&(!1===L.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(dt):w.setTimeout(dt,z.fx.interval),z.fx.tick())}function ct(){return w.setTimeout(function(){ot=void 0}),ot=Date.now()}function ut(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=ne[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function ft(e,t,i){for(var n,r=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function ht(r,e,t){var i,o,n=0,a=ht.prefilters.length,l=z.Deferred().always(function(){delete s.elem}),s=function(){if(o)return!1;for(var e=ot||ct(),e=Math.max(0,d.startTime+d.duration-e),t=1-(e/d.duration||0),i=0,n=d.tweens.length;i<n;i++)d.tweens[i].run(t);return l.notifyWith(r,[d,t,e]),t<1&&n?e:(n||l.notifyWith(r,[d,1,0]),l.resolveWith(r,[d]),!1)},d=l.promise({elem:r,props:z.extend({},e),opts:z.extend(!0,{specialEasing:{},easing:z.easing._default},t),originalProperties:e,originalOptions:t,startTime:ot||ct(),duration:t.duration,tweens:[],createTween:function(e,t){e=z.Tween(r,d.opts,e,t,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(e),e},stop:function(e){var t=0,i=e?d.tweens.length:0;if(o)return this;for(o=!0;t<i;t++)d.tweens[t].run(1);return e?(l.notifyWith(r,[d,1,0]),l.resolveWith(r,[d,e])):l.rejectWith(r,[d,e]),this}}),c=d.props;for(!function(e,t){var i,n,r,o,a;for(i in e)if(r=t[n=$(i)],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=z.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(c,d.opts.specialEasing);n<a;n++)if(i=ht.prefilters[n].call(d,r,c,d.opts))return m(i.stop)&&(z._queueHooks(d.elem,d.opts.queue).stop=i.stop.bind(i)),i;return z.map(c,ft,d),m(d.opts.start)&&d.opts.start.call(r,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),z.fx.timer(z.extend(s,{elem:r,anim:d,queue:d.opts.queue})),d}z.Animation=z.extend(ht,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return oe(i.elem,e,ie.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=m(e)?(t=e,["*"]):e.match(I)).length;n<r;n++)i=e[n],ht.tweeners[i]=ht.tweeners[i]||[],ht.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,a,l,s,d,c="width"in t||"height"in t,u=this,f={},h=e.style,p=e.nodeType&&re(e),g=G.get(e,"fxshow");for(n in i.queue||(null==(a=z._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,z.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],lt.test(r)){if(delete t[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;p=!0}f[n]=g&&g[n]||z.style(e,n)}if((s=!z.isEmptyObject(t))||!z.isEmptyObject(f))for(n in c&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],null==(d=g&&g.display)&&(d=G.get(e,"display")),"none"===(c=z.css(e,"display"))&&(d?c=d:(le([e],!0),d=e.style.display||d,c=z.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===z.css(e,"float")&&(s||(u.done(function(){h.display=d}),null==d&&(c=h.display,d="none"===c?"":c)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),s=!1,f)s||(g?"hidden"in g&&(p=g.hidden):g=G.access(e,"fxshow",{display:d}),o&&(g.hidden=!p),p&&le([e],!0),u.done(function(){for(n in p||le([e]),G.remove(e,"fxshow"),f)z.style(e,n,f[n])})),s=ft(p?g[n]:0,n,u),n in g||(g[n]=s.start,p&&(s.end=s.start,s.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),z.speed=function(e,t,i){var n=e&&"object"==typeof e?z.extend({},e):{complete:i||!i&&t||m(e)&&e,duration:e,easing:i&&t||t&&!m(t)&&t};return z.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in z.fx.speeds?n.duration=z.fx.speeds[n.duration]:n.duration=z.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&z.dequeue(this,n.queue)},n},z.fn.extend({fadeTo:function(e,t,i,n){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=z.isEmptyObject(t),o=z.speed(e,i,n),n=function(){var e=ht(this,z.extend({},t),o);(r||G.get(this,"finish"))&&e.stop(!0)};return n.finish=n,r||!1===o.queue?this.each(n):this.queue(o.queue,n)},stop:function(r,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=z.timers,n=G.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&st.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||z.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=G.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=z.timers,o=i?i.length:0;for(t.finish=!0,z.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),z.each(["toggle","show","hide"],function(e,n){var r=z.fn[n];z.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(ut(n,!0),e,t,i)}}),z.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){z.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),z.timers=[],z.fx.tick=function(){var e,t=0,i=z.timers;for(ot=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||z.fx.stop(),ot=void 0},z.fx.timer=function(e){z.timers.push(e),z.fx.start()},z.fx.interval=13,z.fx.start=function(){at||(at=!0,dt())},z.fx.stop=function(){at=null},z.fx.speeds={slow:600,fast:200,_default:400},z.fn.delay=function(n,e){return n=z.fx&&z.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},t=L.createElement("input"),te=L.createElement("select").appendChild(L.createElement("option")),t.type="checkbox",x.checkOn=""!==t.value,x.optSelected=te.selected,(t=L.createElement("input")).value="t",t.type="radio",x.radioValue="t"===t.value;var pt,gt=z.expr.attrHandle;z.fn.extend({attr:function(e,t){return W(this,z.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){z.removeAttr(this,e)})}}),z.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?z.prop(e,t,i):(1===o&&z.isXMLDoc(e)||(r=z.attrHooks[t.toLowerCase()]||(z.expr.match.bool.test(t)?pt:void 0)),void 0!==i?null===i?void z.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):!(r&&"get"in r&&null!==(n=r.get(e,t)))&&null==(n=z.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!x.radioValue&&"radio"===t&&V(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(I);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),pt={set:function(e,t,i){return!1===t?z.removeAttr(e,i):e.setAttribute(i,i),i}},z.each(z.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||z.find.attr;gt[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=gt[o],gt[o]=n,n=null!=a(e,t,i)?o:null,gt[o]=r),n}});var vt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;function xt(e){return(e.match(I)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(I)||[]}z.fn.extend({prop:function(e,t){return W(this,z.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[z.propFix[e]||e]})}}),z.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&z.isXMLDoc(e)||(t=z.propFix[t]||t,r=z.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=z.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(z.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){z.propFix[this.toLowerCase()]=this}),z.fn.extend({addClass:function(t){var e,i,n,r,o,a,l=0;if(m(t))return this.each(function(e){z(this).addClass(t.call(this,e,mt(this)))});if((e=yt(t)).length)for(;i=this[l++];)if(a=mt(i),n=1===i.nodeType&&" "+xt(a)+" "){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a!==(a=xt(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,a,l=0;if(m(t))return this.each(function(e){z(this).removeClass(t.call(this,e,mt(this)))});if(!arguments.length)return this.attr("class","");if((e=yt(t)).length)for(;i=this[l++];)if(a=mt(i),n=1===i.nodeType&&" "+xt(a)+" "){for(o=0;r=e[o++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a!==(a=xt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):m(r)?this.each(function(e){z(this).toggleClass(r.call(this,e,mt(this),t),t)}):this.each(function(){var e,t,i,n;if(a)for(t=0,i=z(this),n=yt(r);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!=o||((e=mt(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&G.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,n=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+xt(mt(t))+" ").indexOf(n))return!0;return!1}});var bt=/\r/g;z.fn.extend({val:function(t){var i,e,n,r=this[0];return arguments.length?(n=m(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,z(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=z.map(e,function(e){return null==e?"":e+""})),(i=z.valHooks[this.type]||z.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):r?(i=z.valHooks[r.type]||z.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(r,"value"))?e:"string"==typeof(e=r.value)?e.replace(bt,""):null==e?"":e:void 0}}),z.extend({valHooks:{option:{get:function(e){var t=z.find.attr(e,"value");return null!=t?t:xt(z.text(e))}},select:{get:function(e){for(var t,i=e.options,n=e.selectedIndex,r="select-one"===e.type,o=r?null:[],a=r?n+1:i.length,l=n<0?a:r?n:0;l<a;l++)if(((t=i[l]).selected||l===n)&&!t.disabled&&(!t.parentNode.disabled||!V(t.parentNode,"optgroup"))){if(t=z(t).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,o=z.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<z.inArray(z.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),z.each(["radio","checkbox"],function(){z.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<z.inArray(z(e).val(),t)}},x.checkOn||(z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),x.focusin="onfocusin"in w;function wt(e){e.stopPropagation()}var Lt=/^(?:focusinfocus|focusoutblur)$/;z.extend(z.event,{trigger:function(e,t,i,n){var r,o,a,l,s,d,c,u=[i||L],f=_.call(e,"type")?e.type:e,h=_.call(e,"namespace")?e.namespace.split("."):[],p=c=o=i=i||L;if(3!==i.nodeType&&8!==i.nodeType&&!Lt.test(f+z.event.triggered)&&(-1<f.indexOf(".")&&(f=(h=f.split(".")).shift(),h.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[z.expando]?e:new z.Event(f,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:z.makeArray(t,[e]),d=z.event.special[f]||{},n||!d.trigger||!1!==d.trigger.apply(i,t))){if(!n&&!d.noBubble&&!g(i)){for(a=d.delegateType||f,Lt.test(a+f)||(p=p.parentNode);p;p=p.parentNode)u.push(p),o=p;o===(i.ownerDocument||L)&&u.push(o.defaultView||o.parentWindow||w)}for(r=0;(p=u[r++])&&!e.isPropagationStopped();)c=p,e.type=1<r?a:d.bindType||f,(s=(G.get(p,"events")||{})[e.type]&&G.get(p,"handle"))&&s.apply(p,t),(s=l&&p[l])&&s.apply&&U(p)&&(e.result=s.apply(p,t),!1===e.result&&e.preventDefault());return e.type=f,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(u.pop(),t)||!U(i)||l&&m(i[f])&&!g(i)&&((o=i[l])&&(i[l]=null),z.event.triggered=f,e.isPropagationStopped()&&c.addEventListener(f,wt),i[f](),e.isPropagationStopped()&&c.removeEventListener(f,wt),z.event.triggered=void 0,o&&(i[l]=o)),e.result}},simulate:function(e,t,i){e=z.extend(new z.Event,i,{type:e,isSimulated:!0});z.event.trigger(e,null,t)}}),z.fn.extend({trigger:function(e,t){return this.each(function(){z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return z.event.trigger(e,t,i,!0)}}),x.focusin||z.each({focus:"focusin",blur:"focusout"},function(i,n){function r(e){z.event.simulate(n,e.target,z.event.fix(e))}z.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=G.access(e,n);t||e.addEventListener(i,r,!0),G.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=G.access(e,n)-1;t?G.access(e,n,t):(e.removeEventListener(i,r,!0),G.remove(e,n))}}});var zt=w.location,kt=Date.now(),St=/\?/;z.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||z.error("Invalid XML: "+e),t};var Vt=/\[\]$/,Kt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;z.param=function(e,t){function i(e,t){t=m(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,r=[];if(Array.isArray(e)||e.jquery&&!z.isPlainObject(e))z.each(e,function(){i(this.name,this.value)});else for(n in e)!function i(n,e,r,o){if(Array.isArray(e))z.each(e,function(e,t){r||Vt.test(n)?o(n,t):i(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,o)});else if(r||"object"!==p(e))o(n,e);else for(var t in e)i(n+"["+t+"]",e[t],r,o)}(n,e[n],t,i);return r.join("&")},z.fn.extend({serialize:function(){return z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=z.prop(this,"elements");return e?z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!z(this).is(":disabled")&&Tt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!se.test(e))}).map(function(e,t){var i=z(this).val();return null==i?null:Array.isArray(i)?z.map(i,function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}}):{name:t.name,value:i.replace(Kt,"\r\n")}}).get()}});var At=/%20/g,Et=/#.*$/,Mt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Dt=/^\/\//,Ot={},Bt={},Rt="*/".concat("*"),Pt=L.createElement("a");function Ht(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(I)||[];if(m(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Wt(t,n,r,o){var a={},l=t===Bt;function s(e){var i;return a[e]=!0,z.each(t[e]||[],function(e,t){t=t(n,r,o);return"string"!=typeof t||l||a[t]?l?!(i=t):void 0:(n.dataTypes.unshift(t),s(t),!1)}),i}return s(n.dataTypes[0])||!a["*"]&&s("*")}function jt(e,t){var i,n,r=z.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n=n||{})[i]=t[i]);return n&&z.extend(!0,e,n),e}Pt.href=zt.href,z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(zt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,z.ajaxSettings),t):jt(z.ajaxSettings,e)},ajaxPrefilter:Ht(Ot),ajaxTransport:Ht(Bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var s,d,c,i,u,n,f,h,r,p=z.ajaxSetup({},t),g=p.context||p,v=p.context&&(g.nodeType||g.jquery)?z(g):z.event,_=z.Deferred(),x=z.Callbacks("once memory"),m=p.statusCode||{},o={},a={},l="canceled",y={readyState:0,getResponseHeader:function(e){var t;if(f){if(!i)for(i={};t=Nt.exec(c);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return f?c:null},setRequestHeader:function(e,t){return null==f&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==f&&(p.mimeType=e),this},statusCode:function(e){if(e)if(f)y.always(e[y.status]);else for(var t in e)m[t]=[m[t],e[t]];return this},abort:function(e){e=e||l;return s&&s.abort(e),b(0,e),this}};if(_.promise(y),p.url=((e||p.url||zt.href)+"").replace(Dt,zt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(I)||[""],null==p.crossDomain){n=L.createElement("a");try{n.href=p.url,n.href=n.href,p.crossDomain=Pt.protocol+"//"+Pt.host!=n.protocol+"//"+n.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=z.param(p.data,p.traditional)),Wt(Ot,p,t,y),f)return y;for(r in(h=z.event&&p.global)&&0==z.active++&&z.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!It.test(p.type),d=p.url.replace(Et,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(e=p.url.slice(d.length),p.data&&(p.processData||"string"==typeof p.data)&&(d+=(St.test(d)?"&":"?")+p.data,delete p.data),!1===p.cache&&(d=d.replace(Mt,"$1"),e=(St.test(d)?"&":"?")+"_="+kt+++e),p.url=d+e),p.ifModified&&(z.lastModified[d]&&y.setRequestHeader("If-Modified-Since",z.lastModified[d]),z.etag[d]&&y.setRequestHeader("If-None-Match",z.etag[d])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&y.setRequestHeader("Content-Type",p.contentType),y.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Rt+"; q=0.01":""):p.accepts["*"]),p.headers)y.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(!1===p.beforeSend.call(g,y,p)||f))return y.abort();if(l="abort",x.add(p.complete),y.done(p.success),y.fail(p.error),s=Wt(Bt,p,t,y)){if(y.readyState=1,h&&v.trigger("ajaxSend",[y,p]),f)return y;p.async&&0<p.timeout&&(u=w.setTimeout(function(){y.abort("timeout")},p.timeout));try{f=!1,s.send(o,b)}catch(e){if(f)throw e;b(-1,e)}}else b(-1,"No Transport");function b(e,t,i,n){var r,o,a,l=t;f||(f=!0,u&&w.clearTimeout(u),s=void 0,c=n||"",y.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(a=function(e,t,i){for(var n,r,o,a,l=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in l)if(l[r]&&l[r].test(n)){s.unshift(r);break}if(s[0]in i)o=s[0];else{for(r in i){if(!s[0]||e.converters[r+" "+s[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==s[0]&&s.unshift(o),i[o]}(p,y,i)),a=function(e,t,i,n){var r,o,a,l,s,d={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!s&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=o,o=c.shift())if("*"===o)o=s;else if("*"!==s&&s!==o){if(!(a=d[s+" "+o]||d["* "+o]))for(r in d)if(l=r.split(" "),l[1]===o&&(a=d[s+" "+l[0]]||d["* "+l[0]])){!0===a?a=d[r]:!0!==d[r]&&(o=l[0],c.unshift(l[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+s+" to "+o}}}return{state:"success",data:t}}(p,a,y,n),n?(p.ifModified&&((i=y.getResponseHeader("Last-Modified"))&&(z.lastModified[d]=i),(i=y.getResponseHeader("etag"))&&(z.etag[d]=i)),204===e||"HEAD"===p.type?l="nocontent":304===e?l="notmodified":(l=a.state,r=a.data,n=!(o=a.error))):(o=l,!e&&l||(l="error",e<0&&(e=0))),y.status=e,y.statusText=(t||l)+"",n?_.resolveWith(g,[r,l,y]):_.rejectWith(g,[y,l,o]),y.statusCode(m),m=void 0,h&&v.trigger(n?"ajaxSuccess":"ajaxError",[y,p,n?r:o]),x.fireWith(g,[y,l]),h&&(v.trigger("ajaxComplete",[y,p]),--z.active||z.event.trigger("ajaxStop")))}return y},getJSON:function(e,t,i){return z.get(e,t,i,"json")},getScript:function(e,t){return z.get(e,void 0,t,"script")}}),z.each(["get","post"],function(e,r){z[r]=function(e,t,i,n){return m(t)&&(n=n||i,i=t,t=void 0),z.ajax(z.extend({url:e,type:r,dataType:n,data:t,success:i},z.isPlainObject(e)&&e))}}),z._evalUrl=function(e){return z.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},z.fn.extend({wrapAll:function(e){return this[0]&&(m(e)&&(e=e.call(this[0])),e=z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return m(i)?this.each(function(e){z(this).wrapInner(i.call(this,e))}):this.each(function(){var e=z(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=m(t);return this.each(function(e){z(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){z(this).replaceWith(this.childNodes)}),this}}),z.expr.pseudos.hidden=function(e){return!z.expr.pseudos.visible(e)},z.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},z.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Ft=z.ajaxSettings.xhr();x.cors=!!Ft&&"withCredentials"in Ft,x.ajax=Ft=!!Ft,z.ajaxTransport(function(r){var o,a;if(x.cors||Ft&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Xt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),z.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return z.globalEval(e),e}}}),z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),z.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=z("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),L.head.appendChild(n[0])},abort:function(){r&&r()}}});var $t=[],Ut=/(=)\?(?=&|$)|\?\?/;z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||z.expando+"_"+kt++;return this[e]=!0,e}}),z.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+n):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||z.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){o=arguments},i.always(function(){void 0===r?z(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,$t.push(n)),o&&m(r)&&r(o[0]),o=r=void 0}),"script"}),x.createHTMLDocument=((t=L.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),z.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(x.createHTMLDocument?((n=(t=L.implementation.createHTMLDocument("")).createElement("base")).href=L.location.href,t.head.appendChild(n)):t=L),n=!i&&[],(i=K.exec(e))?[t.createElement(i[1])]:(i=ge([e],t,n),n&&n.length&&z(n).remove(),z.merge([],i.childNodes)));var n},z.fn.load=function(e,t,i){var n,r,o,a=this,l=e.indexOf(" ");return-1<l&&(n=xt(e.slice(l)),e=e.slice(0,l)),m(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&z.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?z("<div>").append(z.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){z.fn[t]=function(e){return this.on(t,e)}}),z.expr.pseudos.animated=function(t){return z.grep(z.timers,function(e){return t===e.elem}).length},z.offset={setOffset:function(e,t,i){var n,r,o,a,l=z.css(e,"position"),s=z(e),d={};"static"===l&&(e.style.position="relative"),o=s.offset(),n=z.css(e,"top"),a=z.css(e,"left"),a=("absolute"===l||"fixed"===l)&&-1<(n+a).indexOf("auto")?(r=(l=s.position()).top,l.left):(r=parseFloat(n)||0,parseFloat(a)||0),m(t)&&(t=t.call(e,i,z.extend({},o))),null!=t.top&&(d.top=t.top-o.top+r),null!=t.left&&(d.left=t.left-o.left+a),"using"in t?t.using.call(e,d):s.css(d)}},z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){z.offset.setOffset(this,t,e)});var e,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===z.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===z.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=z(e).offset()).top+=z.css(e,"borderTopWidth",!0),r.left+=z.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-z.css(n,"marginTop",!0),left:t.left-r.left-z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===z.css(e,"position");)e=e.offsetParent;return e||ve})}}),z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;z.fn[t]=function(e){return W(this,function(e,t,i){var n;return g(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i?n?n[r]:e[t]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i)},t,e,arguments.length)}}),z.each(["top","left"],function(e,i){z.cssHooks[i]=Ue(x.pixelPosition,function(e,t){if(t)return t=$e(e,i),He.test(t)?z(e).position()[i]+"px":t})}),z.each({Height:"height",Width:"width"},function(a,l){z.each({padding:"inner"+a,content:l,"":"outer"+a},function(n,o){z.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return W(this,function(e,t,i){var n;return g(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?z.css(e,t,r):z.style(e,t,i,r)},l,i?e:void 0,i)}})}),z.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){z.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),z.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),z.proxy=function(e,t){var i,n;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return i=l.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(l.call(arguments)))}).guid=e.guid=e.guid||z.guid++,n},z.holdReady=function(e){e?z.readyWait++:z.ready(!0)},z.isArray=Array.isArray,z.parseJSON=JSON.parse,z.nodeName=V,z.isFunction=m,z.isWindow=g,z.camelCase=$,z.type=p,z.now=Date.now,z.isNumeric=function(e){var t=z.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return z});var qt=w.jQuery,Gt=w.$;return z.noConflict=function(e){return w.$===z&&(w.$=Gt),e&&w.jQuery===z&&(w.jQuery=qt),z},e||(w.jQuery=w.$=z),z}),define("$",function(e,t){return jQuery.__esModule=!0,jQuery.default=jQuery,jQuery}),define("magix",["$"],function(r){var u=r("$"),o=u.isPlainObject,k=u.isArray,a=0,v=[],S=null,l=window,i=document,y=u(i),s=l.setTimeout,n="changed",b="value";function e(){}function w(e){return"object"==typeof e?e:i.getElementById(e)}function d(e){return!e||"object"!=typeof e}function c(e,t,i,n){var r,o,a,l=0;for(a in e)r=e[a],o=t[a],d(r)&&o===r||B(n,a)||(l=i[a]=1),t[a]=r;return l}function f(e,t,i){if(e=w(e),t=w(t),e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i}var _,h=JSON.stringify,V="\x1e",K="prototype",L="params",z="path",C="mx-view",p=/[#?].*$/,g=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,t=function(e){return(e||"mx_")+a++},m={rootId:t(),error:function(e){throw e}};function T(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])B(t,r)&&(e[r]=t[r]);return e}function A(e,t,i){for(i in t=[],e)B(e,i)&&t.push(i);return t}function E(e){return e.id||(e.$a=1,e.id=t())}function M(e,t){return t.f-e.f||t.t-e.t}var N=m.hasOwnProperty,I=u("head"),D=function(e,t){t&&!D[e]&&(D[e]=1,I.append("<style>"+t))},O=function(e,t,i,n,r){t=t||v,k(e)||(e=[e]),k(t)||(t=[t]);for(var o=0,a=e;o<a.length;o++){r=a[o];try{n=r&&r.apply(i,t)}catch(e){m.error(e)}}return n},B=function(e,t){return e&&N.call(e,t)},R=function(e,t){var i,n;if(d(t))(i=t+"")[0]==V&&B(e,i)&&(t=e[i]);else for(i in t)n=t[i],n=R(e,n),t[i]=n;return t};function P(e,t,i,n){(n=this).c=[],n.b=t||5,n.x=n.b+(e||20),n.r=i}T(P[K],{get:function(e){e=this.c[V+e];return e&&(e.f++,e.t=a++,e=e.v),e},each:function(e,t,i,n,r){for(var o=0,a=(i=this).c;o<a.length;o++)e(a[o].v,t,i)},set:function(e,t){var i=this.c,n=V+e,r=i[n],o=this.b;if(!r){if(i.length>=this.x)for(i.sort(M);o--;)0<(r=i.pop()).f&&this.del(r.o);r={o:e},i.push(r),i[n]=r}r.v=t,r.f=1,r.t=a++},del:function(e){e=V+e;var t=this.c,i=t[e],n=this.r;i&&(i.f=-1,i.v="",delete t[e],n&&O(n,i.o))},has:function(e){return B(this.c,V+e)}});function H(e,o){if(e){var t,a=[];if(l.seajs)seajs.use(e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var r=n[i];a.push(r&&r.__esModule&&r.default||r)}o&&o.apply(void 0,a)});else{k(e)||(e=[e]);for(var i=0,n=e;i<n.length;i++)t=n[i],t=r(t),a.push(t&&t.__esModule&&t.default||t);o&&o.apply(void 0,a)}}else o()}function W(){}function j(e,t){t=e.data,e.eventTarget=t.e,O(t.f,e,t.v)}function X(e,t,i,n,r){r&&(t+="."+r.i),n?u(e).off(t,i):u(e).on(t,r,i)}function F(e,t,i){try{i=decodeURIComponent(i)}catch(e){}G[t]=i}function $(e){var t,i=ee.get(e);return i||(G={},t=e.replace(p,""),e==t&&x.test(t)&&(t=""),e.replace(t,"").replace(g,F),ee.set(e,i={a:t,b:G})),{path:i.a,params:T({},i.b)}}function U(e,t){var i,n={};if(e)for(var r=0,o=e;r<o.length;r++)i=o[r],n[t&&i?i[t]:i]=t?i:1+(0|n[i]);return n}function q(e,t,i){return te.has(e)?i=te.get(e):(i=O(Function("return "+e)),-1<e.indexOf(V)?R(t,i):te.set(e,i)),i}var G,Y=function(e,t,i,n,r){return W[K]=t[K],T(r=new W,i),T(e,n),(r.constructor=e)[K]=r,e},Z=u.find||u.zepto,Q=Z.matchesSelector||Z.matches,J=function(e){return e},ee=new P,te=new P,ie={config:function(e,t){return t=m,e&&(t=o(e)?T(t,e):t[e]),t},boot:function(e){T(m,e),H(m.exts,function(){me().mountView(m.defaultView),de.on(n,ge)})},toMap:U,toTry:O,toUrl:function(e,t,i){var n,r,o,a=[];for(r in t)n=t[r]+"",i&&!n&&!B(i,r)||(n=encodeURIComponent(n),a.push(o=r+"="+n));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},parseUrl:$,mix:T,has:B,keys:A,inside:f,node:w,applyStyle:D,guid:t,use:H,Cache:P,nodeId:E,guard:J},Z={fire:function(e,t,i,n){var r,o,a,l,s=this,d=s[V+e];if((t=t||{}).type=e,d)for(o=(r=d.length)-1;r--;)(l=d[a=n?r:o-r]).f?(l.x=1,O(l.f,t,s),l.x=""):l.x||(d.splice(a,1),o--);return(d=s["on"+e])&&O(d,t,s),i&&s.off(e),s},on:function(e,t){e=V+e;return(this[e]||(this[e]=[])).push({f:t}),this},off:function(e,t){var i,n=V+e,r=this[n];if(t){if(r)for(var o=0,a=r;o<a.length;o++)if((i=a[o]).f==t){i.f="";break}}else delete this[n],delete this["on"+e];return this}};ie.Event=Z;function ne(e){for(var t=0,i=e=(e+"").split(",");t<i.length;t++){var n=i[t];B(ae,n)?ae[n]++:ae[n]=1}return e}function re(e){for(var t,i=0,n=e;i<n.length;i++)t=n[i],B(ae,t)&&(--ae[t]||(delete ae[t],delete oe[t]))}var oe={},ae={},le={},se=0,de=T({get:function(e){e=e?oe[e]:oe;return e},set:function(e,t){return se=c(e,oe,le,t)||se,this},digest:function(e,t){e&&de.set(e,t),se&&(se=0,this.fire(n,{keys:le}),le={})},diff:function(){return le},clean:function(e){return{ctor:function(){e=ne(e),this.on("destroy",function(){return re(e)})}}}},Z);ie.State=de;function ce(e,t,i,n){return n=(n=(n=ve[e])&&n.$v)?n.$d.$a:{},0<t.indexOf(V)&&R(n,i),n}var ue,fe,he=0,pe=function(e,t,i,n,r,o){if(e&&e.$a!=he&&(i=e.$v)&&1<i.$a){(function(e,t,i){var n,e=e.$os;if(e)for(var r=0,o=e;r<o.length&&(n=o[r],!(i=B(t,n)));r++);return i})(i,t)&&i.$b();for(var a=0,l=e.children();a<l.length;a++)o=l[a],pe(ve[o],t)}},ge=function(e,t,i){t=me(),he=a++,pe(t,e.keys)},ve={},_e=function(e){var t;e.$b||e.$d||e.$cc!=e.$rc||(e.$cr||(e.$cr=1,e.$ca=0,e.fire("created")),t=e.id,e=e.pId,(e=ve[e])&&!B(e.$e,t)&&(e.$e[t]=1,e.$rc++,_e(e)))},xe=function(e,t){var i;!e.$ca&&e.$cr&&(e.$cr=0,e.$ca=1,e.fire("alter",t),i=e.id,e=e.pId,(e=ve[e])&&B(e.$e,i)&&(e.$rc--,delete e.$e[i],xe(e,t)))},me=function(e,t){return ue||(_=i.body,w(e=m.rootId)||(_.id=e),ue=new we(e)),ue},ye=function(e,t){B(ve,e)||(ve[e]=t,we.fire("add",{vframe:t}))},be=[];function we(e,t,i){(i=this).id=e,i.$c={},i.$cc=0,i.$rc=0,i.$g=i.$g||1,i.$e={},i.$f=[],i.pId=t,ye(e,i)}T(we,{all:function(){return ve},get:function(e){return ve[e]}},Z),T(we[K],Z,{mountView:function(e,t){var i,n,r,o,a,l=this,s=l.id,d=w(s),c=l.pId;!l.$h&&d&&(l.$h=1,l.$i=d.innerHTML),l.unmountView(),l.$b=0,i=$(e||""),r=i[z],d&&r&&(l[z]=e,o=i[L],ce(c,e,o),l.$j=i[z],T(o,t),n=l.$g,H(r,function(e){if(n==l.$g){if(!e)return m.error(Error("id:"+s+" cannot load:"+r));a=dt(e),r=new e(s,l,o,d,a),l.$v=r,l.$a=he,ot(r),O(r.init,[o,{node:d,deep:!r.tmpl}],r),r.$b(),r.tmpl||(l.$h=0,r.$e||r.endUpdate())}}))},unmountView:function(){var e,t=this,i=t.$v,n=t.id;t.$f=[],i&&(fe||(e=1,fe={id:n}),t.$b=1,t.unmountZone(0,1),xe(t,fe),(t.$v=0)<i.$a&&(i.$a=0,delete Ke[n],delete Ce[n],i.fire("destroy",0,1,1),nt(i,1),ot(i,1),i.owner=0),i.$a--,(n=w(n))&&t.$h&&u(n).html(t.$i),e&&(fe=0)),t.$g++},mountVframe:function(e,t,i){var n,r=this,o=r.id,a=r.$c;return xe(r,{id:e}),(n=ve[e])||(B(a,e)||(r.$n=0,r.$cc++),a[e]=e,(n=be.pop())?we.call(n,e,o):n=new we(e,o)),n.mountView(t,i),n},mountZone:function(e,t){var i,n,r=this,o=[];e=e||r.id;e=u("#"+e+" ["+C+"]");r.$d=1;for(var a=0,l=e;a<l.length;a++)(i=l[a]).$b||(n=E(i),i.$b=1,o.push([n,i.getAttribute(C)]));for(var s,d=0,c=o;d<c.length;d++)n=(s=c[d])[0],i=s[1],r.mountVframe(n,i);r.$d=0,t||_e(r)},unmountVframe:function(e,t){var i,n,r,o,a;e=e?this.$c[e]:this.id,(i=ve[e])&&(a=i.$cr,n=i.pId,i.unmountView(),o=a,(a=ve[r=e])&&(delete ve[r],we.fire("remove",{vframe:a,fcc:o}),(r=w(r))&&(r.$b=0,r.$a=0)),i.id=i.pId=i.$c=i.$e=0,i.$h=0,i.off("alter"),i.off("created"),be.push(i),(i=ve[n])&&B(i.$c,e)&&(delete i.$c[e],i.$n=0,i.$cc--,t||_e(i)))},unmountZone:function(e,t){for(var i in this.$c)(!e||i!=e&&f(i,e))&&this.unmountVframe(i,1);t||_e(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=ve[t.pId];return t},children:function(e){return(e=this).$n||(e.$n=A(e.$c))},invoke:function(e,t){var i,n,r,o=this.$f;return(n=this.$v)&&n.$e?i=(r=n[e])&&O(r,t,n):((n=o[r=V+e])&&(n.r=t===n.a),n={n:e,a:t,k:r},o.push(n),o[r]=n),i}}),ie.Vframe=we;function Le(e){for(var t,i,n,r,o,a,l=e.target,s=e.type,d=[];l!=_;){if((t=function(e,t){var i,n,r,o,a,l,s=[],d=e,c=e.getAttribute("mx-"+t),u=[],f="#",h=0;if(c&&((a=ze.get(c))||(a={v:(a=c.match(ke)||v)[1],n:a[2],i:a[3]},ze.set(c,a)),a=T({},a,{r:c})),a&&!a.v||Ve[t]){if((r=Ce[n=d.$d])&&1==r[d.$e]&&(l=1,f=n),!l){for(u.push(d);d!=_&&(d=d.parentNode);){if(ve[n=d.id]||(r=Ce[n=d.$d])&&1==r[d.$e]){f=n;break}u.push(d)}for(var p=0,g=u;p<g.length;p++)c=g[p],(n=Ce[f])||(n=Ce[f]={}),n[r=c.$e||(c.$e=++Te)]=1,c.$d=f}d=e.id,ve[d]&&(h=f=d);do{if((i=ve[f])&&(l=i.$v)){if(o=(r=l.$so)[t])for(d=o.length;d--;)r={r:n=o[d],v:f,n:n},n?!h&&Q(e,n)&&s.push(r):h&&s.unshift(r);if(l.tmpl&&!h){a&&!a.v&&(a.v=f);break}h=0}}while(i&&(f=i.pId))}return a&&s.push(a),s}(l,s)).length){d=[];for(var c=0,u=t;c<u.length;c++){var f=u[c],h=f.v,p=(f.r,f.n),f=f.i;if(0,o!=h){if(o&&e.isPropagationStopped())break;o=h}(n=(h=ve[h])&&h.$v)?(r=n[p+V+s])&&(e.eventTarget=l,a=f?q(f,n.$d.$a):{},e[L]=a,O(r,e,n)):e.stopPropagation()}}if((i=Ke[r=l.$d])&&(i=i[l.$e])&&i[s]||e.isPropagationStopped()){d.length&&d.push(r);break}o=l.id,ve[o]&&d.push(o),d.push(l),l=l.parentNode||_}if(r=d.length)for(i="#";r--;)(n=d[r]).nodeType?((t=Ke[i])||(t=Ke[i]={}),(a=t[o=n.$e||(n.$e=++Te)])||(a=t[o]={}),a[s]=1):i=n}var ze=new P(30,10),ke=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Se={},Ve={},Ke={},Ce={},Te=0,Ae="http://www.w3.org/2000/svg",Ee="http://www.w3.org/1998/Math/MathML",Me={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+Ae+'">'],m:[1,'<math xmlns="'+Ee+'">'],_:[0,""]},Ne=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;Me.optgroup=Me.option,Me.tbody=Me.tfoot=Me.colgroup=Me.caption=Me.thead,Me.th=Me.td;var Ie=i.implementation.createHTMLDocument(""),J=Ie.createElement("base");J.href=i.location.href,Ie.head.appendChild(J);function De(e,t){t=E(t),e.$c[t]?e.unmountVframe(t,1):e.unmountZone(t,1)}function Oe(e,t){return 1==e.nodeType&&(e.$f?t=e.$g:(t=(t=(t=e.$a?"":e.id)||e.getAttribute("mxs"))||(t=e.getAttribute(C))&&$(t)[z],e.$f=1,e.$g=t)),t}function Be(e,t,i,n,r){for(var o,a,l,s,d,c=e.lastChild,u=t.firstChild,f=0,h={},p={};c;)f++,(l=Oe(c))&&(l=h[l]||(h[l]=[])).push(c),c=c.previousSibling;for(;u;)(l=Oe(u))&&(p[l]=(p[l]||0)+1),u=u.nextSibling;for(u=t.firstChild,c=e.firstChild;u;)if(f--,u=(o=u).nextSibling,s=(s=h[l=Oe(o)])&&s.pop()){for(;s!=c;)d=c.nextSibling,e.appendChild(c),c=d;c=s.nextSibling,p[l]&&p[l]--,Ue(s,o,e,i,n,r)}else c?(l=Oe(a=c))&&h[l]&&p[l]?(f++,i.c=1,i.n.push([8,e,o,a])):(c=c.nextSibling,Ue(a,o,e,i,n,r)):(i.c=1,i.n.push([1,e,o]));for(a=e.lastChild;0<f--;)De(n,a),i.n.push([2,e,a]),a=a.previousSibling,i.c=1}function Re(e){return""+(null==e?"":e)}function Pe(e){return"&"+qe[e]+";"}function He(e){return Re(e).replace(Ge,Pe)}function We(e,t,i,n){for(n=e[V];--n;)if(e[i=V+n]===t)return i;return e[i=V+e[V]++]=t,i}function je(e){return Ye[e]}function Xe(e){return encodeURIComponent(Re(e)).replace(Ze,je)}function Fe(e){return Re(e).replace(Qe,"\\$&")}var $e={INPUT:[b,"checked"],TEXTAREA:[b],OPTION:["selected"]},Ue=function(e,t,i,n,r,o){if(function(e,t){var i,n=e.nodeName,n=$e[n],r=0;if(n)for(var o=0,a=n;o<a.length;o++)e[i=a[o]]!=t[i]&&(r=1,e[i]=t[i]);return r}(e,t)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(t))if(e.nodeName===t.nodeName)if(1===e.nodeType){var a=t.getAttribute("mxs");if(!a||a!=e.getAttribute("mxs")){var l=t.getAttribute(C),s=t.innerHTML,d=t.getAttribute("mxa"),c=!d||d!=e.getAttribute("mxa"),u=void 0,f=void 0,h=ve[e.id],p=void 0,g=void 0,v=l&&$(l),a=void 0,_=void 0;if(l&&h&&(!t.id||t.id==e.id)&&h.$j==v[z]&&(g=h.$v)){if(d=s!=h.$i,_=l!=h[z],p=e.getAttribute("mxv"),!d&&!_&&p)for(var x=0,m=a=p.split(",");x<m.length;x++)if("#"==(p=m[x])||B(o,p)){_=1;break}(_||d)&&(u=(p=g.$e&&g.$f)?(a=v[L],ce(h.pId,l,a),h.$i=s,h[z]=l,v={node:t,deep:!g.tmpl,attr:c,inner:d,query:_,keys:o},O(p,[a,v],g)&&n.v.push(g),v.deep):f=1)}else u=1,f=h;f&&(n.c=1,h.unmountVframe(0,1)),c&&function(e,t,i,n){var r,o,a;delete e.$f;for(var l=e.attributes,s=t.attributes,d=l.length;d--;)r=l[d].name,t.hasAttribute(r)||("id"==r?n||i.d.push([e,""]):(i.c=1,e.removeAttribute(r)));for(d=s.length;d--;)o=(r=s[d]).name,a=r[b],e.getAttribute(o)!=a&&("id"==o?i.d.push([e,a]):(i.c=1,e.setAttribute(o,a)))}(e,t,n,h&&l),u&&Be(e,t,n,r,o)}}else e.nodeValue!==t.nodeValue&&(n.c=1,e.nodeValue=t.nodeValue);else De(r,e),n.c=1,n.n.push([4,i,t,e])},qe={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Ge=/[&<>"'\`]/g,Ye={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ze=/[!')(*]/g,Qe=/[\\'"]/g,Je=function(t,i){function e(e){i.i<i.length?Je(t,i):(c=i.slice(),i.i=i.length=0,e&&d.fire("domready"),O(c))}var n,r,o=t.$k,a=t.$c,l=t.$b,s=ve[l],d=s&&s.$v,c={d:[],v:[],n:[]},u=w(l),f=t.$d,h=t.$a;if(i.i=i.length,t.$c=0,t.$k={},a&&d&&0<d.$a&&(n=d.tmpl)&&d.$d==t){d.fire("dompatch"),delete Ke[l],delete Ce[l],r=function(e,t){var i=Ie.createElement("div"),t=t.namespaceURI,t=t==Ae?"g":t==Ee?"m":(Ne.exec(e)||[0,""])[1],t=Me[t]||Me._;i.innerHTML=t[1]+e;for(var n=t[0];n--;)i=i.lastChild;return i}(n(f,l,h,He,Re,Xe,We,Fe),u),Be(u,r,c,s,o);for(var p=0,g=c.d;p<g.length;p++)(r=g[p])[0].id=r[1];for(var v=0,_=c.n;v<_.length;v++)1==(r=_[v])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);s.$d=n=c.c||!d.$e;for(var x=0,m=c.v;x<m.length;x++)(r=m[x]).$b();n&&d.endUpdate(l),c.c&&y.trigger({type:"htmlchanged",vId:l}),e(1)}else e()};function et(e){var t=this;t.$b=e,t.$c=1,t.$d={vId:e},t.$a=((e={})[V]=1,e),t.$e=[],t.$k={}}T(et[K],{get:function(e,t){return t=this.$d,e&&(t=t[e]),t},set:function(e,t){var i=this;return i.$c=c(e,i.$d,i.$k,t)||i.$c,i},digest:function(e,t,i){e=this.set(e,t),t=e.$e;i&&t.push(i),t.i||Je(e,t)},snapshot:function(){return this.$f=h(this.$d),this},altered:function(){if(this.$f)return this.$f!=h(this.$d)},translate:function(e){return R(this.$d,e)},parse:function(e){return q(e,this.$a)}});function tt(e,t,i){return e.a?i=e:((i=function(e){O(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i}var it=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,nt=function(e,t){var i,n,r=e.$r;for(i in r)n=r[i],(t||n.x)&&rt(r,i,1)},rt=function(e,t,i,n){var r,o=e[t];return o&&o!=n&&((o=(r=o.e).destroy)&&i&&O(o,v,r),delete e[t]),r},ot=function(e,t){var i,n,r,o,a,l,s=e.$eo,d=e.$so,c=e.$el,u=e.id;for(i in s)r=d[n=i],o=t,l=a=void 0,a=0|Se[n],l=o?-1:1,a&&o!==a||X(_,n,Le,o),Se[n]=a+l,r&&(Ve[n]=(0|Ve[n])+l);for(var f=0,h=c;f<h.length;f++)i=h[f],X(i.e,i.n,j,t,{i:u,v:e,f:i.f,m:i.m,e:i.e})},at={win:l,doc:i},lt=function(e,t,i){for(var n,r,o,a,l={},s=0,d=e;s<d.length;s++)for(n in r=d[s])o=r[n],a=l[n],"ctor"!=n?(it.test(n)&&(a?o=tt(a,o):o.b=1),l[n]=o):i.push(o);for(n in l)B(t,n)||(t[n]=l[n])};function st(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this._||(this._=[]);return lt(e,this[K],i),this}var dt=function(e){if(!e[V]){e[V]=[];var t,i,n,r=e[K],o=void 0,a=void 0,l={},s=[],d={},c=void 0,u=void 0,f=void 0,h=void 0,p=void 0,g=void 0;for(u in(o=r.mixins)&&lt(o,r,e[V]),r)if(t=r[u],o=u.match(it)){if(n=o[1],i=o[2],a=o[3],p={},g=o[4])for(var v=0,_=g=g.split(",");v<_.length;v++)p[f=_[v]]=!0;for(var x=0,m=a=a.split(",");x<m.length;x++){if(f=m[x],c=at[i],h=1,n){if(c){s.push({f:t,e:c,n:f,m:p});continue}h=2,(c=(c=d[f])||(d[f]=[]))[i]||(c[i]=1,c.push(i))}l[f]=l[f]|h,(c=r[f=i+V+f])?c.b&&(t.b?r[f]=tt(t,c):B(r,u)&&(r[f]=t)):r[f]=t}}w="$b",L=(y=r)[b="render"],y[b]=y[w]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<(z=this).$a&&(z.$a++,z.fire("rendercall"),nt(z),O(L,e,z))},r.$eo=l,r.$el=s,r.$so=d,r.$f=r.assign}var y,b,w,L,z;return e[V]};function ct(e,t,i,n,r){(r=this).owner=t,r.id=e,r.$r={},r.$a=1,r.updater=r.$d=new et(r.id),(e=ct._)&&O(e,[i,{node:n,deep:!r.tmpl}],r)}T(ct,{merge:st,extend:function e(t,i){var d=this,n=(t=t||{}).ctor,c=[];function u(e,t,i,n,r,o,a,l,s){d.call(a=this,e,t,i,n,r),o=u._,l=[i,{node:n,deep:!a.tmpl}],o&&O(o,l,a),(s=c.concat(r)).length&&O(s,l,a)}return n&&c.push(n),u.merge=st,u.extend=e,Y(u,d,t,i)}}),T(ct[K],Z,{init:e,beginUpdate:function(e,t){0<(t=this).$a&&t.$e&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,i,n,r){0<(i=this).$a&&(e=e||i.id,t?r=t:(r=i.$e,i.$e=1),(n=i.owner).mountZone(e,t),r||s(i.wrapAsync(function(){!function(e,t,i){for(t=e.$f;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]}(n)}),0))},wrapAsync:function(i,n){var r=this,o=r.$a;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0<o&&o==r.$a)return i.apply(n||r,e)}},observeState:function(e){this.$os=(e+"").split(",")},capture:function(e,t,i,n){return n=this.$r,t?(rt(n,e,1,t),n[e]={e:t,x:i}):t=(n=n[e])&&n.e,t},release:function(e,t){return rt(this.$r,e,t)},render:e}),ie.View=ct;var ut=u.type,ft=Date.now;function ht(){this.id=t("b"),this.$={}}T(ht[K],{get:function(e,t){var i=this.$;if(e){for(var n=k(e)?e.slice():(e+"").split("."),r=void 0;(r=n.shift())&&i;)i=i[r];r&&(i=void 0)}return void 0!==t&&ut(t)!=ut(i)&&(i=t),i},set:function(e,t){var i;o(e)||((i={})[e]=t,e=i),T(this.$,e)}});function pt(e,t,i){(i=this[e])&&(delete this[e],O(i,t,i.e))}var gt=function(e,t,i,n,r){if(e.$d)return e;if(e.$e)return e.enqueue(gt.bind(e,e,t,i,n,r));e.$e=1,k(t)||(t=[t]);for(var l,s,d,c,u,f,h,p,g,o=e.constructor,a=0,v=o.$f,_=(l=i,s=o,d=e,c=t.length,u=n,f=o.$c,h=[],p=S,function(e,t){g++;var i,n,r=this,o=r.$b,a=o.k;h[e+1]=r,t?(p=t,i=1):f.has(a)||(a&&f.set(a,r),o.t=ft(),(n=o.a)&&O(n,r,r),(n=o.x)&&s.clear(n),i=1),d.$d||((n=g==c)&&(d.$e=0,2==u&&(h[0]=p,O(l,h,d))),1==u&&O(l,[t||S,r,n,e],d)),i&&s.fire("end",{bag:r,error:t})}),x=g=0,m=t;x<m.length;x++){var y,b,w,L,z=m[x];z&&(w=(b=(y=o.get(z,r)).e).$b.k,L=_.bind(b,a++),z=void 0,w&&v[w]?v[w].push(L):y.u?(w&&((z=[L]).e=b,v[w]=z,L=pt.bind(v,w)),o.$s(b,L)):L())}return e};function vt(){var e=this;e.id=t("s"),e.$g=[]}T(vt[K],{all:function(e,t){return gt(this,e,t,2)},save:function(e,t){return gt(this,e,t,2,1)},one:function(e,t){return gt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i,n=this;n.$e||n.$d||(n.$e=1,s(function(){n.$e=0,n.$d||(i=n.$g.shift())&&O(i,n.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});function _t(e,t,i){return[h(t),h(e)].join(V)}function xt(e,t,i,n){(n=e&&e.$b)&&t[n.n]&&i.del(n.k)}var mt=T({add:function(e){var t=this.$b;k(e)||(e=[e]);for(var i,n,r,o=0,a=e;o<a.length;o++)(r=a[o])&&(i=r.name,n=r.cache,r.cache=0|n,t[i]=r)},create:function(e){var t=this.meta(e),i=0|e.cache||t.cache,n=new ht;n.set(t),n.$b={n:t.name,a:t.after,x:t.cleans,k:i&&_t(t,e)},o(e)&&n.set(e);t=t.before;return t&&O(t,n,n),this.fire("begin",{bag:n}),n},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var i,n;return t||(i=this.cached(e)),i||(i=this.create(e),n=1),{e:i,u:n}},clear:function(e){this.$c.each(xt,U((e+"").split(",")))},cached:function(e){var t,i,n=this.$c,r=this.meta(e),o=0|e.cache||r.cache;return o&&(i=_t(r,e)),i&&((e=this.$f[i])?t=e.e:(t=n.get(i))&&ft()-t.$b.t>o&&(n.del(i),t=0)),t}},Z);return vt.extend=function(e,t,i){function n(){vt.call(this)}return n.$s=e,n.$c=new P(t,i),n.$f={},n.$b={},Y(n,vt,S,mt)},ie.Service=vt,ie.default=ie});var Designer={init:function(o){var e=document.getElementById("boot").src.replace("/editor.js","");seajs.config({paths:{element:e+"/element",editor:e+"/editor",gallery:e+"/gallery",util:e+"/util",i18n:e+"/i18n"}}),seajs.use(["magix","i18n/index"],function(e,t){var i=window.localStorage,n="zh-cn";i&&(n=i.getItem("l.lang")||n),e.config({lang:n}),e.config(o);var r=t.default;e.applyStyle("xzKVLdv_",'body,dd,dl,form,h4,input,ol,p,pre,tbody,td,textarea,tfoot,th,thead,ul{margin:0;padding:0}ol,ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.8}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h4{font-weight:400;font-size:18px}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word;overflow:auto}table{border-collapse:collapse;border-spacing:0}th{text-align:left}td,th{border:1px solid #ddd;padding:8px 10px}th{font-weight:inherit;border-bottom-width:2px;border-bottom-color:#ccc}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#06f;text-decoration:none}a:focus,a:hover{color:#0e63e2}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:xzKVLdva;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.xzKVLdv_{font-family:xzKVLdva;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.xzKVLdva{margin-top:5px}.xzKVLdvb{margin-top:30px}.xzKVLdvc{margin-right:5px}.xzKVLdvd{margin-right:10px}.xzKVLdve{margin-right:20px}.xzKVLdvf{margin-right:30px}.xzKVLdvg{margin-left:5px}.xzKVLdvh{margin-left:10px}.xzKVLdvi{padding-top:10px}.xzKVLdvj{padding-right:5px}.xzKVLdvk{padding-left:5px}.xzKVLdvl{padding-left:10px}.xzKVLdvm{width:100%}.xzKVLdvn{height:100%}.xzKVLdvo{text-align:center}.xzKVLdvp{float:left}.xzKVLdvq{float:right}html .xzKVLdvr{display:inline-block}.xzKVLdvs{cursor:pointer}.xzKVLdvt{position:absolute}.xzKVLdvu{position:relative}html .xzKVLdvv{display:none}.xzKVLdvw:after,.xzKVLdvw:before{content:" ";display:table}.xzKVLdvw:after{clear:both}.xzKVLdvx{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xzKVLdvy{white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.xzKVLdvz{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;white-space:nowrap;padding:5.5px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xzKVLdvz:focus,.xzKVLdvz:hover{background-color:#a0a0a0;color:#333}.xzKVLdvA{background-color:#06f;color:#fff}.xzKVLdvA:focus,.xzKVLdvA:hover{background-color:#0e63e2;color:#fff}.xzKVLdvz[disabled]{background-color:#fbfbfb}.xzKVLdvz[disabled]:hover{border-color:#e6e6e6}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:#a0a0a0}::selection{background-color:#a0a0a0}.xzKVLdvB,.xzKVLdvC{caret-color:#06f;display:inline-block;height:25px;padding:3px 4px;border-radius:4px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none}.xzKVLdvB:hover,.xzKVLdvC:hover{border-color:#ccc}.xzKVLdvB:focus,.xzKVLdvC:focus,.xzKVLdvD,.xzKVLdvD:hover{border-color:#06f!important}.xzKVLdvC{height:auto}.xzKVLdvB[disabled],.xzKVLdvC[disabled]{background-color:#fbfbfb}.xzKVLdvB[disabled]:hover,.xzKVLdvC[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}.xzKVLdvE{width:32px;height:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;vertical-align:middle;border-radius:8px;background-color:#ccc;margin-right:8px;cursor:pointer;position:relative;transition:all .25s}.xzKVLdvE:after{content:"";display:block;position:absolute;height:12px;width:12px;background:#fff;margin:2px;transition:all .25s;border-radius:50%;left:0}.xzKVLdvE:disabled,.xzKVLdvE:disabled:checked{background-color:#d8d8d8}.xzKVLdvE:checked:after{margin-left:-15px;left:100%}.xzKVLdvE:checked{background-color:#06f}.xzKVLdvF{margin-bottom:8px}.xzKVLdvG{height:25px;line-height:25px;text-align:right;width:98px;vertical-align:top;white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.xzKVLdvH{display:inline-block;position:relative;min-height:25px;line-height:25px}.xzKVLdvI{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.xzKVLdvI:after,.xzKVLdvI:before{content:""}.xzKVLdvI:after,.xzKVLdvI:before,.xzKVLdvJ{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:xzKVLdv_ 1s ease-in-out infinite both;animation:xzKVLdv_ 1s ease-in-out infinite both}.xzKVLdvI:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.xzKVLdvJ{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes xzKVLdv_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes xzKVLdv_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.xzKVLdvK{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143}.xzKVLdvL{padding:18px 25px}.xzKVLdvM{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6}#app,body,html{height:100%;overflow:hidden}@font-face{font-family:xzKVLdvb;src:url(//at.alicdn.com/t/font_550514_i9xewk87fqd.eot);src:url(//at.alicdn.com/t/font_550514_i9xewk87fqd.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.woff) format("woff"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.ttf) format("truetype"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.svg#iconfont) format("svg")}.xzKVLdvN{font-family:xzKVLdvb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.xzKVLdvO{width:140px;text-align:left;height:25px;line-height:20px;padding:3px 4px}'),e.View.merge({ctor:function(){this.updater.set({i18n:r})}}),document.title=r("_ek"),e.State.on("__s",function(e){document.title=r("_ek"),i&&i.setItem("l.lang",e.lang)}),e.boot({defaultPath:"/index",defaultView:"editor/index",rootId:"app",error:function(e){setTimeout(function(){throw e},0)}})})}};define("gallery/mx-dialog/alert",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../i18n/index");i.exports=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.title,c=e.body,e=e.i18n;return s+='<div mxa="xzKVLdvy:_" class="xzKVLdvK"><h4>'+n(d)+'</h4></div><div mxa="xzKVLdvy:a" class="xzKVLdvL" style="word-break:break-all;">'+n(c)+'</div><div mxa="xzKVLdvy:b" class="xzKVLdvM xzKVLdvw"><button mxa="xzKVLdvy:c" mx-click="'+t+'\x1e__T();" class="xzKVLdvz xzKVLdvA xzKVLdvq" type="button">'+n(e("_gf"))+"</button></div>"},init:function(e){this.__ga=e.dialog,this.__gb=e.body,this.__gc=e.title||r.default("__gd"),this.__ge=e.enterCallback},render:function(){this.updater.digest({body:this.__gb,title:this.__gc})},"__T<click>":function(){this.__ga.close(),this.__ge&&n.toTry(this.__ge)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../i18n/index");i.exports=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.title,c=e.body,e=e.i18n;return s+='<div mxa="xzKVLdvz:_" class="xzKVLdvK"><h4>'+n(d)+'</h4></div><div mxa="xzKVLdvz:a" class="xzKVLdvL" style="word-break:break-all;">'+n(c)+'</div><div mxa="xzKVLdvz:b" class="xzKVLdvM xzKVLdvw"><button mxa="xzKVLdvz:c" type="button" mx-click="'+t+'\x1e__U()" class="xzKVLdvz xzKVLdvq">'+n(e("_W"))+'</button><button mxa="xzKVLdvz:d" type="button" mx-click="'+t+'\x1e__T()" class="xzKVLdvz xzKVLdvA xzKVLdvd xzKVLdvq">'+n(e("_gf"))+"</button></div>"},init:function(e){var t=this;t.__ga=e.dialog,t.__gb=e.body,t.__gc=e.title||r.default("__gd"),t.__ge=e.enterCallback,t.__gg=e.cancelCallback},render:function(){this.updater.digest({body:this.__gb,title:this.__gc})},"__T<click>":function(){this.__ga.close(),this.__ge&&n.toTry(this.__ge)},"__U<click>":function(){this.__ga.close(),this.__gg&&n.toTry(this.__gg)}})}),define("gallery/mx-dialog/index",["magix","$","./alert","./confirm"],function(e,t,i){var s=e("magix");e("./alert"),e("./confirm"),s.applyStyle("xzKVLdvp",".xzKVLdvcd{position:absolute}.xzKVLdvce{position:relative;background-color:#fff;border-radius:4px;border:1px solid #e6e6e6}.xzKVLdvcf{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.xzKVLdvcf:focus,.xzKVLdvcf:hover{opacity:.5}.xzKVLdvcg{font-size:22px;font-weight:400}.xzKVLdvch{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2;display:none}.xzKVLdvci{filter:blur(3px)}.xzKVLdvcj{-webkit-animation:xzKVLdvc .3s;animation:xzKVLdvc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.xzKVLdvck{position:absolute;right:10px;top:0;width:1px;height:0}.xzKVLdvcl{padding:80px 0}@-webkit-keyframes xzKVLdvc{0%{opacity:0}to{opacity:.2}}@keyframes xzKVLdvc{0%{opacity:0}to{opacity:.2}}.xzKVLdvcm{-webkit-animation:xzKVLdvd .2s;animation:xzKVLdvd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes xzKVLdvd{0%{opacity:.2}to{opacity:0}}@keyframes xzKVLdvd{0%{opacity:.2}to{opacity:0}}.xzKVLdvcn{margin-bottom:50px;min-height:60px}.xzKVLdvco{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.xzKVLdvcp{-webkit-animation:xzKVLdve .3s;animation:xzKVLdve .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes xzKVLdve{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes xzKVLdve{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.xzKVLdvcq{-webkit-animation:xzKVLdvf .2s;animation:xzKVLdvf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes xzKVLdvf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes xzKVLdvf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");var l=e("$"),d=l(window),n=500,r=[];i.exports=s.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.zIndex,c=e.viewId,u=e.left,f=e.top,h=e.width,e=e.closable;return s+='<div class="xzKVLdvch xzKVLdvcj" style="display:block;z-index:'+n(d-1)+'" id="mask_'+n(c)+'"></div><div mxv class="xzKVLdvco" style="z-index:'+n(d)+';"><div mxv class="xzKVLdvcd xzKVLdvcp" data-spm-protocol="i" id="body_'+n(c)+'" style="left:'+n(u)+"px;top:"+n(f)+"px;width:"+n(h)+'px;"><input id="focus_'+n(c)+'" class="xzKVLdvck"/><span class="xzKVLdv_ xzKVLdvcg xzKVLdvcf '+n(e?"":"xzKVLdvv")+'" mx-click="'+t+'\x1e__gi()">&#xe67f;</span><div class="xzKVLdvce xzKVLdvcn" id="cnt_'+n(c)+'"><div mxs="xzKVLdvA:_" class="xzKVLdvI xzKVLdvcl"><span class="xzKVLdvJ"></span></div></div></div></div>'},init:function(e){var t=this,i=l("#app");t.on("destroy",function(){!function(e){for(var t=r.length-1;0<=t;t--)if(r[t].id==e.id){r.splice(t,1);break}}(t),500==(n-=2)&&i.removeClass("xzKVLdvci"),l("#"+t.id).trigger("close").remove()}),s.has(e,"closable")||(e.closable=!0),t.updater.set(e),500==n&&i.addClass("xzKVLdvci"),n+=2,r.push(t)},render:function(){var e=this,t=e.updater,i=t.get();t.set({zIndex:n,viewId:e.id}).digest(),l("#"+e.id).show(),l("#focus_"+e.id).focus(),e.owner.mountVframe("cnt_"+e.id,i.view,i),setTimeout(e.wrapAsync(function(){l("#body_"+e.id).removeClass("xzKVLdvcp"),l("#mask_"+e.id).removeClass("xzKVLdvcj")}),300)},__gh:function(e){s.Vframe.get("cnt_"+this.id).invoke("fire",["unload",e])},"__gi<click>":function(){l("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(e){27!=e.keyCode||(e=r[r.length-1])==this&&e.updater.get("closable")&&l("#"+e.id).trigger("dlg_close")}},{__gj:function(i,e){var n=s.guid("dlg_");l(document.body).append('<div id="'+n+'" style="display:none" />');var r,o=i.owner.mountVframe(n,"gallery/mx-dialog/index",e),a=l("#"+n);return a.on("dlg_close",function(){var e,t;a.data("closing")||r||(e=function(){a.data("closing",1),l("#body_"+n).addClass("xzKVLdvcq"),l("#mask_"+n).addClass("xzKVLdvcm"),setTimeout(function(){i.owner&&i.owner.unmountVframe(n)},200)},t={prevent:function(){r=1},resolve:function(){t.p=1,r=0,e()},reject:function(){t.p=1,r=0}},o.invoke("__gh",[t]),r||t.p||e())})},alert:function(e,t,i){this.confirm(e,t,null,i,"alert")},confirm:function(e,t,i,n,r){this.mxDialog("gallery/mx-dialog/"+(r||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:n,modal:!0,width:370,closable:!1,left:(d.width()-370)/2,top:Math.max((d.height()-220)/2,0)})},mxDialog:function(i,n){var r,o,a=this,l={view:i};return s.use(i,a.wrapAsync(function(e){var t="$dlg_"+i;a[t]||(a[t]=1,s.mix(l,e.dialogOptions),s.mix(l,n),l.width||(l.width=500),l.left||(l.left=(d.width()-l.width)/2),l.top||(l.top=100),l.dialog={close:function(){r&&r.trigger("dlg_close")}},(r=a.__gj(a,l)).on("close",function(){delete a[t],o&&o()}))})),{close:function(){r&&r.trigger("dlg_close")},whenClose:function(e){o=e}}}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";var e=navigator.userAgent,t=navigator.platform,f=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),r=/Edge\/(\d+)/.exec(e),_=i||n||r,x=_&&(i?document.documentMode||6:+(r||n)[1]),h=!r&&/WebKit\//.test(e),n=h&&/Qt\/\d+\.\d+/.test(e),o=!r&&/Chrome\//.test(e),p=/Opera\//.test(e),s=/Apple Computer/.test(navigator.vendor),a=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),d=/PhantomJS/.test(e),l=!r&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),c=/Android/.test(e),u=l||c||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),g=l||/Mac/.test(t),v=/\bCrOS\b/.test(e),m=/win/i.test(t),e=p&&e.match(/Version\/(\d*\.\d*)/);(e=e&&Number(e[1]))&&15<=e&&(h=!(p=!1));var y=g&&(n||p&&(null==e||e<12.11)),b=f||_&&9<=x;function w(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var L,z=function(e,t){var i=e.className,n=w(t).exec(i);n&&(t=i.slice(n.index+n[0].length),e.className=i.slice(0,n.index)+(t?n[1]+t:""))};function k(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function S(e,t){return k(e).appendChild(t)}function V(e,t,i,n){var r=document.createElement(e);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function K(e,t,i,n){n=V(e,t,i,n);return n.setAttribute("role","presentation"),n}function C(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function T(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function A(e,t){var i=e.className;w(t).test(i)||(e.className+=(i?" ":"")+t)}function E(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!w(i[n]).test(t)&&(t+=" "+i[n]);return t}L=document.createRange?function(e,t,i,n){var r=document.createRange();return r.setEnd(n||e,i),r.setStart(e,t),r}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n};var M=function(e){e.select()};function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,i){for(var n in t=t||{},e)!e.hasOwnProperty(n)||!1===i&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function D(e,t,i,n,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,a=r||0;;){var l=e.indexOf("\t",o);if(l<0||t<=l)return a+(t-o);a+=l-o,a+=i-a%i,o=l+1}}l?M=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:_&&(M=function(e){try{e.select()}catch(e){}});var O=function(){this.id=null};function B(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}O.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var R=30,P={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},W={origin:"*mouse"},j={origin:"+move"};function X(e,t,i){for(var n=0,r=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var a=o-n;if(o==e.length||t<=r+a)return n+Math.min(a,t-r);if(r+=o-n,n=o+1,t<=(r+=i-r%i))return n}}var F=[""];function $(e){for(;F.length<=e;)F.push(U(F)+" ");return F[e]}function U(e){return e[e.length-1]}function q(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function G(){}function Y(e,t){e=Object.create?Object.create(e):(G.prototype=e,new G);return t&&I(t,e),e}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||"\x80"<e&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function J(e,t){return t?!!(-1<t.source.indexOf("\\w")&&Q(e))||t.test(e):Q(e)}function ee(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var te=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return 768<=e.charCodeAt(0)&&te.test(e)}function ne(e,t,i){for(;(i<0?0<t:t<e.length)&&ie(e.charAt(t));)t+=i;return t}function re(e,t,i){for(var n=i<t?-1:1;;){if(t==i)return t;var r=(t+i)/2,r=n<0?Math.ceil(r):Math.floor(r);if(r==t)return e(r)?t:i;e(r)?i=r:t=r+n}}function oe(e,t,i){var n=this;this.input=i,n.scrollbarFiller=V("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=V("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=K("div",null,"CodeMirror-code"),n.selectionDiv=V("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=V("div",null,"CodeMirror-cursors"),n.measure=V("div",null,"CodeMirror-measure"),n.lineMeasure=V("div",null,"CodeMirror-measure"),n.lineSpace=K("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var r=K("div",[n.lineSpace],"CodeMirror-lines");n.mover=V("div",[r],null,"position: relative"),n.sizer=V("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=V("div",null,null,"position: absolute; height: "+R+"px; width: 1px;"),n.gutters=V("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=V("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=V("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),_&&x<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),h||f&&u||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function ae(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var r=i.children[n],o=r.chunkSize();if(t<o){i=r;break}t-=o}return i.lines[t]}function le(e,t,i){var n=[],r=t.line;return e.iter(t.line,i.line+1,function(e){e=e.text;r==i.line&&(e=e.slice(0,i.ch)),r==t.line&&(e=e.slice(t.ch)),n.push(e),++r}),n}function se(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function de(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function ce(e){if(null==e.parent)return null;for(var t=e.parent,i=B(t.lines,e),n=t.parent;n;n=(t=n).parent)for(var r=0;n.children[r]!=t;++r)i+=n.children[r].chunkSize();return i+t.first}function ue(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var r=e.children[n],o=r.height;if(t<o){e=r;continue e}t-=o,i+=r.chunkSize()}return i}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return i+a}function fe(e,t){return t>=e.first&&t<e.first+e.size}function he(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function pe(e,t,i){if(void 0===i&&(i=null),!(this instanceof pe))return new pe(e,t,i);this.line=e,this.ch=t,this.sticky=i}function ge(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==ge(e,t)}function _e(e){return pe(e.line,e.ch)}function xe(e,t){return ge(e,t)<0?t:e}function me(e,t){return ge(e,t)<0?e:t}function ye(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function be(e,t){if(t.line<e.first)return pe(e.first,0);var i=e.first+e.size-1;return t.line>i?pe(i,ae(e,i).text.length):(e=ae(e,(i=t).line).text.length,null==(t=i.ch)||e<t?pe(i.line,e):t<0?pe(i.line,0):i)}function we(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=be(e,t[n]);return i}var Le=!1,ze=!1;function ke(e,t,i){this.marker=e,this.from=t,this.to=i}function Se(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Ve(e,t){if(t.full)return null;var i=fe(e,t.from.line)&&ae(e,t.from.line).markedSpans,n=fe(e,t.to.line)&&ae(e,t.to.line).markedSpans;if(!i&&!n)return null;var r=t.from.ch,o=t.to.ch,e=0==ge(t.from,t.to),a=function(e,t,i){var n;if(e)for(var r=0;r<e.length;++r){var o,a=e[r],l=a.marker;!(null==a.from||(l.inclusiveLeft?a.from<=t:a.from<t))&&(a.from!=t||"bookmark"!=l.type||i&&a.marker.insertLeft)||(o=null==a.to||(l.inclusiveRight?a.to>=t:a.to>t),(n=n||[]).push(new ke(l,a.from,o?null:a.to)))}return n}(i,r,e),l=function(e,t,i){var n;if(e)for(var r=0;r<e.length;++r){var o,a=e[r],l=a.marker;!(null==a.to||(l.inclusiveRight?a.to>=t:a.to>t))&&(a.from!=t||"bookmark"!=l.type||i&&!a.marker.insertLeft)||(o=null==a.from||(l.inclusiveLeft?a.from<=t:a.from<t),(n=n||[]).push(new ke(l,o?null:a.from-t,null==a.to?null:a.to-t)))}return n}(n,o,e),s=1==t.text.length,d=U(t.text).length+(s?r:0);if(a)for(var c=0;c<a.length;++c){var u,f=a[c];null==f.to&&((u=Se(l,f.marker))?s&&(f.to=null==u.to?null:u.to+d):f.to=r)}if(l)for(var h=0;h<l.length;++h){var p=l[h];null!=p.to&&(p.to+=d),null==p.from?Se(a,p.marker)||(p.from=d,s&&(a=a||[]).push(p)):(p.from+=d,s&&(a=a||[]).push(p))}a=a&&Ke(a),l&&l!=a&&(l=Ke(l));var g=[a];if(!s){var v,_=t.text.length-2;if(0<_&&a)for(var x=0;x<a.length;++x)null==a[x].to&&(v=v||[]).push(new ke(a[x].marker,null,null));for(var m=0;m<_;++m)g.push(v);g.push(l)}return g}function Ke(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ce(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Te(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Ae(e){return e.inclusiveLeft?-1:0}function Ee(e){return e.inclusiveRight?1:0}function Me(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),r=t.find(),i=ge(n.from,r.from)||Ae(e)-Ae(t);if(i)return-i;r=ge(n.to,r.to)||Ee(e)-Ee(t);return r||t.id-e.id}function Ne(e,t){var i,n=ze&&e.markedSpans;if(n)for(var r,o=0;o<n.length;++o)(r=n[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!i||Me(i,r.marker)<0)&&(i=r.marker);return i}function Ie(e){return Ne(e,!0)}function De(e){return Ne(e,!1)}function Oe(e,t,i,n,r){var t=ae(e,t),o=ze&&t.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var s=l.marker.find(0),d=ge(s.from,i)||Ae(l.marker)-Ae(r),c=ge(s.to,n)||Ee(l.marker)-Ee(r);if(!(0<=d&&c<=0||d<=0&&0<=c)&&(d<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?0<=ge(s.to,i):0<ge(s.to,i))||0<=d&&(l.marker.inclusiveRight&&r.inclusiveLeft?ge(s.from,n)<=0:ge(s.from,n)<0)))return 1}}}function Be(e){for(var t;t=Ie(e);)e=t.find(-1,!0).line;return e}function Re(e,t){var i=ae(e,t),e=Be(i);return i==e?t:ce(e)}function Pe(e,t){if(t>e.lastLine())return t;var i,n=ae(e,t);if(!He(e,n))return t;for(;i=De(n);)n=i.find(1,!0).line;return ce(n)+1}function He(e,t){var i=ze&&t.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if((n=i[r]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&function e(t,i,n){if(null==n.to){var r=n.marker.find(1,!0);return e(t,r.line,Se(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==i.text.length)return!0;for(var o=void 0,a=0;a<i.markedSpans.length;++a)if((o=i.markedSpans[a]).marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&e(t,i,o))return!0}(e,t,n))return!0}}function We(e){for(var t=0,i=(e=Be(e)).parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==e)break;t+=r.height}for(var o=i.parent;o;o=(i=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==i)break;t+=l.height}return t}function je(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Ie(n);){var r=t.find(0,!0),n=r.from.line;i+=r.from.ch-r.to.ch}for(n=e;t=De(n);){var o=t.find(0,!0);i-=n.text.length-o.from.ch,i+=(n=o.to.line).text.length-o.to.ch}return i}function Xe(e){var i=e.display,e=e.doc;i.maxLine=ae(e,e.first),i.maxLineLength=je(i.maxLine),i.maxLineChanged=!0,e.iter(function(e){var t=je(e);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=e)})}var Fe=null;function $e(e,t,i){var n;Fe=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==i?n=r:Fe=r),o.from==t&&(o.from!=o.to&&"before"!=i?n=r:Fe=r)}return null!=n?n:Fe}var Ue,qe,Ge,Ye,Ze,Qe,Je,et=(Ue="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",qe="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",Ge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ye=/[stwN]/,Ze=/[LRr]/,Qe=/[Lb1n]/,Je=/[1n]/,function(e,t){var i="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!Ge.test(e))return!1;for(var n,r=e.length,o=[],a=0;a<r;++a)o.push((n=e.charCodeAt(a))<=247?Ue.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?qe.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L");for(var l=0,s=i;l<r;++l){var d=o[l];"m"==d?o[l]=s:s=d}for(var c=0,u=i;c<r;++c){var f=o[c];"1"==f&&"r"==u?o[c]="n":Ze.test(f)&&"r"==(u=f)&&(o[c]="R")}for(var h=1,p=o[0];h<r-1;++h){var g=o[h];"+"==g&&"1"==p&&"1"==o[h+1]?o[h]="1":","!=g||p!=o[h+1]||"1"!=p&&"n"!=p||(o[h]=p),p=g}for(var v=0;v<r;++v){var _=o[v];if(","==_)o[v]="N";else if("%"==_){for(var x=void 0,x=v+1;x<r&&"%"==o[x];++x);for(var m=v&&"!"==o[v-1]||x<r&&"1"==o[x]?"1":"N",y=v;y<x;++y)o[y]=m;v=x-1}}for(var b=0,w=i;b<r;++b){var L=o[b];"L"==w&&"1"==L?o[b]="L":Ze.test(L)&&(w=L)}for(var z=0;z<r;++z)if(Ye.test(o[z])){for(var k=void 0,k=z+1;k<r&&Ye.test(o[k]);++k);for(var S="L"==(z?o[z-1]:i),V=S==("L"==(k<r?o[k]:i))?S?"L":"R":i,K=z;K<k;++K)o[K]=V;z=k-1}for(var C,T=[],A=0;A<r;)if(Qe.test(o[A])){var E=A;for(++A;A<r&&Qe.test(o[A]);++A);T.push(new tt(0,E,A))}else{var M=A,N=T.length;for(++A;A<r&&"L"!=o[A];++A);for(var I=M;I<A;)if(Je.test(o[I])){M<I&&T.splice(N,0,new tt(1,M,I));var D=I;for(++I;I<A&&Je.test(o[I]);++I);T.splice(N,0,new tt(2,D,I)),M=I}else++I;M<A&&T.splice(N,0,new tt(1,M,A))}return"ltr"==t&&(1==T[0].level&&(C=e.match(/^\s+/))&&(T[0].from=C[0].length,T.unshift(new tt(0,0,C[0].length))),1==U(T).level&&(C=e.match(/\s+$/))&&(U(T).to-=C[0].length,T.push(new tt(0,r-C[0].length,r)))),"rtl"==t?T.reverse():T});function tt(e,t,i){this.level=e,this.from=t,this.to=i}function it(e,t){var i=e.order;return null==i&&(i=e.order=et(e.text,t)),i}var nt=[],rt=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):(e=e._handlers||(e._handlers={}))[t]=(e[t]||nt).concat(i)};function ot(e,t){return e._handlers&&e._handlers[t]||nt}function at(e,t,i){var n;e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):!(e=(n=e._handlers)&&n[t])||-1<(i=B(e,i))&&(n[t]=e.slice(0,i).concat(e.slice(i+1)))}function lt(e,t){var i=ot(e,t);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)}function st(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),lt(e,i||t.type,e,t),pt(t)||t.codemirrorIgnore}function dt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==B(i,t[n])&&i.push(t[n])}function ct(e,t){return 0<ot(e,t).length}function ut(e){e.prototype.on=function(e,t){rt(this,e,t)},e.prototype.off=function(e,t){at(this,e,t)}}function ft(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ht(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function pt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function gt(e){ft(e),ht(e)}function vt(e){return e.target||e.srcElement}function _t(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}var xt,mt,yt=function(){if(_&&x<9)return!1;var e=V("div");return"draggable"in e||"dragDrop"in e}();var bt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;t<=n;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(i.push(o.slice(0,a)),t+=a+1):(i.push(o),t=r+1)}return i}:function(e){return e.split(/\r\n?|\n/)},wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Lt="oncopy"in(n=V("div"))||(n.setAttribute("oncopy","return;"),"function"==typeof n.oncopy),zt=null;var kt={},St={};function Vt(e){if("string"==typeof e&&St.hasOwnProperty(e))e=St[e];else if(e&&"string"==typeof e.name&&St.hasOwnProperty(e.name)){var t=St[e.name];"string"==typeof t&&(t={name:t}),(e=Y(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Vt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Vt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Kt(e,t){t=Vt(t);var i=kt[t.name];if(!i)return Kt(e,"text/plain");var n=i(e,t);if(Ct.hasOwnProperty(t.name)){var r,o=Ct[t.name];for(r in o)o.hasOwnProperty(r)&&(n.hasOwnProperty(r)&&(n["_"+r]=n[r]),n[r]=o[r])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)n[a]=t.modeProps[a];return n}var Ct={};function Tt(e,t){I(t,Ct.hasOwnProperty(e)?Ct[e]:Ct[e]={})}function At(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i,n={};for(i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Et(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Mt(e,t,i){return!e.startState||e.startState(t,i)}var Nt=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Nt.prototype.eol=function(){return this.pos>=this.string.length},Nt.prototype.sol=function(){return this.pos==this.lineStart},Nt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Nt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Nt.prototype.eat=function(e){var t=this.string.charAt(this.pos),e="string"==typeof e?t==e:t&&(e.test?e.test(t):e(t));if(e)return++this.pos,t},Nt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Nt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Nt.prototype.skipToEnd=function(){this.pos=this.string.length},Nt.prototype.skipTo=function(e){e=this.string.indexOf(e,this.pos);if(-1<e)return this.pos=e,!0},Nt.prototype.backUp=function(e){this.pos-=e},Nt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=D(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},Nt.prototype.indentation=function(){return D(this.string,null,this.tabSize)-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},Nt.prototype.match=function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&0<n.index?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}n=function(e){return i?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},Nt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Nt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Nt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Nt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var It=function(e,t){this.state=e,this.lookAhead=t},Dt=function(e,t,i,n){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function Ot(t,i,n,e){var s=[t.state.modeGen],r={};$t(t,i.text,t.doc.mode,n,function(e,t){return s.push(e,t)},r,e);for(var d=n.state,o=0;o<t.state.overlays.length;++o)!function(e){n.baseTokens=s;var o=t.state.overlays[e],a=1,l=0;n.state=!0,$t(t,i.text,o.mode,n,function(e,t){for(var i=a;l<e;){var n=s[a];e<n&&s.splice(a,1,e,s[a+1],n),a+=2,l=Math.min(e,n)}if(t)if(o.opaque)s.splice(i,a-i,e,"overlay "+t),a=i+2;else for(;i<a;i+=2){var r=s[i+1];s[i+1]=(r?r+" ":"")+"overlay "+t}},r),n.state=d,n.baseTokens=null,n.baseTokenPos=1}(o);return{styles:s,classes:r.bgClass||r.textClass?r:null}}function Bt(e,t,i){var n,r,o;return t.styles&&t.styles[0]==e.state.modeGen||(n=Rt(e,ce(t)),r=t.text.length>e.options.maxHighlightLength&&At(e.doc.mode,n.state),o=Ot(e,t,n),r&&(n.state=r),t.stateAfter=n.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))),t.styles}function Rt(i,n,e){var t=i.doc,r=i.display;if(!t.mode.startState)return new Dt(t,!0,n);var o=function(e,t,i){for(var n,r,o=e.doc,a=i?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;a<l;--l){if(l<=o.first)return o.first;var s=ae(o,l-1),d=s.stateAfter;if(d&&(!i||l+(d instanceof It?d.lookAhead:0)<=o.modeFrontier))return l;s=D(s.text,null,e.options.tabSize);(null==r||s<n)&&(r=l-1,n=s)}return r}(i,n,e),a=o>t.first&&ae(t,o-1).stateAfter,l=a?Dt.fromSaved(t,a,o):new Dt(t,Mt(t.mode),o);return t.iter(o,n,function(e){Pt(i,e.text,l);var t=l.line;e.stateAfter=t==n-1||t%5==0||t>=r.viewFrom&&t<r.viewTo?l.save():null,l.nextLine()}),e&&(t.modeFrontier=l.line),l}function Pt(e,t,i,n){var r=e.doc.mode,o=new Nt(t,e.options.tabSize,i);for(o.start=o.pos=n||0,""==t&&Ht(r,i.state);!o.eol();)Wt(r,o,i.state),o.start=o.pos}function Ht(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){t=Et(e,t);return t.mode.blankLine?t.mode.blankLine(t.state):void 0}}function Wt(e,t,i,n){for(var r=0;r<10;r++){n&&(n[0]=Et(e,i).mode);var o=e.token(t,i);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Dt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Dt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Dt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Dt.fromSaved=function(e,t,i){return t instanceof It?new Dt(e,At(e.mode,t.state),i,t.lookAhead):new Dt(e,At(e.mode,t),i)},Dt.prototype.save=function(e){e=!1!==e?At(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new It(e,this.maxLookAhead):e};var jt=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Xt(e,t,i,n){var r,o,a=e.doc,l=a.mode,s=ae(a,(t=be(a,t)).line),d=Rt(e,t.line,i),c=new Nt(s.text,e.options.tabSize,d);for(n&&(o=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,r=Wt(l,c,d.state),n&&o.push(new jt(c,r,At(a.mode,d.state)));return n?o:new jt(c,r,d.state)}function Ft(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function $t(e,t,i,n,r,o,a){var l=i.flattenSpans;null==l&&(l=e.options.flattenSpans);var s=0,d=null,c=new Nt(t,e.options.tabSize,n),u=e.options.addModeClass&&[null];for(""==t&&Ft(Ht(i,n.state),o);!c.eol();){var f,h=c.pos>e.options.maxHighlightLength?(l=!1,a&&Pt(e,t,n,c.pos),c.pos=t.length,null):Ft(Wt(i,c,n.state,u),o);if(!u||(f=u[0].name)&&(h="m-"+(h?f+" "+h:f)),!l||d!=h){for(;s<c.start;)r(s=Math.min(c.start,s+5e3),d);d=h}c.start=c.pos}for(;s<c.pos;){var p=Math.min(c.pos,s+5e3);r(p,d),s=p}}var Ut=function(e,t,i){this.text=e,Te(this,t),this.height=i?i(this):1};Ut.prototype.lineNo=function(){return ce(this)},ut(Ut);var qt={},Gt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;t=t.addModeClass?Gt:qt;return t[e]||(t[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var i=K("span",null,null,h?"padding-right: .1px":null),n={pre:K("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(_||h)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,a=void 0;n.pos=0,n.addToken=Jt,function(e){if(null!=mt)return mt;var t=S(e,document.createTextNode("A\u062eA")),i=L(t,0,1).getBoundingClientRect(),t=L(t,1,2).getBoundingClientRect();return k(e),i&&i.left!=i.right&&(mt=t.right-i.right<3)}(e.display.measure)&&(a=it(o,e.doc.direction))&&(n.addToken=function(u,f){return function(e,t,i,n,r,o,a){i=i?i+" cm-force-border":"cm-force-border";for(var l=e.pos,s=l+t.length;;){for(var d=void 0,c=0;c<f.length&&!((d=f[c]).to>l&&d.from<=l);c++);if(d.to>=s)return u(e,t,i,n,r,o,a);u(e,t.slice(0,d.to-l),i,n,null,o,a),n=null,t=t.slice(d.to-l),l=d.to}}}(n.addToken,a)),n.map=[],function(e,t,i){var n=e.markedSpans,r=e.text,o=0;if(n)for(var a,l,s,d,c,u,f,h=r.length,p=0,g=1,v="",_=0;;){if(_==p){s=d=c=u=l="",f=null,_=1/0;for(var x=[],m=void 0,y=0;y<n.length;++y){var b=n[y],w=b.marker;"bookmark"==w.type&&b.from==p&&w.widgetNode?x.push(w):b.from<=p&&(null==b.to||b.to>p||w.collapsed&&b.to==p&&b.from==p)?(null!=b.to&&b.to!=p&&_>b.to&&(_=b.to,d=""),w.className&&(s+=" "+w.className),w.css&&(l=(l?l+";":"")+w.css),w.startStyle&&b.from==p&&(c+=" "+w.startStyle),w.endStyle&&b.to==_&&(m=m||[]).push(w.endStyle,b.to),w.title&&!u&&(u=w.title),w.collapsed&&(!f||Me(f.marker,w)<0)&&(f=b)):b.from>p&&_>b.from&&(_=b.from)}if(m)for(var L=0;L<m.length;L+=2)m[L+1]==_&&(d+=" "+m[L]);if(!f||f.from==p)for(var z=0;z<x.length;++z)ei(t,0,x[z]);if(f&&(f.from||0)==p){if(ei(t,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(h<=p)break;for(var k=Math.min(h,_);;){if(v){var S,V=p+v.length;if(f||(S=k<V?v.slice(0,k-p):v,t.addToken(t,S,a?a+s:s,c,p+S.length==_?d:"",u,l)),k<=V){v=v.slice(k-p),p=k;break}p=V,c=""}v=r.slice(o,o=i[g++]),a=Yt(i[g++],t.cm.options)}}else for(var K=1;K<i.length;K+=2)t.addToken(t,r.slice(o,o=i[K]),Yt(i[K+1],t.cm.options))}(o,n,Bt(e,o,t!=e.display.externalMeasured&&ce(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=E(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=E(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(function(e){null==xt&&(t=V("span","\u200b"),S(e,V("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(xt=t.offsetWidth<=1&&2<t.offsetHeight&&!(_&&x<8)));var t=xt?V("span","\u200b"):V("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return t.setAttribute("cm-text",""),t}(e.display.measure))),0==r?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return h&&(i=n.content.lastChild,(/\bcm-tab\b/.test(i.className)||i.querySelector&&i.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")),lt(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=E(n.pre.className,n.textClass||"")),n}function Qt(e){var t=V("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,i,n,r,o,a){if(t){var l,s=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var i=t,n="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!i||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o="\xa0"),n+=o,i=" "==o}return n}(t,e.trailingSpace):t,d=e.cm.state.specialChars,c=!1;if(d.test(t)){l=document.createDocumentFragment();for(var u=0;;){d.lastIndex=u;var f=d.exec(t),h=f?f.index-u:t.length-u;if(h&&(p=document.createTextNode(s.slice(u,u+h)),_&&x<9?l.appendChild(V("span",[p])):l.appendChild(p),e.map.push(e.pos,e.pos+h,p),e.col+=h,e.pos+=h),!f)break;u+=1+h;var p=void 0;"\t"==f[0]?(h=(h=e.cm.options.tabSize)-e.col%h,(p=l.appendChild(V("span",$(h),"cm-tab"))).setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),e.col+=h):("\r"==f[0]||"\n"==f[0]?(p=l.appendChild(V("span","\r"==f[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",f[0]):((p=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),_&&x<9?l.appendChild(V("span",[p])):l.appendChild(p)),e.col+=1),e.map.push(e.pos,e.pos+1,p),e.pos++}}else e.col+=t.length,l=document.createTextNode(s),e.map.push(e.pos,e.pos+t.length,l),_&&x<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==s.charCodeAt(t.length-1),i||n||r||c||a){i=i||"";n&&(i+=n),r&&(i+=r);a=V("span",[l],i,a);return o&&(a.title=o),e.content.appendChild(a)}e.content.appendChild(l)}}function ei(e,t,i,n){var r=!n&&i.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!n&&e.cm.display.input.needsContentAttribute&&(r=r||e.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",i.id),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function ti(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=De(e);)e=t.find(1,!0).line,(i=i||[]).push(e);return i}(t),this.size=this.rest?ce(U(this.rest))-i+1:1,this.node=this.text=null,this.hidden=He(e,t)}function ii(e,t,i){for(var n=[],r=t;r<i;r=a){var o=new ti(e.doc,ae(e.doc,r),r),a=r+o.size;n.push(o)}return n}var ni=null;function ri(e,t){var i=e.ownsGroup;if(i)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var n=0;n<e.ops.length;n++){var r=e.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(i<t.length)}(i)}finally{ni=null,t(i)}}var oi=null;function ai(e,t){var i=ot(e,t);if(i.length){var n,r=Array.prototype.slice.call(arguments,2);ni?n=ni.delayedCallbacks:oi?n=oi:(n=oi=[],setTimeout(li,0));for(var o=0;o<i.length;++o)!function(e){n.push(function(){return i[e].apply(null,r)})}(o)}}function li(){var e=oi;oi=null;for(var t=0;t<e.length;++t)e[t]()}function si(e,t,i,n){for(var r,o,a,l,s=0;s<t.changes.length;s++){var d=t.changes[s];"text"==d?(r=e,l=a=void 0,a=(o=t).text.className,l=ci(r,o),o.text==o.node&&(o.node=l.pre),o.text.parentNode.replaceChild(l.pre,o.text),o.text=l.pre,l.bgClass!=o.bgClass||l.textClass!=o.textClass?(o.bgClass=l.bgClass,o.textClass=l.textClass,ui(r,o)):a&&(o.text.className=a)):"gutter"==d?fi(e,t,i,n):"class"==d?ui(e,t):"widget"==d&&function(e,t,i){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,r=void 0;n;n=r)r=n.nextSibling,"CodeMirror-linewidget"==n.className&&t.node.removeChild(n);hi(e,t,i)}(e,t,n)}t.changes=null}function di(e){return e.node==e.text&&(e.node=V("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),_&&x<8&&(e.node.style.zIndex=2)),e.node}function ci(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Zt(e,t)}function ui(e,t){var i,n;i=e,(n=(r=t).bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass)&&(n+=" CodeMirror-linebackground"),r.background?n?r.background.className=n:(r.background.parentNode.removeChild(r.background),r.background=null):n&&(e=di(r),r.background=e.insertBefore(V("div",null,n),e.firstChild),i.display.input.setUneditable(r.background)),t.line.wrapClass?di(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function fi(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass&&(o=di(t),t.gutterBackground=V("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text));var r=t.line.gutterMarkers;if(e.options.lineNumbers||r){var o=di(t),a=t.gutter=V("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),o.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(V("div",he(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(var l=0;l<e.options.gutters.length;++l){var s=e.options.gutters[l],d=r.hasOwnProperty(s)&&r[s];d&&a.appendChild(V("div",[d],"CodeMirror-gutter-elt","left: "+n.gutterLeft[s]+"px; width: "+n.gutterWidth[s]+"px"))}}}function hi(e,t,i){if(pi(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)pi(e,t.rest[n],t,i,!1)}function pi(e,t,i,n,r){if(t.widgets)for(var o,a,l,s,d=di(i),c=0,u=t.widgets;c<u.length;++c){var f=u[c],h=V("div",[f.node],"CodeMirror-linewidget");f.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),a=h,l=i,s=n,(o=f).noHScroll&&((l.alignable||(l.alignable=[])).push(a),l=s.wrapperWidth,a.style.left=s.fixedPos+"px",o.coverGutter||(l-=s.gutterTotalWidth,a.style.paddingLeft=s.gutterTotalWidth+"px"),a.style.width=l+"px"),o.coverGutter&&(a.style.zIndex=5,a.style.position="relative",o.noHScroll||(a.style.marginLeft=-s.gutterTotalWidth+"px")),e.display.input.setUneditable(h),r&&f.above?d.insertBefore(h,i.gutter||i.text):d.appendChild(h),ai(f,"redraw")}}function gi(e){if(null!=e.height)return e.height;var t,i=e.doc.cm;return i?(C(document.body,e.node)||(t="position: relative;",e.coverGutter&&(t+="margin-left: -"+i.display.gutters.offsetWidth+"px;"),e.noHScroll&&(t+="width: "+i.display.wrapper.clientWidth+"px;"),S(i.display.measure,V("div",[e.node],null,t))),e.height=e.node.parentNode.offsetHeight):0}function vi(e,t){for(var i=vt(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return 1}function _i(e){return e.lineSpace.offsetTop}function xi(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function mi(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=S(e.measure,V("pre","x")),t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)};return isNaN(t.left)||isNaN(t.right)||(e.cachedPaddingH=t),t}function yi(e){return R-e.display.nativeBarWidth}function bi(e){return e.display.scroller.clientWidth-yi(e)-e.display.barWidth}function wi(e){return e.display.scroller.clientHeight-yi(e)-e.display.barHeight}function Li(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var r=0;r<e.rest.length;r++)if(ce(e.rest[r])>i)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function zi(e,t,i,n){return Vi(e,Si(e,t),i,n)}function ki(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[en(e,t)];e=e.display.externalMeasured;return e&&t>=e.lineN&&t<e.lineN+e.size?e:void 0}function Si(e,t){var i,n,r=ce(t),o=ki(e,r);o&&!o.text?o=null:o&&o.changes&&(si(e,o,r,Gi(e)),e.curOp.forceUpdate=!0),o||(i=e,e=ce(n=Be(n=t)),(n=i.display.externalMeasured=new ti(i.doc,n,e)).lineN=e,e=n.built=Zt(i,n),n.text=e.pre,S(i.display.lineMeasure,e.pre),o=n);r=Li(o,t,r);return{line:t,view:o,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Vi(e,t,i,n,r){t.before&&(i=-1);var o,a=i+(n||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,i){var n=e.options.lineWrapping,e=n&&bi(e);if(!t.measure.heights||n&&t.measure.width!=e){var r=t.measure.heights=[];if(n){t.measure.width=e;for(var o=t.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],s=o[a+1];2<Math.abs(l.bottom-s.bottom)&&r.push((l.bottom+s.top)/2-i.top)}}r.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,i,n){var r,o=Ti(t.map,i,n),a=o.node,l=o.start,s=o.end,d=o.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;l&&ie(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+s));)++s;if((r=_&&x<9&&0==l&&s==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():function(e,t){var i=Ci;if("left"==t)for(var n=0;n<e.length&&(i=e[n]).left==i.right;n++);else for(var r=e.length-1;0<=r&&(i=e[r]).left==i.right;r--);return i}(L(a,l,s).getClientRects(),n)).left||r.right||0==l)break;s=l,--l,d="right"}_&&x<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=zt)return zt;var e=(t=S(e,V("span","x"))).getBoundingClientRect(),t=L(t,0,1).getBoundingClientRect();return zt=1<Math.abs(e.left-t.left)}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,e=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*e,bottom:t.bottom*e}}(e.display.measure,r))}else 0<l&&(d=n="right"),r=e.options.lineWrapping&&1<(g=a.getClientRects()).length?g["right"==n?g.length-1:0]:a.getBoundingClientRect();!(_&&x<9)||l||r&&(r.left||r.right)||(v=a.parentNode.getClientRects()[0],r=v?{left:v.left,right:v.left+qi(e.display),top:v.top,bottom:v.bottom}:Ci);for(var u=r.top-t.rect.top,i=r.bottom-t.rect.top,f=(u+i)/2,h=t.view.measure.heights,p=0;p<h.length-1&&!(f<h[p]);p++);var g=p?h[p-1]:0,v=h[p],v={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:g,bottom:v};r.left||r.right||(v.bogus=!0);e.options.singleCursorHeightPerLine||(v.rtop=u,v.rbottom=i);return v}(e,t,i,n)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Ki,Ci={left:0,right:0,top:0,bottom:0};function Ti(e,t,i){for(var n,r,o,a,l,s,d=0;d<e.length;d+=3)if(l=e[d],s=e[d+1],t<l?(r=0,o=1,a="left"):t<s?o=(r=t-l)+1:(d==e.length-3||t==s&&e[d+3]>t)&&(r=(o=s-l)-1,s<=t&&(a="right")),null!=r){if(n=e[d+2],l==s&&i==(n.insertLeft?"left":"right")&&(a=i),"left"==i&&0==r)for(;d&&e[d-2]==e[d-3]&&e[d-1].insertLeft;)n=e[2+(d-=3)],a="left";if("right"==i&&r==s-l)for(;d<e.length-3&&e[d+3]==e[d+4]&&!e[d+5].insertLeft;)n=e[(d+=3)+2],a="right";break}return{node:n,start:r,end:o,collapse:a,coverStart:l,coverEnd:s}}function Ai(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ei(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ai(e.display.view[t])}function Mi(e){Ei(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ni(){return o&&c?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ii(){return o&&c?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Di(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=gi(e.widgets[i]));return t}function Oi(e,t,i,n,r){if(r||(r=Di(t),i.top+=r,i.bottom+=r),"line"==n)return i;n=n||"local";t=We(t);return"local"==n?t+=_i(e.display):t-=e.display.viewOffset,"page"!=n&&"window"!=n||(t+=(e=e.display.lineSpace.getBoundingClientRect()).top+("window"==n?0:Ii()),n=e.left+("window"==n?0:Ni()),i.left+=n,i.right+=n),i.top+=t,i.bottom+=t,i}function Bi(e,t,i){if("div"==i)return t;var n=t.left,t=t.top;"page"==i?(n-=Ni(),t-=Ii()):"local"!=i&&i||(n+=(i=e.display.sizer.getBoundingClientRect()).left,t+=i.top);e=e.display.lineSpace.getBoundingClientRect();return{left:n-e.left,top:t-e.top}}function Ri(e,t,i,n,r){return Oi(e,n=n||ae(e.doc,t.line),zi(e,n,t.ch,r),i)}function Pi(i,e,n,r,o,a){function l(e,t){e=Vi(i,o,e,t?"right":"left",a);return t?e.left=e.right:e.right=e.left,Oi(i,r,e,n)}r=r||ae(i.doc,e.line),o=o||Si(i,r);var s=it(r,i.doc.direction),t=e.ch,d=e.sticky;if(t>=r.text.length?(t=r.text.length,d="before"):t<=0&&(t=0,d="after"),!s)return l("before"==d?t-1:t,"before"==d);function c(e,t,i){return l(i?e-1:e,1==s[t].level!=i)}var u=$e(s,t,d),e=Fe,u=c(t,u,"before"==d);return null!=e&&(u.other=c(t,e,"before"!=d)),u}function Hi(e,t){var i=0;t=be(e.doc,t),e.options.lineWrapping||(i=qi(e.display)*t.ch);t=ae(e.doc,t.line),e=We(t)+_i(e.display);return{left:i,right:i,top:e,bottom:e+t.height}}function Wi(e,t,i,n,r){i=pe(e,t,i);return i.xRel=r,n&&(i.outside=!0),i}function ji(e,t,i){var n=e.doc;if((i+=e.display.viewOffset)<0)return Wi(n.first,0,null,!0,-1);var r=ue(n,i),o=n.first+n.size-1;if(o<r)return Wi(n.first+n.size-1,ae(n,o).text.length,null,!0,1);t<0&&(t=0);for(var a=ae(n,r);;){var l=function(i,e,t,n,r){r-=We(e);var o=Si(i,e),a=Di(e),l=0,s=e.text.length,d=!0,c=it(e,i.doc.direction);c&&(h=(i.options.lineWrapping?function(e,t,i,n,r,o,a){var a=Xi(e,t,n,a),l=a.begin,s=a.end;/\s/.test(t.text.charAt(s-1))&&s--;for(var d=null,c=null,u=0;u<r.length;u++){var f,h=r[u];h.from>=s||h.to<=l||(f=1!=h.level,f=Vi(e,n,f?Math.min(s,h.to)-1:Math.max(l,h.from)).right,f=f<o?o-f+1e9:f-o,(!d||f<c)&&(d=h,c=f))}d=d||r[r.length-1];d.from<l&&(d={from:l,to:d.to,level:d.level});d.to>s&&(d={from:d.from,to:s,level:d.level});return d}:function(i,n,r,o,a,l,s){var e=re(function(e){var t=a[e],e=1!=t.level;return $i(Pi(i,pe(r,e?t.to:t.from,e?"before":"after"),"line",n,o),l,s,!0)},0,a.length-1),t=a[e];{var d;0<e&&(d=1!=t.level,$i(d=Pi(i,pe(r,d?t.from:t.to,d?"after":"before"),"line",n,o),l,s,!0)&&d.top>s&&(t=a[e-1]))}return t})(i,e,t,o,c,n,r),d=1!=h.level,l=d?h.from:h.to-1,s=d?h.to:h.from-1);var u=null,f=null,c=re(function(e){var t=Vi(i,o,e);return t.top+=a,t.bottom+=a,$i(t,n,r,!1)&&(t.top<=r&&t.left<=n&&(u=e,f=t),1)},l,s),h=!1;{var p,g;f?(p=n-f.left<f.right-n,c=u+((g=p==d)?0:1),g=g?"after":"before",p=p?f.left:f.right):(d||c!=s&&c!=l||c++,g=0==c||c!=e.text.length&&Vi(i,o,c-(d?1:0)).bottom+a<=r==d?"after":"before",d=Pi(i,pe(t,c,g),"line",e,o),p=d.left,h=r<d.top||r>=d.bottom)}return c=ne(e.text,c,1),Wi(t,c,g,h,n-p)}(e,a,r,t,i),s=function(e,t){var i,n=ze&&e.markedSpans;if(n)for(var r=0;r<n.length;++r){var o=n[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!i||Me(i,o.marker)<0)&&(i=o.marker)}return i}(a,l.ch+(0<l.xRel?1:0));if(!s)return l;s=s.find(1);if(s.line==r)return s;a=ae(n,r=s.line)}}function Xi(t,e,i,n){n-=Di(e);var r=e.text.length,e=re(function(e){return Vi(t,i,e-1).bottom<=n},r,0);return{begin:e,end:r=re(function(e){return Vi(t,i,e).top>n},e,r)}}function Fi(e,t,i,n){return Xi(e,t,i=i||Si(e,t),Oi(e,t,Vi(e,i,n),"line").top)}function $i(e,t,i,n){return!(e.bottom<=i)&&(e.top>i||(n?e.left:e.right)>t)}function Ui(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ki){Ki=V("pre");for(var t=0;t<49;++t)Ki.appendChild(document.createTextNode("x")),Ki.appendChild(V("br"));Ki.appendChild(document.createTextNode("x"))}S(e.measure,Ki);var i=Ki.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),k(e.measure),i||1}function qi(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=V("span","xxxxxxxxxx"),i=V("pre",[t]);S(e.measure,i);t=t.getBoundingClientRect(),t=(t.right-t.left)/10;return 2<t&&(e.cachedCharWidth=t),t||10}function Gi(e){for(var t=e.display,i={},n={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)i[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+r,n[e.options.gutters[a]]=o.clientWidth;return{fixedPos:Yi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Yi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Zi(n){var r=Ui(n.display),o=n.options.lineWrapping,a=o&&Math.max(5,n.display.scroller.clientWidth/qi(n.display)-3);return function(e){if(He(n.doc,e))return 0;var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;i++)e.widgets[i].height&&(t+=e.widgets[i].height);return o?t+(Math.ceil(e.text.length/a)||1)*r:t+r}}function Qi(e){var t=e.doc,i=Zi(e);t.iter(function(e){var t=i(e);t!=e.height&&de(e,t)})}function Ji(e,t,i,n){var r=e.display;if(!i&&"true"==vt(t).getAttribute("cm-not-content"))return null;var o,a,l=r.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,r=ji(e,o,a);return n&&1==r.xRel&&(s=ae(e.doc,r.line).text).length==r.ch&&(s=D(s,s.length,e.options.tabSize)-s.length,r=pe(r.line,Math.max(0,Math.round((o-mi(e.display).left)/qi(e.display))-s))),r}function en(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,n=0;n<i.length;n++)if((t-=i[n].size)<0)return n}function tn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function nn(e,t){void 0===t&&(t=!0);for(var i,n,r=e.doc,o={},a=o.cursors=document.createDocumentFragment(),l=o.selection=document.createDocumentFragment(),s=0;s<r.sel.ranges.length;s++)!t&&s==r.sel.primIndex||((i=r.sel.ranges[s]).from().line>=e.display.viewTo||i.to().line<e.display.viewFrom||(((n=i.empty())||e.options.showCursorWhenSelecting)&&rn(e,i.head,a),n||function(r,e,t){var i=r.display,o=r.doc,a=document.createDocumentFragment(),n=mi(r.display),L=n.left,z=Math.max(i.sizerWidth,bi(r)-i.sizer.offsetLeft)-n.right,k="ltr"==o.direction;function S(e,t,i,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),a.appendChild(V("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?z-e:i)+"px;\n                             height: "+(n-t)+"px"))}function l(i,g,v){var _,x,n=ae(o,i),m=n.text.length;function y(e,t){return Ri(r,pe(i,e),"div",n,t)}function b(e,t,i){e=Fi(r,n,null,e),t="ltr"==t==("after"==i)?"left":"right";return y("after"==i?e.begin:e.end-(/\s/.test(n.text.charAt(e.end-1))?2:1),t)[t]}var w=it(n,o.direction);return function(e,t,i,n){if(!e)return n(t,i,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<i&&a.to>t||t==i&&a.to==t)&&(n(Math.max(a.from,t),Math.min(a.to,i),1==a.level?"rtl":"ltr",o),r=!0)}r||n(t,i,"ltr")}(w,g||0,null==v?m:v,function(e,t,i,n){var r,o,a,l,s="ltr"==i,d=y(e,s?"left":"right"),c=y(t-1,s?"right":"left"),u=null==g&&0==e,f=null==v&&t==m,h=0==n,p=!w||n==w.length-1;c.top-d.top<=3?(r=(k?f:u)&&p,n=(k?u:f)&&h?L:(s?d:c).left,r=r?z:(s?c:d).right,S(n,d.top,r-n,d.bottom)):(i=s?(o=k&&u&&h?L:d.left,a=k?z:b(e,i,"before"),l=k?L:b(t,i,"after"),k&&f&&p?z:c.right):(o=k?b(e,i,"before"):L,a=!k&&u&&h?z:d.right,l=!k&&f&&p?L:c.left,k?b(t,i,"after"):z),S(o,d.top,a-o,d.bottom),d.bottom<c.top&&S(L,d.bottom,null,c.top),S(l,c.top,i-l,c.bottom)),(!_||on(d,_)<0)&&(_=d),on(c,_)<0&&(_=c),(!x||on(d,x)<0)&&(x=d),on(c,x)<0&&(x=c)}),{start:_,end:x}}var s=e.from(),i=e.to();s.line==i.line?l(s.line,s.ch,i.ch):(n=ae(o,s.line),e=ae(o,i.line),e=Be(n)==Be(e),n=l(s.line,s.ch,e?n.text.length+1:null).end,i=l(i.line,e?0:null,i.ch).start,e&&(n.top<i.top-2?(S(n.right,n.top,null,n.bottom),S(L,i.top,i.left,i.bottom)):S(n.right,n.top,i.left-n.right,n.bottom)),n.bottom<i.top&&S(L,n.bottom,null,i.top)),t.appendChild(a)}(e,i,l)));return o}function rn(e,t,i){var n=Pi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),t=i.appendChild(V("div","\xa0","CodeMirror-cursor"));t.style.left=n.left+"px",t.style.top=n.top+"px",t.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other&&((i=i.appendChild(V("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",i.style.left=n.other.left+"px",i.style.top=n.other.top+"px",i.style.height=.85*(n.other.bottom-n.other.top)+"px")}function on(e,t){return e.top-t.top||e.left-t.left}function an(e){var t,i;e.state.focused&&(t=e.display,clearInterval(t.blinker),i=!0,t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function ln(e){e.state.focused||(e.display.input.focus(),dn(e))}function sn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,cn(e))},100)}function dn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(lt(e,"focus",e,t),e.state.focused=!0,A(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),h&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),an(e))}function cn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(lt(e,"blur",e,t),e.state.focused=!1,z(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function un(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var r,o=t.view[n],a=void 0;if(!o.hidden){_&&x<8?(a=(r=o.node.offsetTop+o.node.offsetHeight)-i,i=r):a=(l=o.node.getBoundingClientRect()).bottom-l.top;var l=o.line.height-a;if(a<2&&(a=Ui(t)),(.005<l||l<-.005)&&(de(o.line,a),fn(o.line),o.rest))for(var s=0;s<o.rest.length;s++)fn(o.rest[s])}}}function fn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],n=i.node.parentNode;n&&(i.height=n.offsetHeight)}}function hn(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop,n=Math.floor(n-_i(e)),r=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,o=ue(t,n),n=ue(t,r);return i&&i.ensure&&(r=i.ensure.from.line,i=i.ensure.to.line,r<o?n=ue(t,We(ae(t,o=r))+e.wrapper.clientHeight):Math.min(i,t.lastLine())>=n&&(o=ue(t,We(ae(t,i))-e.wrapper.clientHeight),n=i)),{from:o,to:Math.max(n,o+1)}}function pn(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=Yi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=n+"px",a=0;a<i.length;a++)if(!i[a].hidden){e.options.fixedGutter&&(i[a].gutter&&(i[a].gutter.style.left=o),i[a].gutterBackground&&(i[a].gutterBackground.style.left=o));var l=i[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function gn(e){if(e.options.lineNumbers){var t=e.doc,i=he(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(V("div",[V("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),t=r.firstChild.offsetWidth,r=r.offsetWidth-t;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(t,n.lineGutter.offsetWidth-r)+1,n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",qn(e),1}}}function vn(e,t){var i=e.display,n=Ui(e.display);t.top<0&&(t.top=0);var r=(e.curOp&&null!=e.curOp.scrollTop?e.curOp:i.scroller).scrollTop,o=wi(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+xi(i),s=t.top<n,n=t.bottom>l-n;t.top<r?a.scrollTop=s?0:t.top:t.bottom>r+o&&((d=Math.min(t.top,(n?l:t.bottom)-o))!=r&&(a.scrollTop=d));var d=(e.curOp&&null!=e.curOp.scrollLeft?e.curOp:i.scroller).scrollLeft,e=bi(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),i=t.right-t.left>e;return i&&(t.right=t.left+e),t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(i?0:10)):t.right>e+d-3&&(a.scrollLeft=t.right+(i?0:10)-e),a}function _n(e,t){null!=t&&(yn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc:e.curOp).scrollTop+t)}function xn(e){yn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function mn(e,t,i){null==t&&null==i||yn(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function yn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,bn(e,Hi(e,t.from),Hi(e,t.to),t.margin))}function bn(e,t,i,n){n=vn(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-n,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+n});mn(e,n.scrollLeft,n.scrollTop)}function wn(e,t){Math.abs(e.doc.scrollTop-t)<2||(f||Un(e,{top:t}),Ln(e,t,!0),f&&Un(e),Wn(e,100))}function Ln(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),e.display.scroller.scrollTop==t&&!i||(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function zn(e,t,i,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,pn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function kn(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+xi(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+yi(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}e=function(e,t,i){this.cm=i;var n=this.vert=V("div",[V("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=V("div",[V("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=r.tabIndex=-1,e(n),e(r),rt(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),rt(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,_&&x<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};e.prototype.update=function(e){var t,i=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=i?r+"px":"0",t=e.viewHeight-(i?r:0),this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+t)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),i?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",t=e.viewWidth-e.barLeft-(n?r:0),this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+t)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:i?r:0}},e.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},e.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},e.prototype.zeroWidthHack=function(){var e=g&&!a?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new O,this.disableVert=new O},e.prototype.enableZeroWidthBar=function(i,n,r){i.style.pointerEvents="auto",n.set(1e3,function e(){var t=i.getBoundingClientRect();("vert"==r?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=i?i.style.pointerEvents="none":n.set(1e3,e)})},e.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};n=function(){};function Sn(e,t){t=t||kn(e);var i=e.display.barWidth,n=e.display.barHeight;Vn(e,t);for(var r=0;r<4&&i!=e.display.barWidth||n!=e.display.barHeight;r++)i!=e.display.barWidth&&e.options.lineWrapping&&un(e),Vn(e,kn(e)),i=e.display.barWidth,n=e.display.barHeight}function Vn(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}n.prototype.update=function(){return{bottom:0,right:0}},n.prototype.setScrollLeft=function(){},n.prototype.setScrollTop=function(){},n.prototype.clear=function(){};var Kn={native:e,null:n};function Cn(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&z(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new Kn[i.options.scrollbarStyle](function(e){i.display.wrapper.insertBefore(e,i.display.scrollbarFiller),rt(e,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){("horizontal"==t?zn:wn)(i,e)},i),i.display.scrollbars.addClass&&A(i.display.wrapper,i.display.scrollbars.addClass)}var Tn=0;function An(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Tn},e=e.curOp,ni?ni.ops.push(e):e.ownsGroup=ni={ops:[e],delayedCallbacks:[]}}function En(e){ri(e.curOp,function(a){for(var e=0;e<a.ops.length;e++)a.ops[e].cm.curOp=null;!function(){for(var e=a.ops,t=0;t<e.length;t++)!function(e){var t=e.cm,i=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=yi(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=yi(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Xe(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Xn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}(e[t]);for(var i=0;i<e.length;i++)!function(e){e.updatedDisplay=e.mustUpdate&&Fn(e.cm,e.update)}(e[i]);for(var n=0;n<e.length;n++)!function(e){var t=e.cm,i=t.display;e.updatedDisplay&&un(t),e.barMeasure=kn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=zi(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+yi(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-bi(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}(e[n]);for(var r=0;r<e.length;r++)!function(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&zn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==T();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),!e.updatedDisplay&&e.startHeight==t.doc.height||Sn(t,e.barMeasure),e.updatedDisplay&&Gn(t,e.barMeasure),e.selectionChanged&&an(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ln(e.cm)}(e[r]);for(var o=0;o<e.length;o++)!function(e){var t,i=e.cm,n=i.display,r=i.doc;e.updatedDisplay&&$n(i,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ln(i,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&zn(i,e.scrollLeft,!0,!0),e.scrollToPos&&(t=function(e,t,i,n){null==n&&(n=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?pe(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?pe(t.line,t.ch+1,"before"):t);for(var r=0;r<5;r++){var o,a=!1,l=Pi(e,t),s=i&&i!=t?Pi(e,i):l,d=vn(e,o={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-n,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+n}),l=e.doc.scrollTop,s=e.doc.scrollLeft;if(null!=d.scrollTop&&(wn(e,d.scrollTop),1<Math.abs(e.doc.scrollTop-l)&&(a=!0)),null!=d.scrollLeft&&(zn(e,d.scrollLeft),1<Math.abs(e.doc.scrollLeft-s)&&(a=!0)),!a)break}return o}(i,be(r,e.scrollToPos.from),be(r,e.scrollToPos.to),e.scrollToPos.margin),function(e,t){var i,n,r;st(e,"scrollCursorIntoView")||(n=(i=e.display).sizer.getBoundingClientRect(),r=null,t.top+n.top<0?r=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null==r||d||(t=V("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-_i(e.display))+"px;\n                         height: "+(t.bottom-t.top+yi(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;"),e.display.lineSpace.appendChild(t),t.scrollIntoView(r),e.display.lineSpace.removeChild(t)))}(i,t));var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||lt(o[l],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&lt(a[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=i.display.scroller.scrollTop),e.changeObjs&&lt(i,"changes",i,e.changeObjs),e.update&&e.update.finish()}(e[o])}()})}function Mn(e,t){if(e.curOp)return t();An(e);try{return t()}finally{En(e)}}function Nn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);An(e);try{return t.apply(e,arguments)}finally{En(e)}}}function In(e){return function(){if(this.curOp)return e.apply(this,arguments);An(this);try{return e.apply(this,arguments)}finally{En(this)}}}function Dn(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);An(e);try{return t.apply(this,arguments)}finally{En(e)}}}function On(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n=n||0;var r,o,a=e.display;n&&i<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>t)&&(a.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=a.viewTo?ze&&Re(e.doc,t)<a.viewTo&&Rn(e):i<=a.viewFrom?ze&&Pe(e.doc,i+n)>a.viewFrom?Rn(e):(a.viewFrom+=n,a.viewTo+=n):t<=a.viewFrom&&i>=a.viewTo?Rn(e):t<=a.viewFrom?(r=Pn(e,i,i+n,1))?(a.view=a.view.slice(r.index),a.viewFrom=r.lineN,a.viewTo+=n):Rn(e):i>=a.viewTo?(o=Pn(e,t,t,-1))?(a.view=a.view.slice(0,o.index),a.viewTo=o.lineN):Rn(e):(r=Pn(e,t,t,-1),o=Pn(e,i,i+n,1),r&&o?(a.view=a.view.slice(0,r.index).concat(ii(e,r.lineN,o.lineN)).concat(a.view.slice(o.index)),a.viewTo+=n):Rn(e));e=a.externalMeasured;e&&(i<e.lineN?e.lineN+=n:t<e.lineN+e.size&&(a.externalMeasured=null))}function Bn(e,t,i){e.curOp.viewChanged=!0;var n=e.display,r=e.display.externalMeasured;r&&t>=r.lineN&&t<r.lineN+r.size&&(n.externalMeasured=null),t<n.viewFrom||t>=n.viewTo||(null==(t=n.view[en(e,t)]).node||-1==B(t=t.changes||(t.changes=[]),i)&&t.push(i))}function Rn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Pn(e,t,i,n){var r,o=en(e,t),a=e.display.view;if(!ze||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(0<n){if(o==a.length-1)return null;r=l+a[o].size-t,o++}else r=l-t;t+=r,i+=r}for(;Re(e.doc,i)!=i;){if(o==(n<0?0:a.length-1))return null;i+=n*a[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:i}}function Hn(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var r=t[n];r.hidden||r.node&&!r.changes||++i}return i}function Wn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(jn,e))}function jn(a){var l,s,d,c=a.doc;c.highlightFrontier>=a.display.viewTo||(l=+new Date+a.options.workTime,s=Rt(a,c.highlightFrontier),d=[],c.iter(s.line,Math.min(c.first+c.size,a.display.viewTo+500),function(e){if(s.line>=a.display.viewFrom){var t=e.styles,i=e.text.length>a.options.maxHighlightLength?At(c.mode,s.state):null,n=Ot(a,e,s,!0);i&&(s.state=i),e.styles=n.styles;i=e.styleClasses,n=n.classes;n?e.styleClasses=n:i&&(e.styleClasses=null);for(var r=!t||t.length!=e.styles.length||i!=n&&(!i||!n||i.bgClass!=n.bgClass||i.textClass!=n.textClass),o=0;!r&&o<t.length;++o)r=t[o]!=e.styles[o];r&&d.push(s.line),e.stateAfter=s.save(),s.nextLine()}else e.text.length<=a.options.maxHighlightLength&&Pt(a,e.text,s),e.stateAfter=s.line%5==0?s.save():null,s.nextLine();if(+new Date>l)return Wn(a,a.options.workDelay),!0}),c.highlightFrontier=s.line,c.modeFrontier=Math.max(c.modeFrontier,s.line),d.length&&Mn(a,function(){for(var e=0;e<d.length;e++)Bn(a,d[e],"text")}))}var Xn=function(e,t,i){var n=e.display;this.viewport=t,this.visible=hn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=bi(e),this.force=i,this.dims=Gi(e),this.events=[]};function Fn(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return Rn(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Hn(e))return!1;gn(e)&&(Rn(e),t.dims=Gi(e));var r=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),a=Math.min(r,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>a&&i.viewTo-a<20&&(a=Math.min(r,i.viewTo)),ze&&(o=Re(e.doc,o),a=Pe(e.doc,a));var l=o!=i.viewFrom||a!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;n=o,r=a,0==(a=(o=e).display).view.length||n>=a.viewTo||r<=a.viewFrom?(a.view=ii(o,n,r),a.viewFrom=n):(a.viewFrom>n?a.view=ii(o,n,a.viewFrom).concat(a.view):a.viewFrom<n&&(a.view=a.view.slice(en(o,n))),a.viewFrom=n,a.viewTo<r?a.view=a.view.concat(ii(o,a.viewTo,r)):a.viewTo>r&&(a.view=a.view.slice(0,en(o,r)))),a.viewTo=r,i.viewOffset=We(ae(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";o=Hn(e);if(!l&&0==o&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;a=function(e){if(e.hasFocus())return null;var t=T();if(!t||!C(e.display.lineDiv,t))return null;var i={activeElt:t};return!window.getSelection||(t=window.getSelection()).anchorNode&&t.extend&&C(e.display.lineDiv,t.anchorNode)&&(i.anchorNode=t.anchorNode,i.anchorOffset=t.anchorOffset,i.focusNode=t.focusNode,i.focusOffset=t.focusOffset),i}(e);return 4<o&&(i.lineDiv.style.display="none"),function(i,e,t){var n=i.display,r=i.options.lineNumbers,o=n.lineDiv,a=o.firstChild;function l(e){var t=e.nextSibling;return h&&g&&i.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var s=n.view,d=n.viewFrom,c=0;c<s.length;c++){var u=s[c];if(!u.hidden)if(u.node&&u.node.parentNode==o){for(;a!=u.node;)a=l(a);var f=r&&null!=e&&e<=d&&u.lineNumber;u.changes&&(-1<B(u.changes,"gutter")&&(f=!1),si(i,u,d,t)),f&&(k(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(he(i.options,d)))),a=u.node.nextSibling}else{f=function(e,t,i,n){var r=ci(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),ui(e,t),fi(e,t,i,n),hi(e,t,n),t.node}(i,u,d,t);o.insertBefore(f,a)}d+=u.size}for(;a;)a=l(a)}(e,i.updateLineNumbers,t.dims),4<o&&(i.lineDiv.style.display=""),i.renderedView=i.view,(r=a)&&r.activeElt&&r.activeElt!=T()&&(r.activeElt.focus(),r.anchorNode&&C(document.body,r.anchorNode)&&C(document.body,r.focusNode)&&(o=window.getSelection(),(a=document.createRange()).setEnd(r.anchorNode,r.anchorOffset),a.collapse(!1),o.removeAllRanges(),o.addRange(a),o.extend(r.focusNode,r.focusOffset))),k(i.cursorDiv),k(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,l&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Wn(e,400)),!(i.updateLineNumbers=null)}function $n(e,t){for(var i=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=bi(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+xi(e.display)-wi(e),i.top)}),t.visible=hn(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Fn(e,t);n=!1){un(e);var r=kn(e);tn(e),Sn(e,r),Gn(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Un(e,t){var i=new Xn(e,t);Fn(e,i)&&(un(e),$n(e,i),t=kn(e),tn(e),Sn(e,t),Gn(e,t),i.finish())}function qn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Gn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+yi(e)+"px"}function Yn(e){var t=e.display.gutters,i=e.options.gutters;k(t);for(var n=0;n<i.length;++n){var r=i[n],o=t.appendChild(V("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",qn(e)}function Zn(e){var t=B(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}Xn.prototype.signal=function(e,t){ct(e,t)&&this.events.push(arguments)},Xn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)lt.apply(null,this.events[e])};var Qn=0,Jn=null;function er(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function tr(e){e=er(e);return e.x*=Jn,e.y*=Jn,e}function ir(e,t){var i=er(t),n=i.x,r=i.y,o=e.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(n&&l||r&&s){if(r&&g&&h)e:for(var d=t.target,c=o.view;d!=a;d=d.parentNode)for(var u=0;u<c.length;u++)if(c[u].node==d){e.display.currentWheelTarget=d;break e}if(n&&!f&&!p&&null!=Jn)return r&&s&&wn(e,Math.max(0,a.scrollTop+r*Jn)),zn(e,Math.max(0,a.scrollLeft+n*Jn)),(!r||r&&s)&&ft(t),void(o.wheelStartX=null);r&&null!=Jn&&(i=r*Jn,s=(l=e.doc.scrollTop)+o.wrapper.clientHeight,i<0?l=Math.max(0,l+i-50):s=Math.min(e.doc.height,s+i+50),Un(e,{top:l,bottom:s})),Qn<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=n,o.wheelDY=r,setTimeout(function(){var e,t;null!=o.wheelStartX&&(t=a.scrollLeft-o.wheelStartX,t=(e=a.scrollTop-o.wheelStartY)&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX,o.wheelStartX=o.wheelStartY=null,t&&(Jn=(Jn*Qn+t)/(Qn+1),++Qn))},200)):(o.wheelDX+=n,o.wheelDY+=r))}}_?Jn=-.53:f?Jn=15:o?Jn=-.7:s&&(Jn=-1/3);var nr=function(e,t){this.ranges=e,this.primIndex=t};nr.prototype.primary=function(){return this.ranges[this.primIndex]},nr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(!ve(i.anchor,n.anchor)||!ve(i.head,n.head))return!1}return!0},nr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new rr(_e(this.ranges[t].anchor),_e(this.ranges[t].head));return new nr(e,this.primIndex)},nr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},nr.prototype.contains=function(e,t){t=t||e;for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(0<=ge(t,n.from())&&ge(e,n.to())<=0)return i}return-1};var rr=function(e,t){this.anchor=e,this.head=t};function or(e,t){var i=e[t];e.sort(function(e,t){return ge(e.from(),t.from())}),t=B(e,i);for(var n=1;n<e.length;n++){var r,o,a=e[n],l=e[n-1];0<=ge(l.to(),a.from())&&(r=me(l.from(),a.from()),o=xe(l.to(),a.to()),l=l.empty()?a.from()==a.head:l.from()==l.head,n<=t&&--t,e.splice(--n,2,new rr(l?o:r,l?r:o)))}return new nr(e,t)}function ar(e,t){return new nr([new rr(e,t||e)],0)}function lr(e){return e.text?pe(e.from.line+e.text.length-1,U(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function sr(e,t){if(ge(e,t.from)<0)return e;if(ge(e,t.to)<=0)return lr(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=lr(t).ch-t.to.ch),pe(i,n)}function dr(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var r=e.sel.ranges[n];i.push(new rr(sr(r.anchor,t),sr(r.head,t)))}return or(i,e.sel.primIndex)}function cr(e,t,i){return e.line==t.line?pe(i.line,e.ch-t.ch+i.ch):pe(i.line+(e.line-t.line),e.ch)}function ur(e){e.doc.mode=Kt(e.options,e.doc.modeOption),fr(e)}function fr(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Wn(e,100),e.state.modeGen++,e.curOp&&On(e)}function hr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==U(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function pr(e,o,t,a){function r(e){return t?t[e]:null}function i(e,t,i){var n,r;n=t,r=i,t=a,(i=e).text=n,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),null!=i.order&&(i.order=null),Ce(i),Te(i,r),(t=t?t(i):1)!=i.height&&de(i,t),ai(e,"change",e,o)}function n(e,t){for(var i=[],n=e;n<t;++n)i.push(new Ut(c[n],r(n),a));return i}var l,s=o.from,d=o.to,c=o.text,u=ae(e,s.line),f=ae(e,d.line),h=U(c),p=r(c.length-1),g=d.line-s.line;o.full?(e.insert(0,n(0,c.length)),e.remove(c.length,e.size-c.length)):hr(e,o)?(l=n(0,c.length-1),i(f,f.text,p),g&&e.remove(s.line,g),l.length&&e.insert(s.line,l)):u==f?1==c.length?i(u,u.text.slice(0,s.ch)+h+u.text.slice(d.ch),p):((l=n(1,c.length-1)).push(new Ut(h+u.text.slice(d.ch),p,a)),i(u,u.text.slice(0,s.ch)+c[0],r(0)),e.insert(s.line+1,l)):1==c.length?(i(u,u.text.slice(0,s.ch)+c[0]+f.text.slice(d.ch),r(0)),e.remove(s.line+1,g)):(i(u,u.text.slice(0,s.ch)+c[0],r(0)),i(f,h+f.text.slice(d.ch),p),p=n(1,c.length-1),1<g&&e.remove(s.line+1,g-1),e.insert(s.line+1,p)),ai(e,"change",e,o)}function gr(e,l,s){!function e(t,i,n){if(t.linked)for(var r=0;r<t.linked.length;++r){var o,a=t.linked[r];a.doc!=i&&(o=n&&a.sharedHist,s&&!o||(l(a.doc,o),e(a.doc,t,o)))}}(e,null,!0)}function vr(e,t){if(t.cm)throw new Error("This document is already in use.");Qi((e.doc=t).cm=e),ur(e),_r(e),e.options.lineWrapping||Xe(e),e.options.mode=t.modeOption,On(e)}function _r(e){("rtl"==e.doc.direction?A:z)(e.display.lineDiv,"CodeMirror-rtl")}function xr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function mr(e,t){var i={from:_e(t.from),to:lr(t),text:le(e,t.from,t.to)};return zr(e,i,t.from.line,t.to.line+1),gr(e,function(e){return zr(e,i,t.from.line,t.to.line+1),0},!0),i}function yr(e){for(;e.length;){if(!U(e).ranges)break;e.pop()}}function br(e,t,i,n){var r=e.history;r.undone.length=0;var o,a,l=+new Date;if((r.lastOp==n||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=(s=r).lastOp==n?(yr(s.done),U(s.done)):s.done.length&&!U(s.done).ranges?U(s.done):1<s.done.length&&!s.done[s.done.length-2].ranges?(s.done.pop(),U(s.done)):void 0))a=U(o.changes),0==ge(t.from,t.to)&&0==ge(t.from,a.to)?a.to=lr(t):o.changes.push(mr(e,t));else{var s=U(r.done);for(s&&s.ranges||Lr(e.sel,r.done),o={changes:[mr(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=l,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=t.origin,a||lt(e,"historyAdded")}function wr(e,t,i,n){var r,o,a,l=e.history,s=n&&n.origin;i==l.lastSelOp||s&&l.lastSelOrigin==s&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==s||(r=e,o=s,a=U(l.done),e=t,"*"==(o=o.charAt(0))||"+"==o&&a.ranges.length==e.ranges.length&&a.somethingSelected()==e.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)))?l.done[l.done.length-1]=t:Lr(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=s,l.lastSelOp=i,n&&!1!==n.clearRedo&&yr(l.undone)}function Lr(e,t){var i=U(t);i&&i.ranges&&i.equals(e)||t.push(e)}function zr(t,i,e,n){var r=i["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,n),function(e){e.markedSpans&&((r=r||(i["spans_"+t.id]={}))[o]=e.markedSpans),++o})}function kr(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=[],r=0;r<t.text.length;++r)n.push(function(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t=t||e.slice(0,i):t&&t.push(e[i]);return t?t.length?t:null:e}(i[r]));return n}function Sr(e,t){var i=kr(e,t),n=Ve(e,t);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var o=i[r],a=n[r];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],d=0;d<o.length;++d)if(o[d].marker==s.marker)continue e;o.push(s)}else a&&(i[r]=a)}return i}function Vr(e,t,i){for(var n=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)n.push(i?nr.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];n.push({changes:l});for(var s=0;s<a.length;++s){var d,c=a[s];if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(d=u.match(/^spans_(\d+)$/))&&-1<B(t,Number(d[1]))&&(U(l)[u]=c[u],delete c[u])}}}return n}function Kr(e,t,i,n){if(n){n=e.anchor;return i&&((e=ge(t,n)<0)!=ge(i,n)<0?(n=t,t=i):e!=ge(t,i)<0&&(t=i)),new rr(n,t)}return new rr(i||t,t)}function Cr(e,t,i,n,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Nr(e,new nr([Kr(e.sel.primary(),t,i,r)],0),n)}function Tr(e,t,i){for(var n=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=Kr(e.sel.ranges[o],t[o],null,r);Nr(e,or(n,e.sel.primIndex),i)}function Ar(e,t,i,n){var r=e.sel.ranges.slice(0);r[t]=i,Nr(e,or(r,e.sel.primIndex),n)}function Er(e,t,i,n){Nr(e,ar(t,i),n)}function Mr(e,t,i){var n=e.history.done,r=U(n);r&&r.ranges?Ir(e,n[n.length-1]=t,i):Nr(e,t,i)}function Nr(e,t,i){Ir(e,t,i),wr(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Ir(e,t,i){var n,r;(ct(e,"beforeSelectionChange")||e.cm&&ct(e.cm,"beforeSelectionChange"))&&(n=e,r=i,r={ranges:(o=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new rr(be(n,e[t].anchor),be(n,e[t].head))},origin:r&&r.origin},lt(n,"beforeSelectionChange",n,r),n.cm&&lt(n.cm,"beforeSelectionChange",n.cm,r),t=r.ranges!=o.ranges?or(r.ranges,r.ranges.length-1):o);var o=i&&i.bias||(ge(t.primary().head,e.sel.primary().head)<0?-1:1);Dr(e,Br(e,t,o,!0)),i&&!1===i.scroll||!e.cm||xn(e.cm)}function Dr(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,dt(e.cm)),ai(e,"cursorActivity",e))}function Or(e){Dr(e,Br(e,e.sel,null,!1))}function Br(e,t,i,n){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Pr(e,a.anchor,l&&l.anchor,i,n),l=Pr(e,a.head,l&&l.head,i,n);!r&&s==a.anchor&&l==a.head||((r=r||t.ranges.slice(0,o))[o]=new rr(s,l))}return r?or(r,t.primIndex):t}function Rr(e,t,i,n,r){var o=ae(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(r&&(lt(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(s.atomic){if(i){var d=s.find(n<0?1:-1),l=void 0;if((n<0?s.inclusiveRight:s.inclusiveLeft)&&(d=Hr(e,d,-n,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(l=ge(d,i))&&(n<0?l<0:0<l))return Rr(e,d,t,n,r)}d=s.find(n<0?-1:1);return(n<0?s.inclusiveLeft:s.inclusiveRight)&&(d=Hr(e,d,n,d.line==t.line?o:null)),d?Rr(e,d,t,n,r):null}}}return t}function Pr(e,t,i,n,r){n=n||1,n=Rr(e,t,i,n,r)||!r&&Rr(e,t,i,n,!0)||Rr(e,t,i,-n,r)||!r&&Rr(e,t,i,-n,!0);return n||(e.cantEdit=!0,pe(e.first,0))}function Hr(e,t,i,n){return i<0&&0==t.ch?t.line>e.first?be(e,pe(t.line-1)):null:0<i&&t.ch==(n||ae(e,t.line)).text.length?t.line<e.first+e.size-1?pe(t.line+1,0):null:new pe(t.line,t.ch+i)}function Wr(e){e.setSelection(pe(e.firstLine(),0),pe(e.lastLine()),H)}function jr(r,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,i,n){e&&(o.from=be(r,e)),t&&(o.to=be(r,t)),i&&(o.text=i),void 0!==n&&(o.origin=n)}),lt(r,"beforeChange",r,o),r.cm&&lt(r.cm,"beforeChange",r.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Xr(e,t,i){if(e.cm){if(!e.cm.curOp)return Nn(e.cm,Xr)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(ct(e,"beforeChange")||e.cm&&ct(e.cm,"beforeChange"))||(t=jr(e,t,!0))){var n=Le&&!i&&function(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=B(n,i)||(n=n||[]).push(i)}}),!n)return null;for(var r=[{from:t,to:i}],o=0;o<n.length;++o)for(var a=n[o],l=a.find(0),s=0;s<r.length;++s){var d,c,u,f=r[s];ge(f.to,l.from)<0||0<ge(f.from,l.to)||(d=[s,1],c=ge(f.from,l.from),u=ge(f.to,l.to),(c<0||!a.inclusiveLeft&&!c)&&d.push({from:f.from,to:l.from}),(0<u||!a.inclusiveRight&&!u)&&d.push({from:l.to,to:f.to}),r.splice.apply(r,d),s+=d.length-3)}return r}(e,t.from,t.to);if(n)for(var r=n.length-1;0<=r;--r)Fr(e,{from:n[r].from,to:n[r].to,text:r?[""]:t.text,origin:t.origin});else Fr(e,t)}}function Fr(e,i){var t,n;1==i.text.length&&""==i.text[0]&&0==ge(i.from,i.to)||(t=dr(e,i),br(e,i,t,e.cm?e.cm.curOp.id:NaN),qr(e,i,t,Ve(e,i)),n=[],gr(e,function(e,t){t||-1!=B(n,e.history)||(Qr(e.history,i),n.push(e.history)),qr(e,i,null,Ve(e,i))}))}function $r(r,o,e){var t=r.cm&&r.cm.state.suppressEdits;if(!t||e){for(var a,i=r.history,n=r.sel,l="undo"==o?i.done:i.undone,s="undo"==o?i.undone:i.done,d=0;d<l.length&&(a=l[d],e?!a.ranges||a.equals(r.sel):a.ranges);d++);if(d!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=l.pop()).ranges){if(t)return void l.push(a);break}if(Lr(a,s),e&&!a.equals(r.sel))return void Nr(r,a,{clearRedo:!1});n=a}var c=[];Lr(n,s),s.push({changes:c,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var u=ct(r,"beforeChange")||r.cm&&ct(r.cm,"beforeChange"),f=a.changes.length-1;0<=f;--f){var h=function(e){var i=a.changes[e];if(i.origin=o,u&&!jr(r,i,!1))return l.length=0,{};c.push(mr(r,i));var t=e?dr(r,i):U(l);qr(r,i,t,Sr(r,i)),!e&&r.cm&&r.cm.scrollIntoView({from:i.from,to:lr(i)});var n=[];gr(r,function(e,t){t||-1!=B(n,e.history)||(Qr(e.history,i),n.push(e.history)),qr(e,i,null,Sr(e,i))})}(f);if(h)return h.v}}}}function Ur(e,t){if(0!=t&&(e.first+=t,e.sel=new nr(q(e.sel.ranges,function(e){return new rr(pe(e.anchor.line+t,e.anchor.ch),pe(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){On(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)Bn(e.cm,n,"gutter")}}function qr(e,t,i,n){if(e.cm&&!e.cm.curOp)return Nn(e.cm,qr)(e,t,i,n);var r,o,a,l,s,d,c,u,f;t.to.line<e.first?Ur(e,t.text.length-1-(t.to.line-t.from.line)):t.from.line>e.lastLine()||(t.from.line<e.first&&(Ur(e,c=t.text.length-1-(e.first-t.from.line)),t={from:pe(e.first,0),to:pe(t.to.line+c,t.to.ch),text:[U(t.text)],origin:t.origin}),f=e.lastLine(),t.to.line>f&&(t={from:t.from,to:pe(f,ae(e,f).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),i=i||dr(e,t),e.cm?(r=e.cm,o=t,a=n,l=r.doc,s=r.display,d=o.from,c=o.to,u=!1,f=d.line,r.options.lineWrapping||(f=ce(Be(ae(l,d.line))),l.iter(f,c.line+1,function(e){if(e==s.maxLine)return u=!0})),-1<l.sel.contains(o.from,o.to)&&dt(r),pr(l,o,a,Zi(r)),r.options.lineWrapping||(l.iter(f,d.line+o.text.length,function(e){var t=je(e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,u=!1)}),u&&(r.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,n=t-1;i<n;n--){var r=ae(e,n).stateAfter;if(r&&(!(r instanceof It)||n+r.lookAhead<t)){i=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}(l,d.line),Wn(r,400),f=o.text.length-(c.line-d.line)-1,o.full?On(r):d.line!=c.line||1!=o.text.length||hr(r.doc,o)?On(r,d.line,c.line+1,f):Bn(r,d.line,"text"),l=ct(r,"changes"),((f=ct(r,"change"))||l)&&(o={from:d,to:c,text:o.text,removed:o.removed,origin:o.origin},f&&ai(r,"change",r,o),l&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(o)),r.display.selForContextMenu=null):pr(e,t,n),Ir(e,i,H))}function Gr(e,t,i,n,r){var o;ge(n=n||i,i)<0&&(i=(o=[n,i])[0],n=o[1]),"string"==typeof t&&(t=e.splitLines(t)),Xr(e,{from:i,to:n,text:t,origin:r})}function Yr(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Zr(e,t,i,n){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)Yr(o.ranges[l].anchor,t,i,n),Yr(o.ranges[l].head,t,i,n)}else{for(var s=0;s<o.changes.length;++s){var d=o.changes[s];if(i<d.from.line)d.from=pe(d.from.line+n,d.from.ch),d.to=pe(d.to.line+n,d.to.ch);else if(t<=d.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function Qr(e,t){var i=t.from.line,n=t.to.line,t=t.text.length-(n-i)-1;Zr(e.done,i,n,t),Zr(e.undone,i,n,t)}function Jr(e,t,i,n){var r=t,o=t;return"number"==typeof t?o=ae(e,ye(e,t)):r=ce(t),null==r?null:(n(o,r)&&e.cm&&Bn(e.cm,r,i),o)}function eo(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function to(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var r=e[n];t+=r.chunkSize(),i+=r.height,r.parent=this}this.size=t,this.height=i,this.parent=null}rr.prototype.from=function(){return me(this.anchor,this.head)},rr.prototype.to=function(){return xe(this.anchor,this.head)},rr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},eo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i,n=e,r=e+t;n<r;++n){var o=this.lines[n];this.height-=o.height,(i=o).parent=null,Ce(i),ai(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;e<n;++e)if(i(this.lines[e]))return!0}},to.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i,n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e),l=r.height;if(r.removeInner(e,a),this.height-=l-r.height,o==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=o}this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof eo))&&(i=[],this.collapse(i),this.children=[new eo(i)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,i),r.lines&&50<r.lines.length){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var s=new eo(r.lines.slice(l,l+=25));r.height-=s.height,this.children.splice(++n,0,s),s.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t,i=new to(e.children.splice(e.children.length-5,5))}while(e.parent?(e.size-=i.size,e.height-=i.height,t=B(e.parent.children,e),e.parent.children.splice(t+1,0,i)):(((t=new to(e.children)).parent=e).children=[t,i],e=t),i.parent=e.parent,10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,i))return!0;if(0==(t-=a))break;e=0}else e-=o}}};function io(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t}function no(e,t,i){We(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&_n(e,i)}io.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=ce(i);if(null!=n&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(i.widgets=null);var o=gi(this);de(i,Math.max(0,i.height-o)),e&&(Mn(e,function(){no(e,i,-o),Bn(e,n,"widget")}),ai(e,"lineWidgetCleared",e,this,n))}},io.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,n=this.line;this.height=null;var r=gi(this)-t;r&&(He(this.doc,n)||de(n,n.height+r),i&&Mn(i,function(){i.curOp.forceUpdate=!0,no(i,n,r),ai(i,"lineWidgetChanged",i,e,ce(n))}))},ut(io);var ro=0,oo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ro};function ao(t,i,n,e,r){if(e&&e.shared)return function(e,i,n,r,o){(r=I(r)).shared=!1;var a=[ao(e,i,n,r,o)],l=a[0],s=r.widgetNode;return gr(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),a.push(ao(e,be(e,i),be(e,n),r,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;l=U(a)}),new lo(a,l)}(t,i,n,e,r);if(t.cm&&!t.cm.curOp)return Nn(t.cm,ao)(t,i,n,e,r);var o=new oo(t,r),r=ge(i,n);if(e&&I(e,o,!1),0<r||0==r&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=K("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Oe(t,i.line,i,n,o)||i.line!=n.line&&Oe(t,n.line,i,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ze=!0}o.addToHistory&&br(t,{from:i,to:n,origin:"markText"},t.sel,NaN);var a,l=i.line,s=t.cm;if(t.iter(l,n.line+1,function(e){var t;s&&o.collapsed&&!s.options.lineWrapping&&Be(e)==s.display.maxLine&&(a=!0),o.collapsed&&l!=i.line&&de(e,0),t=e,e=new ke(o,l==i.line?i.ch:null,l==n.line?n.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t),++l}),o.collapsed&&t.iter(i.line,n.line+1,function(e){He(t,e)&&de(e,0)}),o.clearOnEnter&&rt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Le=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++ro,o.atomic=!0),s){if(a&&(s.curOp.updateMaxLine=!0),o.collapsed)On(s,i.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var d=i.line;d<=n.line;d++)Bn(s,d,"text");o.atomic&&Or(s.doc),ai(s,"markerAdded",s,o)}return o}oo.prototype.clear=function(){if(!this.explicitlyCleared){var e,t=this.doc.cm,i=t&&!t.curOp;i&&An(t),!ct(this,"clear")||(e=this.find())&&ai(this,"clear",e.from,e.to);for(var n=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Se(a.markedSpans,this);t&&!this.collapsed?Bn(t,ce(a),"text"):t&&(null!=l.to&&(r=ce(a)),null!=l.from&&(n=ce(a))),a.markedSpans=function(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i=i||[]).push(e[n]);return i}(a.markedSpans,l),null==l.from&&this.collapsed&&!He(this.doc,a)&&t&&de(a,Ui(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var d=Be(this.lines[s]),c=je(d);c>t.display.maxLineLength&&(t.display.maxLine=d,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&On(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Or(t.doc)),t&&ai(t,"markerCleared",t,this,n,r),i&&En(t),this.parent&&this.parent.clear()}},oo.prototype.find=function(e,t){var i,n;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Se(o.markedSpans,this);if(null!=a.from&&(i=pe(t?o:ce(o),a.from),-1==e))return i;if(null!=a.to&&(n=pe(t?o:ce(o),a.to),1==e))return n}return i&&{from:i,to:n}},oo.prototype.changed=function(){var i=this,n=this.find(-1,!0),r=this,o=this.doc.cm;n&&o&&Mn(o,function(){var e=n.line,t=ce(n.line),t=ki(o,t);t&&(Ai(t),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,He(r.doc,e)||null==r.height||(t=r.height,r.height=null,(t=gi(r)-t)&&de(e,e.height+t)),ai(o,"markerChanged",o,i)})},oo.prototype.attachLine=function(e){var t;!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)),this.lines.push(e)},oo.prototype.detachLine=function(e){this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)},ut(oo);var lo=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function so(e){return e.findMarks(pe(e.first,0),e.clipPos(pe(e.lastLine())),function(e){return e.parent})}function co(r){for(var o=0;o<r.length;o++)!function(){var e=r[o],t=[e.primary.doc];gr(e.primary.doc,function(e){return t.push(e)});for(var i=0;i<e.markers.length;i++){var n=e.markers[i];-1==B(t,n.doc)&&(n.parent=null,e.markers.splice(i--,1))}}()}lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ai(this,"clear")}},lo.prototype.find=function(e,t){return this.primary.find(e,t)},ut(lo);var uo=0,fo=function(e,t,i,n,r){if(!(this instanceof fo))return new fo(e,t,i,n,r);null==i&&(i=0),to.call(this,[new eo([new Ut("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1;i=pe(this.modeFrontier=this.highlightFrontier=i,0);this.sel=ar(i),this.history=new xr(null),this.id=++uo,this.modeOption=t,this.lineSep=n,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),pr(this,{from:i,to:i,text:e}),Nr(this,ar(i),H)};fo.prototype=Y(to.prototype,{constructor:fo,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=se(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Dn(function(e){var t=pe(this.first,0),i=this.first+this.size-1;Xr(this,{from:t,to:pe(i,ae(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&mn(this.cm,0,0),Nr(this,ar(t),H)}),replaceRange:function(e,t,i,n){Gr(this,e,t=be(this,t),i=i?be(this,i):t,n)},getRange:function(e,t,i){t=le(this,be(this,e),be(this,t));return!1===i?t:t.join(i||this.lineSeparator())},getLine:function(e){e=this.getLineHandle(e);return e&&e.text},getLineHandle:function(e){if(fe(this,e))return ae(this,e)},getLineNumber:ce,getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=ae(this,e)),Be(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return be(this,e)},getCursor:function(e){var t=this.sel.primary(),t=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from();return t},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Dn(function(e,t,i){Er(this,be(this,"number"==typeof e?pe(e,t||0):e),null,i)}),setSelection:Dn(function(e,t,i){Er(this,be(this,e),be(this,t||e),i)}),extendSelection:Dn(function(e,t,i){Cr(this,be(this,e),t&&be(this,t),i)}),extendSelections:Dn(function(e,t){Tr(this,we(this,e),t)}),extendSelectionsBy:Dn(function(e,t){Tr(this,we(this,q(this.sel.ranges,e)),t)}),setSelections:Dn(function(e,t,i){if(e.length){for(var n=[],r=0;r<e.length;r++)n[r]=new rr(be(this,e[r].anchor),be(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Nr(this,or(n,t),i)}}),addSelection:Dn(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new rr(be(this,e),be(this,t||e))),Nr(this,or(n,n.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i=0;i<t.length;i++)var n=le(this,t[i].from(),t[i].to()),r=r?r.concat(n):n;return!1===e?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=le(this,i[n].from(),i[n].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[n]=r}return t},replaceSelection:function(e,t,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:Dn(function(e,t,i){for(var n=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];n[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:i}}for(var t=t&&"end"!=t&&function(e,t,i){for(var n=[],r=d=pe(e.first,0),o=0;o<t.length;o++){var a=t[o],l=cr(a.from,d,r),s=cr(lr(a),d,r),d=a.to,r=s;"around"==i?(a=ge((a=e.sel.ranges[o]).head,a.anchor)<0,n[o]=new rr(a?s:l,a?l:s)):n[o]=new rr(l,l)}return new nr(n,e.sel.primIndex)}(this,n,t),l=n.length-1;0<=l;l--)Xr(this,n[l]);t?Mr(this,t):this.cm&&xn(this.cm)}),undo:Dn(function(){$r(this,"undo")}),redo:Dn(function(){$r(this,"redo")}),undoSelection:Dn(function(){$r(this,"undo",!0)}),redoSelection:Dn(function(){$r(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new xr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vr(this.history.done),undone:Vr(this.history.undone)}},setHistory:function(e){var t=this.history=new xr(this.history.maxGeneration);t.done=Vr(e.done.slice(0),null,!0),t.undone=Vr(e.undone.slice(0),null,!0)},setGutterMarker:Dn(function(e,i,n){return Jr(this,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[i]=n)&&ee(t)&&(e.gutterMarkers=null),1})}),clearGutter:Dn(function(t){var i=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&Jr(i,e,"gutter",function(){return e.gutterMarkers[t]=null,ee(e.gutterMarkers)&&(e.gutterMarkers=null),1})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!fe(this,e))return null;if(!(e=ae(this,t=e)))return null}else if(null==(t=ce(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Dn(function(e,i,n){return Jr(this,e,"gutter"==i?"gutter":"class",function(e){var t="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(e[t]){if(w(n).test(e[t]))return;e[t]+=" "+n}else e[t]=n;return 1})}),removeLineClass:Dn(function(e,o,a){return Jr(this,e,"gutter"==o?"gutter":"class",function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=e[t];if(i){if(null==a)e[t]=null;else{var n=i.match(w(a));if(!n)return;var r=n.index+n[0].length;e[t]=i.slice(0,n.index)+(n.index&&r!=i.length?" ":"")+i.slice(r)||null}return 1}})}),addLineWidget:Dn(function(e,t,i){return e=e,r=new io(n=this,t,i),(o=n.cm)&&r.noHScroll&&(o.display.alignWidgets=!0),Jr(n,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);return null==r.insertAt?t.push(r):t.splice(Math.min(t.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!He(n,e)&&(t=We(e)<n.scrollTop,de(e,e.height+gi(r)),t&&_n(o,r.height),o.curOp.forceUpdate=!0),1}),o&&ai(o,"lineWidgetAdded",o,r,"number"==typeof e?e:ce(e)),r;var n,r,o}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return ao(this,be(this,e),be(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){t={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ao(this,e=be(this,e),e,t,"bookmark")},findMarksAt:function(e){var t=[],i=ae(this,(e=be(this,e)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(r,o,a){r=be(this,r),o=be(this,o);var l=[],s=r.line;return this.iter(r.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;i++){var n=t[i];null!=n.to&&s==r.line&&r.ch>=n.to||null==n.from&&s!=r.line||null!=n.from&&s==o.line&&n.from>=o.ch||a&&!a(n.marker)||l.push(n.marker.parent||n.marker)}++s}),l},getAllMarks:function(){var n=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;++i)null!=t[i].from&&n.push(t[i].marker)}),n},posFromIndex:function(t){var i,n=this.first,r=this.lineSeparator().length;return this.iter(function(e){e=e.text.length+r;if(t<e)return i=t,!0;t-=e,++n}),be(this,pe(n,i))},indexFromPos:function(e){var t=(e=be(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+i}),t},copy:function(e){var t=new fo(se(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e=e||{};var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);t=new fo(se(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:e.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.find(),o=e.clipPos(r.from),r=e.clipPos(r.to);ge(o,r)&&(r=ao(e,o,r,n.primary,n.primary.type),n.markers.push(r),r.parent=n)}}(t,so(this)),t},unlinkDoc:function(e){var t;if(e instanceof ca&&(e=e.doc),this.linked)for(var i=0;i<this.linked.length;++i)if(this.linked[i].doc==e){this.linked.splice(i,1),e.unlinkDoc(this),co(so(this));break}e.history==this.history&&(t=[e.id],gr(e,function(e){return t.push(e.id)},!0),e.history=new xr(null),e.history.done=Vr(this.history.done,t),e.history.undone=Vr(this.history.undone,t))},iterLinkedDocs:function(e){gr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Dn(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Mn(t=this.cm,function(){_r(t),On(t)}))})}),fo.prototype.eachLine=fo.prototype.iter;var ho=0;function po(e){var n=this;if(go(n),!st(n,e)&&!vi(n.display,e)){ft(e),_&&(ho=+new Date);var r=Ji(n,e,!0),t=e.dataTransfer.files;if(r&&!n.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var o=t.length,a=Array(o),l=0,i=0;i<o;++i)!function(e,t){var i;n.options.allowDropFileTypes&&-1==B(n.options.allowDropFileTypes,e.type)||((i=new FileReader).onload=Nn(n,function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),a[t]=e,++l==o&&(e={from:r=be(n.doc,r),to:r,text:n.doc.splitLines(a.join(n.doc.lineSeparator())),origin:"paste"},Xr(n.doc,e),Mr(n.doc,ar(r,lr(e))))}),i.readAsText(e))}(t[i],i);else{if(n.state.draggingText&&-1<n.doc.sel.contains(r))return n.state.draggingText(e),void setTimeout(function(){return n.display.input.focus()},20);try{var s,d=e.dataTransfer.getData("Text");if(d){if(n.state.draggingText&&!n.state.draggingText.copy&&(s=n.listSelections()),Ir(n.doc,ar(r,r)),s)for(var c=0;c<s.length;++c)Gr(n.doc,"",s[c].anchor,s[c].head,"drag");n.replaceSelection(d,"around","paste"),n.display.input.focus()}}catch(e){}}}}function go(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function vo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}var _o=!1;function xo(){var e;_o||(rt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,vo(mo)},100))}),rt(window,"blur",function(){return vo(cn)}),_o=!0)}function mo(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var yo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},bo=0;bo<10;bo++)yo[bo+48]=yo[bo+96]=String(bo);for(var wo=65;wo<=90;wo++)yo[wo]=String.fromCharCode(wo);for(var Lo=1;Lo<=12;Lo++)yo[Lo+111]=yo[Lo+63235]="F"+Lo;var zo={};function ko(e){var t,i,n,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function So(e){var t,i,n={};for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!/^(name|fallthrough|(de|at)tach)$/.test(t))if("..."!=r){for(var o=q(t.split(" "),ko),a=0;a<o.length;a++){var l=void 0,s=void 0,l=a==o.length-1?(s=o.join(" "),r):(s=o.slice(0,a+1).join(" "),"..."),d=n[s];if(d){if(d!=l)throw new Error("Inconsistent bindings for "+s)}else n[s]=l}delete e[t]}else delete e[t]}for(i in n)e[i]=n[i];return e}function Vo(e,t,i,n){var r=(t=Ao(t)).call?t.call(e,n):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&i(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vo(e,t.fallthrough,i,n);for(var o=0;o<t.fallthrough.length;o++){var a=Vo(e,t.fallthrough[o],i,n);if(a)return a}}}function Ko(e){e="string"==typeof e?e:yo[e.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Co(e,t,i){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(y?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(y?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function To(e,t){if(p&&34==e.keyCode&&e.char)return!1;var i=yo[e.keyCode];return null!=i&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(i=e.code),Co(i,e,t))}function Ao(e){return"string"==typeof e?zo[e]:e}function Eo(t,e){for(var i=t.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var o=e(i[r]);n.length&&ge(o.from,U(n).to)<=0;){var a=n.pop();if(ge(a.from,o.from)<0){o.from=a.from;break}}n.push(o)}Mn(t,function(){for(var e=n.length-1;0<=e;e--)Gr(t.doc,"",n[e].from,n[e].to,"+delete");xn(t)})}function Mo(e,t,i){i=ne(e.text,t+i,i);return i<0||i>e.text.length?null:i}function No(e,t,i){e=Mo(e,t.ch,i);return null==e?null:new pe(t.line,e,i<0?"after":"before")}function Io(e,t,i,n,r){if(e){var o=it(i,t.doc.direction);if(o){var a,l,s,e=r<0?U(o):o[0],o=r<0==(1==e.level)?"after":"before";return 0<e.level||"rtl"==t.doc.direction?(a=Si(t,i),l=r<0?i.text.length-1:0,s=Vi(t,a,l).top,l=re(function(e){return Vi(t,a,e).top==s},r<0==(1==e.level)?e.from:e.to-1,l),"before"==o&&(l=Mo(i,l,1))):l=r<0?e.to:e.from,new pe(n,l,o)}}return new pe(n,r<0?i.text.length:0,r<0?"before":"after")}function Do(t,i,l,e){var s=it(i,t.doc.direction);if(!s)return No(i,l,e);l.ch>=i.text.length?(l.ch=i.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var n=$e(s,l.ch,l.sticky),r=s[n];if("ltr"==t.doc.direction&&r.level%2==0&&(0<e?r.to>l.ch:r.from<l.ch))return No(i,l,e);function d(e,t){return Mo(i,e instanceof pe?e.ch:e,t)}function o(e){return t.options.lineWrapping?(a=a||Si(t,i),Fi(t,i,a,e)):{begin:0,end:i.text.length}}var a,c=o("before"==l.sticky?d(l,-1):l.ch);if("rtl"==t.doc.direction||1==r.level){var u=1==r.level==e<0,f=d(l,u?1:-1);if(null!=f&&(u?f<=r.to&&f<=c.end:f>=r.from&&f>=c.begin)){var h=u?"before":"after";return new pe(l.line,f,h)}}h=function(e,t,i){for(var n=function(e,t){return t?new pe(l.line,d(e,1),"before"):new pe(l.line,e,"after")};0<=e&&e<s.length;e+=t){var r=s[e],o=0<t==(1!=r.level),a=o?i.begin:d(i.end,-1);if(r.from<=a&&a<r.to)return n(a,o);if(a=o?r.from:d(r.to,-1),i.begin<=a&&a<i.end)return n(a,o)}},n=h(n+e,e,c);if(n)return n;c=0<e?c.end:d(c.begin,-1);return null==c||0<e&&c==i.text.length||!(n=h(0<e?0:s.length-1,e,o(c)))?null:n}zo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},zo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},zo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},zo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},zo.default=g?zo.macDefault:zo.pcDefault;var Oo={selectAll:Wr,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),H)},killLine:function(i){return Eo(i,function(e){if(e.empty()){var t=ae(i.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<i.lastLine()?{from:e.head,to:pe(e.head.line+1,0)}:{from:e.head,to:pe(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Eo(t,function(e){return{from:pe(e.from().line,0),to:be(t.doc,pe(e.to().line+1,0))}})},delLineLeft:function(e){return Eo(e,function(e){return{from:pe(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(i){return Eo(i,function(e){var t=i.charCoords(e.head,"div").top+5;return{from:i.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(i){return Eo(i,function(e){var t=i.charCoords(e.head,"div").top+5,t=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:t}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(pe(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(pe(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Bo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Ro(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(e,t){var i=ae(e.doc,t),n=function(e){for(var t;t=De(e);)e=t.find(1,!0).line;return e}(i);n!=i&&(t=ce(n));return Io(!0,e,i,t,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){e=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div")},j)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){e=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:e},"div")},j)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(e){var t=i.cursorCoords(e.head,"div").top+5,t=i.coordsChar({left:0,top:t},"div");return t.ch<i.getLine(t.line).search(/\S/)?Ro(i,e.head):t},j)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,r=0;r<i.length;r++){var o=i[r].from(),o=D(e.getLine(o.line),o.ch,n);t.push($(n-o%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(a){return Mn(a,function(){for(var e,t,i,n=a.listSelections(),r=[],o=0;o<n.length;o++)n[o].empty()&&(e=n[o].head,(t=ae(a.doc,e.line).text)&&(e.ch==t.length&&(e=new pe(e.line,e.ch-1)),0<e.ch?(e=new pe(e.line,e.ch+1),a.replaceRange(t.charAt(e.ch-1)+t.charAt(e.ch-2),pe(e.line,e.ch-2),e,"+transpose")):e.line>a.doc.first&&((i=ae(a.doc,e.line-1).text)&&(e=new pe(e.line,1),a.replaceRange(t.charAt(0)+a.doc.lineSeparator()+i.charAt(i.length-1),pe(e.line-1,i.length-1),e,"+transpose")))),r.push(new rr(e,e)));a.setSelections(r)})},newlineAndIndent:function(n){return Mn(n,function(){for(var e=n.listSelections(),t=e.length-1;0<=t;t--)n.replaceRange(n.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");e=n.listSelections();for(var i=0;i<e.length;i++)n.indentLine(e[i].from().line,null,!0);xn(n)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Bo(e,t){var i=ae(e.doc,t),n=Be(i);return n!=i&&(t=ce(n)),Io(!0,e,n,t,1)}function Ro(e,t){var i=Bo(e,t.line),n=ae(e.doc,i.line),e=it(n,e.doc.direction);if(e&&0!=e[0].level)return i;n=Math.max(0,n.text.search(/\S/)),t=t.line==i.line&&t.ch<=n&&t.ch;return pe(i.line,t?0:n,i.sticky)}function Po(e,t,i){if("string"==typeof t&&!(t=Oo[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),r=t(e)!=P}finally{e.display.shift=n,e.state.suppressEdits=!1}return r}var Ho=new O;function Wo(e,t,i,n){var r=e.state.keySeq;if(r){if(Ko(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Ho.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),jo(e,r+" "+t,i,n))return!0}return jo(e,t,i,n)}function jo(e,t,i,n){n=function(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var r=Vo(t,e.state.keyMaps[n],i,e);if(r)return r}return e.options.extraKeys&&Vo(t,e.options.extraKeys,i,e)||Vo(t,e.options.keyMap,i,e)}(e,t,n);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&ai(e,"keyHandled",e,t,i),"handled"!=n&&"multi"!=n||(ft(i),an(e)),!!n}function Xo(t,e){var i=To(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?Wo(t,"Shift-"+i,e,function(e){return Po(t,e,!0)})||Wo(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Po(t,e)}):Wo(t,i,e,function(e){return Po(t,e)}))}var Fo=null;function $o(e){var t,i,n;function r(e){18!=e.keyCode&&e.altKey||(z(n,"CodeMirror-crosshair"),at(document,"keyup",r),at(document,"mouseover",r))}this.curOp.focus=T(),st(this,e)||(_&&x<11&&27==e.keyCode&&(e.returnValue=!1),t=e.keyCode,this.display.shift=16==t||e.shiftKey,i=Xo(this,e),p&&(Fo=i?t:null,!i&&88==t&&!Lt&&(g?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||(A(n=this.display.lineDiv,"CodeMirror-crosshair"),rt(document,"keyup",r),rt(document,"mouseover",r)))}function Uo(e){16==e.keyCode&&(this.doc.sel.shift=!1),st(this,e)}function qo(e){if(!(vi(this.display,e)||st(this,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var t,i=e.keyCode,n=e.charCode;if(p&&i==Fo)return Fo=null,void ft(e);p&&(!e.which||e.which<10)&&Xo(this,e)||"\b"!=(n=String.fromCharCode(null==n?i:n))&&(Wo(t=this,"'"+n+"'",e,function(e){return Po(t,e,!0)})||this.display.input.onKeyPress(e))}}var Go,Yo,Zo=function(e,t,i){this.time=e,this.pos=t,this.button=i};function Qo(e){var t,i,n,r,o,a=this,l=a.display;st(a,e)||l.activeTouch&&l.input.supportsTouch()||(l.input.ensurePolled(),l.shift=e.shiftKey,vi(l,e)?h||(l.scroller.draggable=!1,setTimeout(function(){return l.scroller.draggable=!0},100)):ta(a,e)||(t=Ji(a,e),i=_t(e),r=t?(n=t,r=i,o=+new Date,Yo&&Yo.compare(o,n,r)?(Go=Yo=null,"triple"):Go&&Go.compare(o,n,r)?(Yo=new Zo(o,n,r),Go=null,"double"):(Go=new Zo(o,n,r),Yo=null,"single")):"single",window.focus(),1==i&&a.state.selectingText&&a.state.selectingText(e),t&&function(i,e,n,t,r){var o="Click";"double"==t?o="Double"+o:"triple"==t&&(o="Triple"+o);return Wo(i,Co(o=(1==e?"Left":2==e?"Middle":"Right")+o,r),r,function(e){if("string"==typeof e&&(e=Oo[e]),!e)return!1;var t=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),t=e(i,n)!=P}finally{i.state.suppressEdits=!1}return t})}(a,i,t,r,e)||(1==i?t?function(e,t,i,n){_?setTimeout(N(ln,e),0):e.curOp.focus=T();var r,o=function(e,t,i){var n=e.getOption("configureMouse"),r=n?n(e,t,i):{};null==r.unit&&(n=v?i.shiftKey&&i.metaKey:i.altKey,r.unit=n?"rectangle":"single"==t?"char":"double"==t?"word":"line");null!=r.extend&&!e.doc.extend||(r.extend=e.doc.extend||i.shiftKey);null==r.addNew&&(r.addNew=g?i.metaKey:i.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(g?i.altKey:i.ctrlKey));return r}(e,i,n),a=e.doc.sel;(e.options.dragDrop&&yt&&!e.isReadOnly()&&"single"==i&&-1<(r=a.contains(t))&&(ge((r=a.ranges[r]).from(),t)<0||0<t.xRel)&&(0<ge(r.to(),t)||t.xRel<0)?function(t,i,n,r){var o=t.display,a=!1,l=Nn(t,function(e){h&&(o.scroller.draggable=!1),t.state.draggingText=!1,at(o.wrapper.ownerDocument,"mouseup",l),at(o.wrapper.ownerDocument,"mousemove",s),at(o.scroller,"dragstart",d),at(o.scroller,"drop",l),a||(ft(e),r.addNew||Cr(t.doc,n,null,null,r.extend),h||_&&9==x?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),s=function(e){a=a||10<=Math.abs(i.clientX-e.clientX)+Math.abs(i.clientY-e.clientY)},d=function(){return a=!0};h&&(o.scroller.draggable=!0),(t.state.draggingText=l).copy=!r.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),rt(o.wrapper.ownerDocument,"mouseup",l),rt(o.wrapper.ownerDocument,"mousemove",s),rt(o.scroller,"dragstart",d),rt(o.scroller,"drop",l),sn(t),setTimeout(function(){return o.input.focus()},20)}:function(f,e,h,p){var a=f.display,g=f.doc;ft(e);var v,_,x=g.sel,t=x.ranges;p.addNew&&!p.extend?(_=g.sel.contains(h),v=-1<_?t[_]:new rr(h,h)):(v=g.sel.primary(),_=g.sel.primIndex),"rectangle"==p.unit?(p.addNew||(v=new rr(h,h)),h=Ji(f,e,!0,!0),_=-1):(e=Jo(f,h,p.unit),v=p.extend?Kr(v,e.anchor,e.head,p.extend):e),p.addNew?-1==_?(_=t.length,Nr(g,or(t.concat([v]),_),{scroll:!1,origin:"*mouse"})):1<t.length&&t[_].empty()&&"char"==p.unit&&!p.extend?(Nr(g,or(t.slice(0,_).concat(t.slice(_+1)),0),{scroll:!1,origin:"*mouse"}),x=g.sel):Ar(g,_,v,W):(Nr(g,new nr([v],_=0),W),x=g.sel);var m=h;function l(e){if(0!=ge(m,e))if(m=e,"rectangle"==p.unit){for(var t=[],i=f.options.tabSize,n=D(ae(g,h.line).text,h.ch,i),r=D(ae(g,e.line).text,e.ch,i),o=Math.min(n,r),a=Math.max(n,r),l=Math.min(h.line,e.line),s=Math.min(f.lastLine(),Math.max(h.line,e.line));l<=s;l++){var d=ae(g,l).text,c=X(d,o,i);o==a?t.push(new rr(pe(l,c),pe(l,c))):d.length>c&&t.push(new rr(pe(l,c),pe(l,X(d,a,i))))}t.length||t.push(new rr(h,h)),Nr(g,or(x.ranges.slice(0,_).concat(t),_),{origin:"*mouse",scroll:!1}),f.scrollIntoView(e)}else{var u,n=v,r=Jo(f,e,p.unit),e=n.anchor,e=0<ge(r.anchor,e)?(u=r.head,me(n.from(),r.anchor)):(u=r.anchor,xe(n.to(),r.head)),r=x.ranges.slice(0);r[_]=function(e,t){var i=t.anchor,n=t.head,r=ae(e.doc,i.line);if(0==ge(i,n)&&i.sticky==n.sticky)return t;var o=it(r);if(!o)return t;var a=$e(o,i.ch,i.sticky),l=o[a];if(l.from!=i.ch&&l.to!=i.ch)return t;r=a+(l.from==i.ch==(1!=l.level)?0:1);if(0==r||r==o.length)return t;s=n.line!=i.line?0<(n.line-i.line)*("ltr"==e.doc.direction?1:-1):(e=$e(o,n.ch,n.sticky),s=e-a||(n.ch-i.ch)*(1==l.level?-1:1),e==r-1||e==r?s<0:0<s);var r=o[r+(s?-1:0)],s=s==(1==r.level),r=s?r.from:r.to,s=s?"after":"before";return i.ch==r&&i.sticky==s?t:new rr(new pe(i.line,r,s),n)}(f,new rr(be(g,e),u)),Nr(g,or(r,_),W)}}var s=a.wrapper.getBoundingClientRect(),d=0;function i(e){f.state.selectingText=!1,d=1/0,ft(e),a.input.focus(),at(a.wrapper.ownerDocument,"mousemove",n),at(a.wrapper.ownerDocument,"mouseup",r),g.history.lastSelOrigin=null}var n=Nn(f,function(e){(0!==e.buttons&&_t(e)?function e(t){var i,n,r=++d,o=Ji(f,t,!0,"rectangle"==p.unit);o&&(0!=ge(o,m)?(f.curOp.focus=T(),l(o),i=hn(a,g),(o.line>=i.to||o.line<i.from)&&setTimeout(Nn(f,function(){d==r&&e(t)}),150)):(n=t.clientY<s.top?-20:t.clientY>s.bottom?20:0)&&setTimeout(Nn(f,function(){d==r&&(a.scroller.scrollTop+=n,e(t))}),50))}:i)(e)}),r=Nn(f,i);f.state.selectingText=r,rt(a.wrapper.ownerDocument,"mousemove",n),rt(a.wrapper.ownerDocument,"mouseup",r)})(e,n,t,o)}(a,t,r,e):vt(e)==l.scroller&&ft(e):2==i?(t&&Cr(a.doc,t),setTimeout(function(){return l.input.focus()},20)):3==i&&(b?ia(a,e):sn(a)))))}function Jo(e,t,i){if("char"==i)return new rr(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new rr(pe(t.line,0),be(e.doc,pe(t.line+1,0)));t=i(e,t);return new rr(t.from,t.to)}function ea(e,t,i,n){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ft(t);var a=e.display,n=a.lineDiv.getBoundingClientRect();if(o>n.bottom||!ct(e,i))return pt(t);o-=n.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var s=a.gutters.childNodes[l];if(s&&s.getBoundingClientRect().right>=r)return lt(e,i,e,ue(e.doc,o),e.options.gutters[l],t),pt(t)}}function ta(e,t){return ea(e,t,"gutterClick",!0)}function ia(e,t){var i,n;vi(e.display,t)||(n=t,ct(i=e,"gutterContextMenu")&&ea(i,n,"gutterContextMenu",!1))||st(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function na(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Mi(e)}Zo.prototype.compare=function(e,t,i){return this.time+400>e&&0==ge(t,this.pos)&&i==this.button};var ra={toString:function(){return"CodeMirror.Init"}},oa={},aa={};function la(e){Yn(e),On(e),pn(e)}function sa(e,t,i){!t!=!(i&&i!=ra)&&(i=e.display.dragFunctions,(t=t?rt:at)(e.display.scroller,"dragstart",i.start),t(e.display.scroller,"dragenter",i.enter),t(e.display.scroller,"dragover",i.over),t(e.display.scroller,"dragleave",i.leave),t(e.display.scroller,"drop",i.drop))}function da(e){e.options.lineWrapping?(A(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(z(e.display.wrapper,"CodeMirror-wrap"),Xe(e)),Qi(e),On(e),Mi(e),setTimeout(function(){return Sn(e)},100)}function ca(e,t){var i=this;if(!(this instanceof ca))return new ca(e,t);this.options=t=t?I(t):{},I(oa,t,!1),Zn(t);var n=t.value;"string"==typeof n?n=new fo(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var r,o=new ca.inputStyles[t.inputStyle](this),o=this.display=new oe(e,n,o);for(r in Yn(o.wrapper.CodeMirror=this),na(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Cn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new O,keySeq:null,specialChars:null},t.autofocus&&!u&&o.input.focus(),_&&x<11&&setTimeout(function(){return i.display.input.reset(!0)},20),function(n){var r=n.display;rt(r.scroller,"mousedown",Nn(n,Qo)),rt(r.scroller,"dblclick",_&&x<11?Nn(n,function(e){var t;st(n,e)||(!(t=Ji(n,e))||ta(n,e)||vi(n.display,e)||(ft(e),t=n.findWordAt(t),Cr(n.doc,t.anchor,t.head)))}):function(e){return st(n,e)||ft(e)}),b||rt(r.scroller,"contextmenu",function(e){return ia(n,e)});var i,o={end:0};function a(){r.activeTouch&&(i=setTimeout(function(){return r.activeTouch=null},1e3),(o=r.activeTouch).end=+new Date)}function l(e,t){if(null==t.left)return 1;var i=t.left-e.left,e=t.top-e.top;return 400<i*i+e*e}rt(r.scroller,"touchstart",function(e){var t;st(n,e)||function(e){if(1==e.touches.length){e=e.touches[0];return e.radiusX<=1&&e.radiusY<=1}}(e)||ta(n,e)||(r.input.ensurePolled(),clearTimeout(i),t=+new Date,r.activeTouch={start:t,moved:!1,prev:t-o.end<=300?o:null},1==e.touches.length&&(r.activeTouch.left=e.touches[0].pageX,r.activeTouch.top=e.touches[0].pageY))}),rt(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),rt(r.scroller,"touchend",function(e){var t,i=r.activeTouch;i&&!vi(r,e)&&null!=i.left&&!i.moved&&new Date-i.start<300&&(t=n.coordsChar(r.activeTouch,"page"),t=!i.prev||l(i,i.prev)?new rr(t,t):!i.prev.prev||l(i,i.prev.prev)?n.findWordAt(t):new rr(pe(t.line,0),be(n.doc,pe(t.line+1,0))),n.setSelection(t.anchor,t.head),n.focus(),ft(e)),a()}),rt(r.scroller,"touchcancel",a),rt(r.scroller,"scroll",function(){r.scroller.clientHeight&&(wn(n,r.scroller.scrollTop),zn(n,r.scroller.scrollLeft,!0),lt(n,"scroll",n))}),rt(r.scroller,"mousewheel",function(e){return ir(n,e)}),rt(r.scroller,"DOMMouseScroll",function(e){return ir(n,e)}),rt(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(e){st(n,e)||gt(e)},over:function(e){var t,i;st(n,e)||((i=Ji(t=n,i=e))&&(rn(t,i,i=document.createDocumentFragment()),t.display.dragCursor||(t.display.dragCursor=V("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),S(t.display.dragCursor,i)),gt(e))},start:function(e){return t=n,i=e,void(_&&(!t.state.draggingText||+new Date-ho<100)?gt(i):st(t,i)||vi(t.display,i)||(i.dataTransfer.setData("Text",t.getSelection()),i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setDragImage&&!s&&((e=V("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(e.width=e.height=1,t.display.wrapper.appendChild(e),e._top=e.offsetTop),i.dataTransfer.setDragImage(e,0,0),p&&e.parentNode.removeChild(e))));var t,i},drop:Nn(n,po),leave:function(e){st(n,e)||go(n)}};var e=r.input.getField();rt(e,"keyup",function(e){return Uo.call(n,e)}),rt(e,"keydown",Nn(n,$o)),rt(e,"keypress",Nn(n,qo)),rt(e,"focus",function(e){return dn(n,e)}),rt(e,"blur",function(e){return cn(n,e)})}(this),xo(),An(this),this.curOp.forceUpdate=!0,vr(this,n),t.autofocus&&!u||this.hasFocus()?setTimeout(N(dn,this),20):cn(this),aa)aa.hasOwnProperty(r)&&aa[r](i,t[r],ra);gn(this),t.finishInit&&t.finishInit(this);for(var a=0;a<ua.length;++a)ua[a](i);En(this),h&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}ca.defaults=oa,ca.optionHandlers=aa;var ua=[];function fa(e,t,i,n){var r,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?r=Rt(e,t).state:i="prev");var a=e.options.tabSize,l=ae(o,t),s=D(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var d,c=l.text.match(/^\s*/)[0];if(n||/\S/.test(l.text)){if("smart"==i&&((d=o.mode.indent(r,l.text.slice(c.length),l.text))==P||150<d)){if(!n)return;i="prev"}}else d=0,i="not";"prev"==i?d=t>o.first?D(ae(o,t-1).text,null,a):0:"add"==i?d=s+e.options.indentUnit:"subtract"==i?d=s-e.options.indentUnit:"number"==typeof i&&(d=s+i),d=Math.max(0,d);var u="",f=0;if(e.options.indentWithTabs)for(var h=Math.floor(d/a);h;--h)f+=a,u+="\t";if(f<d&&(u+=$(d-f)),u!=c)return Gr(o,u,pe(t,0),pe(t,c.length),"+input"),!(l.stateAfter=null);for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){g=pe(t,c.length);Ar(o,p,new rr(g,g));break}}}ca.defineInitHook=function(e){return ua.push(e)};var ha=null;function pa(e){ha=e}function ga(e,t,i,n,r){var o=e.doc;e.display.shift=!1,n=n||o.sel;var a,l=e.state.pasteIncoming||"paste"==r,s=bt(t),d=null;if(l&&1<n.ranges.length)if(ha&&ha.text.join("\n")==t){if(n.ranges.length%ha.text.length==0){d=[];for(var c=0;c<ha.text.length;c++)d.push(o.splitLines(ha.text[c]))}}else s.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(d=q(s,function(e){return[e]}));for(var u=n.ranges.length-1;0<=u;u--){var f=n.ranges[u],h=f.from(),p=f.to();f.empty()&&(i&&0<i?h=pe(h.line,h.ch-i):e.state.overwrite&&!l?p=pe(p.line,Math.min(ae(o,p.line).text.length,p.ch+U(s).length)):ha&&ha.lineWise&&ha.text.join("\n")==t&&(h=p=pe(h.line,0))),a=e.curOp.updateInput;p={from:h,to:p,text:d?d[u%d.length]:s,origin:r||(l?"paste":e.state.cutIncoming?"cut":"+input")};Xr(e.doc,p),ai(e,"inputRead",e,p)}t&&!l&&_a(e,t),xn(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function va(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");return i&&(e.preventDefault(),t.isReadOnly()||t.options.disableInput||Mn(t,function(){return ga(t,i,0,null,"paste")}),1)}function _a(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,n=i.ranges.length-1;0<=n;n--){var r=i.ranges[n];if(!(100<r.head.ch||n&&i.ranges[n-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<t.indexOf(o.electricChars.charAt(l))){a=fa(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(ae(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=fa(e,r.head.line,"smart"));a&&ai(e,"electricInput",e,r.head.line)}}}function xa(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var r=e.doc.sel.ranges[n].head.line,r={anchor:pe(r,0),head:pe(r+1,0)};i.push(r),t.push(e.getRange(r.anchor,r.head))}return{text:t,ranges:i}}function ma(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function ya(){var e=V("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=V("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?e.style.width="1000px":e.setAttribute("wrap","off"),l&&(e.style.border="1px solid black"),ma(e),t}function ba(n,r,o,e,a){var t=r,i=o,l=ae(n,r.line);function s(e){var t,i=a?Do(n.cm,l,r,o):No(l,r,o);if(null==i){if(e||(t=r.line+o)<n.first||t>=n.first+n.size||(r=new pe(t,r.ch,r.sticky),!(l=ae(n,t))))return;r=Io(a,n.cm,l,r.line,o)}else r=i;return 1}if("char"==e)s();else if("column"==e)s(!0);else if("word"==e||"group"==e)for(var d=null,c="group"==e,u=n.cm&&n.cm.getHelper(r,"wordChars"),f=!0;!(o<0)||s(!f);f=!1){var h=l.text.charAt(r.ch)||"\n",h=J(h,u)?"w":c&&"\n"==h?"n":!c||/\s/.test(h)?null:"p";if(!c||f||h||(h="s"),d&&d!=h){o<0&&(o=1,s(),r.sticky="after");break}if(h&&(d=h),0<o&&!s(!f))break}i=Pr(n,r,t,i,!0);return ve(t,i)&&(i.hitSide=!0),i}function wa(e,t,i,n){var r,o,a,l=e.doc,s=t.left;for("page"==n?(r=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),r=Math.max(r-.5*Ui(e.display),3),o=(0<i?t.bottom:t.top)+i*r):"line"==n&&(o=0<i?t.bottom+3:t.top-3);(a=ji(e,s,o)).outside;){if(i<0?o<=0:o>=l.height){a.hitSide=!0;break}o+=5*i}return a}e=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new O,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function La(e,t){var i=ki(e,t.line);if(!i||i.hidden)return null;var n=ae(e.doc,t.line),i=Li(i,n,t.line),n=it(n,e.doc.direction),e="left";n&&(e=$e(n,t.ch)%2?"right":"left");e=Ti(i.map,t.ch,e);return e.offset="right"==e.collapse?e.end:e.start,e}function za(e,t){return t&&(e.bad=!0),e}function ka(e,t,i){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[i]))return za(e.clipPos(pe(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==n)return function(d,e,t){var i=d.text.firstChild,n=!1;if(!e||!C(i,e))return za(pe(ce(d.line),0),!0);if(e==i&&(n=!0,e=i.childNodes[t],t=0,!e)){var r=d.rest?U(d.rest):d.line;return za(pe(ce(r),r.text.length),n)}var r=3==e.nodeType?e:null,o=e;r||1!=e.childNodes.length||3!=e.firstChild.nodeType||(r=e.firstChild,t=t&&r.nodeValue.length);for(;o.parentNode!=i;)o=o.parentNode;var c=d.measure,u=c.maps;function a(e,t,i){for(var n=-1;n<(u?u.length:0);n++)for(var r=n<0?c.map:u[n],o=0;o<r.length;o+=3){var a=r[o+2];if(a==e||a==t){var l=ce(n<0?d.line:d.rest[n]),s=r[o]+i;return(i<0||a!=e)&&(s=r[o+(i?1:0)]),pe(l,s)}}}var l=a(r,o,t);if(l)return za(l,n);for(var s=o.nextSibling,f=r?r.nodeValue.length-t:0;s;s=s.nextSibling){if(l=a(s,s.firstChild,0))return za(pe(l.line,l.ch-f),n);f+=s.textContent.length}for(var h=o.previousSibling,p=t;h;h=h.previousSibling){if(l=a(h,h.firstChild,-1))return za(pe(l.line,l.ch+p),n);p+=h.textContent.length}}(o,t,i)}}e.prototype.init=function(e){var t=this,o=this,a=o.cm,l=o.div=e.lineDiv;function i(e){if(!st(a,e)){if(a.somethingSelected())pa({lineWise:!1,text:a.getSelections()}),"cut"==e.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var t=xa(a);pa({lineWise:!0,text:t.text}),"cut"==e.type&&a.operation(function(){a.setSelections(t.ranges,0,H),a.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var i=ha.text.join("\n");if(e.clipboardData.setData("Text",i),e.clipboardData.getData("Text")==i)return void e.preventDefault()}var n=ya(),e=n.firstChild;a.display.lineSpace.insertBefore(n,a.display.lineSpace.firstChild),e.value=ha.text.join("\n");var r=document.activeElement;M(e),setTimeout(function(){a.display.lineSpace.removeChild(n),r.focus(),r==l&&o.showPrimarySelection()},50)}}ma(l,a.options.spellcheck),rt(l,"paste",function(e){st(a,e)||va(e,a)||x<=11&&setTimeout(Nn(a,function(){return t.updateFromDOM()}),20)}),rt(l,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),rt(l,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),rt(l,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),rt(l,"touchstart",function(){return o.forceCompositionEnd()}),rt(l,"input",function(){t.composing||t.readFromDOMSoon()}),rt(l,"copy",i),rt(l,"cut",i)},e.prototype.prepareSelection=function(){var e=nn(this.cm,!1);return e.focus=this.cm.state.focused,e},e.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},e.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},e.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),n=i.from(),r=i.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||r.line<t.display.viewFrom)e.removeAllRanges();else{var o=ka(t,e.anchorNode,e.anchorOffset),i=ka(t,e.focusNode,e.focusOffset);if(!o||o.bad||!i||i.bad||0!=ge(me(o,i),n)||0!=ge(xe(o,i),r)){var i=t.display.view,a=n.line>=t.display.viewFrom&&La(t,n)||{node:i[0].measure.map[2],offset:0},l=r.line<t.display.viewTo&&La(t,r);if(l||(l={node:(d=(d=i[i.length-1].measure).maps?d.maps[d.maps.length-1]:d.map)[d.length-1],offset:d[d.length-2]-d[d.length-3]}),a&&l){var s,d=e.rangeCount&&e.getRangeAt(0);try{s=L(a.node,a.offset,l.offset,l.node)}catch(e){}s&&(!f&&t.state.focused?(e.collapse(a.node,a.offset),s.collapsed||(e.removeAllRanges(),e.addRange(s))):(e.removeAllRanges(),e.addRange(s)),d&&null==e.anchorNode?e.addRange(d):f&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},e.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},e.prototype.showMultipleSelections=function(e){S(this.cm.display.cursorDiv,e.cursors),S(this.cm.display.selectionDiv,e.selection)},e.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},e.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;e=e.getRangeAt(0).commonAncestorContainer;return C(this.div,e)},e.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},e.prototype.blur=function(){this.div.blur()},e.prototype.getField=function(){return this.div},e.prototype.supportsTouch=function(){return!0},e.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Mn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},e.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},e.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e,t,i=this.getSelection(),n=this.cm;if(c&&o&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(i.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();this.composing||(this.rememberSelection(),e=ka(n,i.anchorNode,i.anchorOffset),t=ka(n,i.focusNode,i.focusOffset),e&&t&&Mn(n,function(){Nr(n.doc,ar(e,t),H),(e.bad||t.bad)&&(n.curOp.selectionChanged=!0)}))}},e.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t=this.cm,i=t.display,n=t.doc.sel.primary(),r=n.from(),n=n.to();if(0==r.ch&&r.line>t.firstLine()&&(r=pe(r.line-1,ae(t.doc,r.line-1).length)),n.ch==ae(t.doc,n.line).text.length&&n.line<t.lastLine()&&(n=pe(n.line+1,0)),r.line<i.viewFrom||n.line>i.viewTo-1)return!1;v=r.line==i.viewFrom||0==(v=en(t,r.line))?(e=ce(i.view[0].line),i.view[0].node):(e=ce(i.view[v].line),i.view[v-1].node.nextSibling);var o,n=en(t,n.line),n=n==i.view.length-1?(o=i.viewTo-1,i.lineDiv.lastChild):(o=ce(i.view[n+1].line)-1,i.view[n+1].node.previousSibling);if(!v)return!1;for(var a=t.doc.splitLines(function(a,e,t,l,s){var i="",d=!1,c=a.doc.lineSeparator(),u=!1;function f(){d&&(i+=c,u&&(i+=c),d=u=!1)}function h(e){e&&(f(),i+=e)}for(;!function e(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(i)h(i);else if(i=t.getAttribute("cm-marker"))(i=a.findMarks(pe(l,0),pe(s+1,0),(o=+i,function(e){return e.id==o}))).length&&(n=i[0].find(0))&&h(le(a.doc,n.from,n.to).join(c));else if("false"!=t.getAttribute("contenteditable")){var n=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(/^br$/i.test(t.nodeName)||0!=t.textContent.length){n&&f();for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r]);/^(pre|p)$/i.test(t.nodeName)&&(u=!0),n&&(d=!0)}}}else 3==t.nodeType&&h(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var o}(e),e!=t;)e=e.nextSibling,u=!1;return i}(t,v,n,e,o)),l=le(t.doc,pe(e,0),pe(o,ae(t.doc,o).text.length));1<a.length&&1<l.length;)if(U(a)==U(l))a.pop(),l.pop(),o--;else{if(a[0]!=l[0])break;a.shift(),l.shift(),e++}for(var s=0,d=0,c=a[0],u=l[0],f=Math.min(c.length,u.length);s<f&&c.charCodeAt(s)==u.charCodeAt(s);)++s;for(var h=U(a),p=U(l),g=Math.min(h.length-(1==a.length?s:0),p.length-(1==l.length?s:0));d<g&&h.charCodeAt(h.length-d-1)==p.charCodeAt(p.length-d-1);)++d;if(1==a.length&&1==l.length&&e==r.line)for(;s&&s>r.ch&&h.charCodeAt(h.length-d-1)==p.charCodeAt(p.length-d-1);)s--,d++;a[a.length-1]=h.slice(0,h.length-d).replace(/^\u200b+/,""),a[0]=a[0].slice(s).replace(/\u200b+$/,"");var v=pe(e,s),n=pe(o,l.length?U(l).length-d:0);return 1<a.length||a[0]||ge(v,n)?(Gr(t.doc,a,v,n,"+input"),!0):void 0},e.prototype.ensurePolled=function(){this.forceCompositionEnd()},e.prototype.reset=function(){this.forceCompositionEnd()},e.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},e.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},e.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Mn(this.cm,function(){return On(e.cm)})},e.prototype.setUneditable=function(e){e.contentEditable="false"},e.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Nn(this.cm,ga)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},e.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},e.prototype.onContextMenu=function(){},e.prototype.resetPosition=function(){},e.prototype.needsContentAttribute=!0;var Sa,Va,Ka,Ca,Ta,n=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new O,this.hasSelection=!1,this.composing=null};function Aa(e,t,n,i){Sa.defaults[e]=t,n&&(Va[e]=i?function(e,t,i){i!=ra&&n(e,t,i)}:n)}n.prototype.init=function(t){var e=this,i=this,n=this.cm;this.createField(t);var r=this.textarea;function o(e){if(!st(n,e)){if(n.somethingSelected())pa({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=xa(n);pa({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,H):(i.prevInput="",r.value=t.text.join("\n"),M(r))}"cut"==e.type&&(n.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),l&&(r.style.width="0px"),rt(r,"input",function(){_&&9<=x&&e.hasSelection&&(e.hasSelection=null),i.poll()}),rt(r,"paste",function(e){st(n,e)||va(e,n)||(n.state.pasteIncoming=!0,i.fastPoll())}),rt(r,"cut",o),rt(r,"copy",o),rt(t.scroller,"paste",function(e){vi(t,e)||st(n,e)||(n.state.pasteIncoming=!0,i.focus())}),rt(t.lineSpace,"selectstart",function(e){vi(t,e)||ft(e)}),rt(r,"compositionstart",function(){var e=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),rt(r,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},n.prototype.createField=function(e){this.wrapper=ya(),this.textarea=this.wrapper.firstChild},n.prototype.prepareSelection=function(){var e,t=this.cm,i=t.display,n=t.doc,r=nn(t);return t.options.moveInputWithCursor&&(e=Pi(t,n.sel.primary().head,"div"),t=i.wrapper.getBoundingClientRect(),n=i.lineDiv.getBoundingClientRect(),r.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,e.top+n.top-t.top)),r.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,e.left+n.left-t.left))),r},n.prototype.showSelection=function(e){var t=this.cm.display;S(t.cursorDiv,e.cursors),S(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},n.prototype.reset=function(e){var t,i;this.contextMenuPending||this.composing||((t=this.cm).somethingSelected()?(this.prevInput="",i=t.getSelection(),this.textarea.value=i,t.state.focused&&M(this.textarea),_&&9<=x&&(this.hasSelection=i)):e||(this.prevInput=this.textarea.value="",_&&9<=x&&(this.hasSelection=null)))},n.prototype.getField=function(){return this.textarea},n.prototype.supportsTouch=function(){return!1},n.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!u||T()!=this.textarea))try{this.textarea.focus()}catch(e){}},n.prototype.blur=function(){this.textarea.blur()},n.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},n.prototype.receivedFocus=function(){this.slowPoll()},n.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},n.prototype.fastPoll=function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function e(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))})},n.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||wt(i)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=i.value;if(r==n&&!t.somethingSelected())return!1;if(_&&9<=x&&this.hasSelection===r||g&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||n||(n="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(n.length,r.length);a<l&&n.charCodeAt(a)==r.charCodeAt(a);)++a;return Mn(t,function(){ga(t,r.slice(a),n.length-a,null,e.composing?"*compose":null),1e3<r.length||-1<r.indexOf("\n")?i.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},n.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},n.prototype.onKeyPress=function(){_&&9<=x&&(this.hasSelection=null),this.fastPoll()},n.prototype.onContextMenu=function(e){var i,n,t,r,o=this,a=o.cm,l=a.display,s=o.textarea,d=Ji(a,e),c=l.scroller.scrollTop;function u(){var e,t;null!=s.selectionStart&&(t="\u200b"+((e=a.somethingSelected())?s.value:""),s.value="\u21da",s.value=t,o.prevInput=e?"":"\u200b",s.selectionStart=1,s.selectionEnd=t.length,l.selForContextMenu=a.doc.sel)}function f(){var e,t;o.contextMenuPending=!1,o.wrapper.style.cssText=n,s.style.cssText=i,_&&x<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=c),null!=s.selectionStart&&((!_||_&&x<9)&&u(),e=0,t=function(){l.selForContextMenu==a.doc.sel&&0==s.selectionStart&&0<s.selectionEnd&&"\u200b"==o.prevInput?Nn(a,Wr)(a):e++<10?l.detectingSelectAll=setTimeout(t,500):(l.selForContextMenu=null,l.input.reset())},l.detectingSelectAll=setTimeout(t,200))}d&&!p&&(a.options.resetSelectionOnContextMenu&&-1==a.doc.sel.contains(d)&&Nn(a,Nr)(a.doc,ar(d),H),i=s.style.cssText,n=o.wrapper.style.cssText,o.wrapper.style.cssText="position: absolute",d=o.wrapper.getBoundingClientRect(),s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(_?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",h&&(t=window.scrollY),l.input.focus(),h&&window.scrollTo(null,t),l.input.reset(),a.somethingSelected()||(s.value=o.prevInput=" "),o.contextMenuPending=!0,l.selForContextMenu=a.doc.sel,clearTimeout(l.detectingSelectAll),_&&9<=x&&u(),b?(gt(e),r=function(){at(window,"mouseup",r),setTimeout(f,20)},rt(window,"mouseup",r)):setTimeout(f,50))},n.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},n.prototype.setUneditable=function(){},n.prototype.needsContentAttribute=!1,Va=(Sa=ca).optionHandlers,Sa.defineOption=Aa,Sa.Init=ra,Aa("value","",function(e,t){return e.setValue(t)},!0),Aa("mode",null,function(e,t){e.doc.modeOption=t,ur(e)},!0),Aa("indentUnit",2,ur,!0),Aa("indentWithTabs",!1),Aa("smartIndent",!0),Aa("tabSize",4,function(e){fr(e),Mi(e),On(e)},!0),Aa("lineSeparator",null,function(e,n){if(e.doc.lineSep=n){var r=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var i=e.text.indexOf(n,t);if(-1==i)break;t=i+n.length,r.push(pe(o,i))}o++});for(var t=r.length-1;0<=t;t--)Gr(e.doc,n,r[t],pe(r[t].line,r[t].ch+n.length))}}),Aa("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=ra&&e.refresh()}),Aa("specialCharPlaceholder",Qt,function(e){return e.refresh()},!0),Aa("electricChars",!0),Aa("inputStyle",u?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Aa("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),Aa("rtlMoveVisually",!m),Aa("wholeLineUpdateBefore",!0),Aa("theme","default",function(e){na(e),la(e)},!0),Aa("keyMap","default",function(e,t,i){t=Ao(t),i=i!=ra&&Ao(i);i&&i.detach&&i.detach(e,t),t.attach&&t.attach(e,i||null)}),Aa("extraKeys",null),Aa("configureMouse",null),Aa("lineWrapping",!1,da,!0),Aa("gutters",[],function(e){Zn(e.options),la(e)},!0),Aa("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Yi(e.display)+"px":"0",e.refresh()},!0),Aa("coverGutterNextToScrollbar",!1,function(e){return Sn(e)},!0),Aa("scrollbarStyle","native",function(e){Cn(e),Sn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Aa("lineNumbers",!1,function(e){Zn(e.options),la(e)},!0),Aa("firstLineNumber",1,la,!0),Aa("lineNumberFormatter",function(e){return e},la,!0),Aa("showCursorWhenSelecting",!1,tn,!0),Aa("resetSelectionOnContextMenu",!0),Aa("lineWiseCopyCut",!0),Aa("pasteLinesPerSelection",!0),Aa("readOnly",!1,function(e,t){"nocursor"==t&&(cn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),Aa("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Aa("dragDrop",!0,sa),Aa("allowDropFileTypes",null),Aa("cursorBlinkRate",530),Aa("cursorScrollMargin",0),Aa("cursorHeight",1,tn,!0),Aa("singleCursorHeightPerLine",!0,tn,!0),Aa("workTime",100),Aa("workDelay",100),Aa("flattenSpans",!0,fr,!0),Aa("addModeClass",!1,fr,!0),Aa("pollInterval",100),Aa("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),Aa("historyEventDelay",1250),Aa("viewportMargin",10,function(e){return e.refresh()},!0),Aa("maxHighlightLength",1e4,fr,!0),Aa("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Aa("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),Aa("autofocus",null),Aa("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),Ca=(Ka=ca).optionHandlers,Ta=Ka.helpers={},Ka.prototype={constructor:Ka,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Ca.hasOwnProperty(e)&&Nn(this,Ca[e])(this,t,n),lt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ao(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:In(function(e,t){var i=e.token?e:Ka.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){for(var n=0,r=i(t);n<e.length&&i(e[n])<=r;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,On(this)}),removeOverlay:In(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void On(this)}}),indentLine:In(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),fe(this.doc,e)&&fa(this,e,t,i)}),indentSelection:In(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var r=t[n];if(r.empty())r.head.line>i&&(fa(this,r.head.line,e,!0),i=r.head.line,n==this.doc.sel.primIndex&&xn(this));else{for(var o=r.from(),a=r.to(),r=Math.max(i,o.line),i=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1,l=r;l<i;++l)fa(this,l,e);r=this.doc.sel.ranges;0==o.ch&&t.length==r.length&&0<r[n].from().ch&&Ar(this.doc,n,new rr(o,r[n].to()),H)}}}),getTokenAt:function(e,t){return Xt(this,e,t)},getLineTokens:function(e,t){return Xt(this,pe(e),t,!0)},getTokenTypeAt:function(e){e=be(this.doc,e);var t,i=Bt(this,ae(this.doc,e.line)),n=0,r=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var a=n+r>>1;if((a?i[2*a-1]:0)>=o)r=a;else{if(!(i[2*a+1]<o)){t=i[2*a+2];break}n=1+a}}e=t?t.indexOf("overlay "):-1;return e<0?t:0==e?null:t.slice(0,e-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Ka.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Ta.hasOwnProperty(t))return i;var n=Ta[t],r=this.getModeAt(e);if("string"==typeof r[t])n[r[t]]&&i.push(n[r[t]]);else if(r[t])for(var o=0;o<r[t].length;o++){var a=n[r[t][o]];a&&i.push(a)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(var l=0;l<n._global.length;l++){var s=n._global[l];s.pred(r,this)&&-1==B(i,s.val)&&i.push(s.val)}return i},getStateAfter:function(e,t){var i=this.doc;return Rt(this,(e=ye(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary(),i=null==e?i.head:"object"==typeof e?be(this.doc,e):e?i.from():i.to();return Pi(this,i,t||"page")},charCoords:function(e,t){return Ri(this,be(this.doc,e),t||"page")},coordsChar:function(e,t){return ji(this,(e=Bi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Bi(this,{top:e,left:0},t||"page").top,ue(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var n,r=!1,e="number"==typeof e?(n=this.doc.first+this.doc.size-1,e<this.doc.first?e=this.doc.first:n<e&&(e=n,r=!0),ae(this.doc,e)):e;return Oi(this,e,{top:0,left:0},t||"page",i||r).top+(r?this.doc.height-We(e):0)},defaultTextHeight:function(){return Ui(this.display)},defaultCharWidth:function(){return qi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,r){var o,a,l=this.display,s=(e=Pi(this,be(this.doc,e))).bottom,d=e.left;t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==n?s=e.top:"above"!=n&&"near"!=n||(o=Math.max(l.wrapper.clientHeight,this.doc.height),a=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth),("above"==n||e.bottom+t.offsetHeight>o)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=o&&(s=e.bottom),d+t.offsetWidth>a&&(d=a-t.offsetWidth)),t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(d=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?d=0:"middle"==r&&(d=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=d+"px"),i&&(i=this,t={left:d,top:s,right:d+t.offsetWidth,bottom:s+t.offsetHeight},null!=(t=vn(i,t)).scrollTop&&wn(i,t.scrollTop),null!=t.scrollLeft&&zn(i,t.scrollLeft))},triggerOnKeyDown:In($o),triggerOnKeyPress:In(qo),triggerOnKeyUp:Uo,triggerOnMouseDown:In(Qo),execCommand:function(e){if(Oo.hasOwnProperty(e))return Oo[e].call(null,this)},triggerElectric:In(function(e){_a(this,e)}),findPosH:function(e,t,i,n){var r=1;t<0&&(r=-1,t=-t);for(var o=be(this.doc,e),a=0;a<t&&!(o=ba(this.doc,o,r,i,n)).hitSide;++a);return o},moveH:In(function(t,i){var n=this;this.extendSelectionsBy(function(e){return n.display.shift||n.doc.extend||e.empty()?ba(n.doc,e.head,t,i,n.options.rtlMoveVisually):t<0?e.from():e.to()},j)}),deleteH:In(function(i,n){var e=this.doc.sel,r=this.doc;e.somethingSelected()?r.replaceSelection("",null,"+delete"):Eo(this,function(e){var t=ba(r,e.head,i,n,!1);return i<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,i,n){var r=1,o=n;t<0&&(r=-1,t=-t);for(var a=be(this.doc,e),l=0;l<t;++l){var s=Pi(this,a,"div");if(null==o?o=s.left:s.left=o,(a=wa(this,s,r,i)).hitSide)break}return a},moveV:In(function(n,r){var o=this,a=this.doc,l=[],s=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy(function(e){if(s)return n<0?e.from():e.to();var t=Pi(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),l.push(t.left);var i=wa(o,t,n,r);return"page"==r&&e==a.sel.primary()&&_n(o,Ri(o,i,"div").top-t.top),i},j),l.length)for(var e=0;e<a.sel.ranges.length;e++)a.sel.ranges[e].goalColumn=l[e]}),findWordAt:function(e){var t=ae(this.doc,e.line).text,i=e.ch,n=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!i?++n:--i;for(var o=t.charAt(i),a=J(o,r)?function(e){return J(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!J(e)};0<i&&a(t.charAt(i-1));)--i;for(;n<t.length&&a(t.charAt(n));)++n}return new rr(pe(e.line,i),pe(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?A:z)(this.display.cursorDiv,"CodeMirror-overwrite"),lt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==T()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:In(function(e,t){mn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-yi(this)-this.display.barHeight,width:e.scrollWidth-yi(this)-this.display.barWidth,clientHeight:wi(this),clientWidth:bi(this)}},scrollIntoView:In(function(e,t){var i;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:pe(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(i=e,yn(t=this),t.curOp.scrollToPos=i):bn(this,e.from,e.to,e.margin)}),setSize:In(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Ei(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Bn(n,r,"widget");break}++r}),this.curOp.forceUpdate=!0,lt(this,"refresh",this)}),operation:function(e){return Mn(this,e)},startOperation:function(){return An(this)},endOperation:function(){return En(this)},refresh:In(function(){var e=this.display.cachedTextHeight;On(this),this.curOp.forceUpdate=!0,Mi(this),mn(this,this.doc.scrollLeft,this.doc.scrollTop),qn(this),(null==e||.5<Math.abs(e-Ui(this.display)))&&Qi(this),lt(this,"refresh",this)}),swapDoc:In(function(e){var t=this.doc;return t.cm=null,vr(this,e),Mi(this),this.display.input.reset(),mn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ai(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ut(Ka),Ka.registerHelper=function(e,t,i){Ta.hasOwnProperty(e)||(Ta[e]=Ka[e]={_global:[]}),Ta[e][t]=i},Ka.registerGlobalHelper=function(e,t,i,n){Ka.registerHelper(e,t,n),Ta[e]._global.push({pred:i,val:n})};var Ea,Ma,Na="iter insert remove copy getEditor constructor".split(" ");for(Ea in fo.prototype)fo.prototype.hasOwnProperty(Ea)&&B(Na,Ea)<0&&(ca.prototype[Ea]=function(e){return function(){return e.apply(this.doc,arguments)}}(fo.prototype[Ea]));return ut(fo),ca.inputStyles={textarea:n,contenteditable:e},ca.defineMode=function(e){ca.defaults.mode||"null"==e||(ca.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),kt[e]=t}.apply(this,arguments)},ca.defineMIME=function(e,t){St[e]=t},ca.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ca.defineMIME("text/plain","null"),ca.defineExtension=function(e,t){ca.prototype[e]=t},ca.defineDocExtension=function(e,t){fo.prototype[e]=t},ca.fromTextArea=function(t,e){var i;function n(){t.value=l.getValue()}if(e=e?I(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus&&(i=T(),e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body),t.form&&(rt(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var r=t.form,o=r.submit;try{var a=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=a}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(at(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var l=ca(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l},(Ma=ca).off=at,Ma.on=rt,Ma.wheelEventPixels=tr,Ma.Doc=fo,Ma.splitLines=bt,Ma.countColumn=D,Ma.findColumn=X,Ma.isWordChar=Q,Ma.Pass=P,Ma.signal=lt,Ma.Line=Ut,Ma.changeEnd=lr,Ma.scrollbarModel=Kn,Ma.Pos=pe,Ma.cmpPos=ge,Ma.modes=kt,Ma.mimeModes=St,Ma.resolveMode=Vt,Ma.getMode=Kt,Ma.modeExtensions=Ct,Ma.extendMode=Tt,Ma.copyState=At,Ma.startState=Mt,Ma.innerMode=Et,Ma.commands=Oo,Ma.keyMap=zo,Ma.keyName=To,Ma.isModifierKey=Ko,Ma.lookupKey=Vo,Ma.normalizeKeyMap=So,Ma.StringStream=Nt,Ma.SharedTextMarker=lo,Ma.TextMarker=oo,Ma.LineWidget=io,Ma.e_preventDefault=ft,Ma.e_stopPropagation=ht,Ma.e_stop=gt,Ma.addClass=A,Ma.contains=C,Ma.rmClass=z,Ma.keyNames=yo,ca.version="5.39.2",ca}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(p){"use strict";p.multiplexingMode=function(u){var f=Array.prototype.slice.call(arguments,1);function h(e,t,i,n){if("string"==typeof t){var r=e.indexOf(t,i);return n&&-1<r?r+t.length:r}e=t.exec(i?e.slice(i):e);return e?e.index+i+(n?e[0].length:0):-1}return{startState:function(){return{outer:p.startState(u),innerActive:null,inner:null}},copyState:function(e){return{outer:p.copyState(u,e.outer),innerActive:e.innerActive,inner:e.innerActive&&p.copyState(e.innerActive.mode,e.inner)}},token:function(e,t){if(t.innerActive){var i=t.innerActive,n=e.string;if(!i.close&&e.sol())return t.innerActive=t.inner=null,this.token(e,t);if((l=i.close?h(n,i.close,e.pos,i.parseDelimiters):-1)==e.pos&&!i.parseDelimiters)return e.match(i.close),t.innerActive=t.inner=null,i.delimStyle&&i.delimStyle+" "+i.delimStyle+"-close";-1<l&&(e.string=n.slice(0,l));var r=i.mode.token(e,t.inner);return-1<l&&(e.string=n),l==e.pos&&i.parseDelimiters&&(t.innerActive=t.inner=null),i.innerStyle&&(r=r?r+" "+i.innerStyle:i.innerStyle),r}for(var o=1/0,n=e.string,a=0;a<f.length;++a){var l,s=f[a];if((l=h(n,s.open,e.pos))==e.pos){s.parseDelimiters||e.match(s.open),t.innerActive=s;var d,c=0;return!u.indent||(d=u.indent(t.outer,""))!==p.Pass&&(c=d),t.inner=p.startState(s.mode,c),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open"}-1!=l&&l<o&&(o=l)}o!=1/0&&(e.string=n.slice(0,o));r=u.token(e,t.outer);return o!=1/0&&(e.string=n),r},indent:function(e,t){var i=e.innerActive?e.innerActive.mode:u;return i.indent?i.indent(e.innerActive?e.inner:e.outer,t):p.Pass},blankLine:function(e){var t=e.innerActive?e.innerActive.mode:u;if(t.blankLine&&t.blankLine(e.innerActive?e.inner:e.outer),e.innerActive)"\n"===e.innerActive.close&&(e.innerActive=e.inner=null);else for(var i=0;i<f.length;++i){var n=f[i];"\n"===n.open&&(e.innerActive=n,e.inner=p.startState(n.mode,t.indent?t.indent(e.outer,""):0))}},electricChars:u.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:u}}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(L){"use strict";var z={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},k={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};L.defineMode("xml",function(e,t){var i,o,a,l=e.indentUnit,s={},n=t.htmlMode?z:k;for(i in n)s[i]=n[i];for(i in t)s[i]=t[i];function d(t,i){function e(e){return(i.tokenize=e)(t,i)}var n=t.next();if("<"==n)return t.eat("!")?t.eat("[")?t.match("CDATA[")?e(r("atom","]]>")):null:t.match("--")?e(r("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function n(r){return function(e,t){for(var i;null!=(i=e.next());){if("<"==i)return t.tokenize=n(r+1),t.tokenize(e,t);if(">"==i){if(1!=r)return t.tokenize=n(r-1),t.tokenize(e,t);t.tokenize=d;break}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),i.tokenize=r("meta","?>"),"meta"):(o=t.eat("/")?"closeTag":"openTag",i.tokenize=c,"tag bracket");if("&"!=n)return t.eatWhile(/[^&<]/),null;n=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";");return n?"atom":"error"}function c(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=d,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"!=i)return/[\'\"]/.test(i)?(t.tokenize=(n=i,r.isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");t.tokenize=d,t.state=p,t.tagName=t.tagStart=null;var n,t=t.tokenize(e,t);return t?t+" tag error":"tag error";function r(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=c;break}return"string"}}function r(i,n){return function(e,t){for(;!e.eol();){if(e.match(n)){t.tokenize=d;break}e.next()}return i}}function u(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function f(e){e.context&&(e.context=e.context.prev)}function h(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!s.contextGrabbers.hasOwnProperty(i)||!s.contextGrabbers[i].hasOwnProperty(t))return;f(e)}}function p(e,t,i){return"openTag"==e?(i.tagStart=t.column(),g):"closeTag"==e?v:p}function g(e,t,i){return"word"==e?(i.tagName=t.current(),a="tag",m):s.allowMissingTagName&&"endTag"==e?(a="tag bracket",m(e,0,i)):(a="error",g)}function v(e,t,i){if("word"!=e)return s.allowMissingTagName&&"endTag"==e?(a="tag bracket",_(e,0,i)):(a="error",x);t=t.current();return i.context&&i.context.tagName!=t&&s.implicitlyClosed.hasOwnProperty(i.context.tagName)&&f(i),i.context&&i.context.tagName==t||!1===s.matchClosing?(a="tag",_):(a="tag error",x)}function _(e,t,i){return"endTag"!=e?(a="error",_):(f(i),p)}function x(e,t,i){return a="error",_(e,0,i)}function m(e,t,i){if("word"==e)return a="attribute",y;if("endTag"!=e&&"selfcloseTag"!=e)return a="error",m;var n=i.tagName,r=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||s.autoSelfClosers.hasOwnProperty(n)?h(i,n):(h(i,n),i.context=new u(i,n,r==i.indented)),p}function y(e,t,i){return"equals"==e?b:(s.allowMissing||(a="error"),m(e,0,i))}function b(e,t,i){return"string"==e?w:"word"==e&&s.allowUnquoted?(a="string",m):(a="error",m(e,0,i))}function w(e,t,i){return"string"==e?w:m(e,0,i)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var i=t.tokenize(e,t);return(i||o)&&"comment"!=i&&(a=null,t.state=t.state(o||i,e,t),a&&(i="error"==a?i+" error":a)),i},indent:function(e,t,i){var n=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+l;if(n&&n.noIndent)return L.Pass;if(e.tokenize!=c&&e.tokenize!=d)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==s.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var r=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(r&&r[1])for(;n;){if(n.tagName==r[2]){n=n.prev;break}if(!s.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(r)for(;n;){var o=s.contextGrabbers[n.tagName];if(!o||!o.hasOwnProperty(r[2]))break;n=n.prev}for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+l:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(e){e.state==b&&(e.state=m)}}}),L.defineMIME("text/xml","xml"),L.defineMIME("application/xml","xml"),L.mimeModes.hasOwnProperty("text/html")||L.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(Qe){"use strict";Qe.defineMode("javascript",function(e,c){var t,i,n,r,u=e.indentUnit,f=c.statementIndent,o=c.jsonld,a=c.json||o,d=c.typescript,h=c.wordCharacters||/[\w$\xa1-\uffff]/,l=(t=s("keyword a"),i=s("keyword b"),n=s("keyword c"),r=s("keyword d"),e=s("operator"),{if:s("if"),while:t,with:t,else:i,do:i,try:i,finally:i,return:r,break:r,continue:r,new:s("new"),delete:n,void:n,throw:n,debugger:s("debugger"),var:s("var"),const:s("var"),let:s("var"),function:s("function"),catch:s("catch"),for:s("for"),switch:s("switch"),case:s("case"),default:s("default"),in:e,typeof:e,instanceof:e,true:e={type:"atom",style:"atom"},false:e,null:e,undefined:e,NaN:e,Infinity:e,this:s("this"),class:s("class"),super:s("atom"),yield:n,export:s("export"),import:s("import"),extends:n,await:n});function s(e){return{type:e,style:"keyword"}}var p,g,v=/[+\-*&%=<>!?|~^@]/,_=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function x(e,t,i){return p=e,g=i,t}function m(e,t){var r,i=e.next();if('"'==i||"'"==i)return t.tokenize=(r=i,function(e,t){var i,n=!1;if(o&&"@"==e.peek()&&e.match(_))return t.tokenize=m,x("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=r||n);)n=!n&&"\\"==i;return n||(t.tokenize=m),x("string","string")}),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return x("number","number");if("."==i&&e.match(".."))return x("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return x(i);if("="==i&&e.eat(">"))return x("=>","operator");if("0"==i&&e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return x("number","number");if(/\d/.test(i))return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),x("number","number");if("/"==i)return e.eat("*")?(t.tokenize=y)(e,t):e.eat("/")?(e.skipToEnd(),x("comment","comment")):Ze(e,t,1)?(function(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),x("regexp","string-2")):(e.eat("="),x("operator","operator",e.current()));if("`"==i)return(t.tokenize=b)(e,t);if("#"==i)return e.skipToEnd(),x("error","error");if(v.test(i))return">"==i&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=i&&"="!=i||e.eat("="):/[<>*+\-]/.test(i)&&(e.eat(i),">"==i&&e.eat(i))),x("operator","operator",e.current());if(h.test(i)){e.eatWhile(h);i=e.current();if("."!=t.lastType){if(l.propertyIsEnumerable(i)){t=l[i];return x(t.type,t.style,i)}if("async"==i&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return x("async","keyword",i)}return x("variable","variable",i)}}function y(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=m;break}n="*"==i}return x("comment","comment")}function b(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=m;break}n=!n&&"\\"==i}return x("quasi","string-2",e.current())}var w="([{}])";function L(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i,n=e.string.indexOf("=>",e.start);if(!(n<0)){!d||(i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n)))&&(n=i.index);for(var r=0,o=!1,a=n-1;0<=a;--a){var l=e.string.charAt(a),s=w.indexOf(l);if(0<=s&&s<3){if(!r){++a;break}if(0==--r){"("==l&&(o=!0);break}}else if(3<=s&&s<6)++r;else if(h.test(l))o=!0;else{if(/["'\/]/.test(l))return;if(o&&!r){++a;break}}}o&&!r&&(t.fatArrowAt=a)}}var z={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function k(e,t,i,n,r,o){this.indented=e,this.column=t,this.type=i,this.prev=r,this.info=o,null!=n&&(this.align=n)}function S(e,t,i,n,r){var o=e.cc;for(V.state=e,V.stream=r,V.marked=null,V.cc=o,V.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():a?X:W)(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return V.marked?V.marked:"variable"==i&&function(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return 1;for(var n=e.context;n;n=n.prev)for(i=n.vars;i;i=i.next)if(i.name==t)return 1}(e,n)?"variable-2":t}}var V={state:null,column:null,marked:null,cc:null};function K(){for(var e=arguments.length-1;0<=e;e--)V.cc.push(arguments[e])}function C(){return K.apply(null,arguments),!0}function T(e,t){for(var i=t;i;i=i.next)if(i.name==e)return 1}function A(e){var t=V.state;if(V.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,i){{if(i){if(i.block){var n=e(t,i.prev);return n?n==i.prev?i:new M(n,i.vars,!0):null}return T(t,i.vars)?i:new M(i.prev,new N(t,i.vars),!1)}return null}}(e,t.context);if(null!=i)return void(t.context=i)}else if(!T(e,t.localVars))return void(t.localVars=new N(e,t.localVars));c.globalVars&&!T(e,t.globalVars)&&(t.globalVars=new N(e,t.globalVars))}function E(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function M(e,t,i){this.prev=e,this.vars=t,this.block=i}function N(e,t){this.name=e,this.next=t}var I=new N("this",new N("arguments",null));function D(){V.state.context=new M(V.state.context,V.state.localVars,!1),V.state.localVars=I}function O(){V.state.context=new M(V.state.context,V.state.localVars,!0),V.state.localVars=null}function B(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}function R(n,r){function e(){var e=V.state,t=e.indented;if("stat"==e.lexical.type)t=e.lexical.indented;else for(var i=e.lexical;i&&")"==i.type&&i.align;i=i.prev)t=i.indented;e.lexical=new k(t,V.stream.column(),n,null,e.lexical,r)}return e.lex=!0,e}function P(){var e=V.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function H(i){return function e(t){return t==i?C():";"==i||"}"==t||")"==t||"]"==t?K():C(e)}}function W(e,t){return"var"==e?C(R("vardef",t),we,H(";"),P):"keyword a"==e?C(R("form"),$,W,P):"keyword b"==e?C(R("form"),W,P):"keyword d"==e?V.stream.match(/^\s*$/,!1)?C():C(R("stat"),q,H(";"),P):"debugger"==e?C(H(";")):"{"==e?C(R("}"),O,ce,P,B):";"==e?C():"if"==e?("else"==V.state.lexical.info&&V.state.cc[V.state.cc.length-1]==P&&V.state.cc.pop()(),C(R("form"),$,W,P,Ke)):"function"==e?C(Ne):"for"==e?C(R("form"),Ce,W,P):"class"==e||d&&"interface"==t?(V.marked="keyword",C(R("form"),Oe,P)):"variable"==e?d&&"declare"==t?(V.marked="keyword",C(W)):d&&("module"==t||"enum"==t||"type"==t)&&V.stream.match(/^\s*\w/,!1)?(V.marked="keyword","enum"==t?C(Ge):"type"==t?C(pe,H("operator"),pe,H(";")):C(R("form"),Le,H("{"),R("}"),ce,P,P)):d&&"namespace"==t?(V.marked="keyword",C(R("form"),X,ce,P)):d&&"abstract"==t?(V.marked="keyword",C(W)):C(R("stat"),ne):"switch"==e?C(R("form"),$,H("{"),R("}","switch"),O,ce,P,P,B):"case"==e?C(X,H(":")):"default"==e?C(H(":")):"catch"==e?C(R("form"),D,j,W,P,B):"export"==e?C(R("stat"),He,P):"import"==e?C(R("stat"),je,P):"async"==e?C(W):"@"==t?C(X,W):K(R("stat"),X,H(";"),P)}function j(e){if("("==e)return C(Ie,H(")"))}function X(e,t){return U(e,t,!1)}function F(e,t){return U(e,t,!0)}function $(e){return"("!=e?K():C(R(")"),X,H(")"),P)}function U(e,t,i){if(V.state.fatArrowAt==V.stream.start){var n=i?ee:J;if("("==e)return C(D,R(")"),se(Ie,")"),P,H("=>"),n,B);if("variable"==e)return K(D,Le,H("=>"),n,B)}var r,n=i?Y:G;return z.hasOwnProperty(e)?C(n):"function"==e?C(Ne,n):"class"==e||d&&"interface"==t?(V.marked="keyword",C(R("form"),De,P)):"keyword c"==e||"async"==e?C(i?F:X):"("==e?C(R(")"),q,H(")"),P,n):"operator"==e||"spread"==e?C(i?F:X):"["==e?C(R("]"),qe,P,n):"{"==e?de(oe,"}",null,n):"quasi"==e?K(Z,n):"new"==e?C((r=i,function(e){return"."==e?C(r?ie:te):"variable"==e&&d?C(me,r?Y:G):K(r?F:X)})):"import"==e?C(X):C()}function q(e){return e.match(/[;\}\)\],]/)?K():K(X)}function G(e,t){return","==e?C(X):Y(e,t,!1)}function Y(e,t,i){var n=0==i?G:Y,r=0==i?X:F;return"=>"==e?C(D,i?ee:J,B):"operator"==e?/\+\+|--/.test(t)||d&&"!"==t?C(n):d&&"<"==t&&V.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?C(R(">"),se(pe,">"),P,n):"?"==t?C(X,H(":"),r):C(r):"quasi"==e?K(Z,n):";"!=e?"("==e?de(F,")","call",n):"."==e?C(re,n):"["==e?C(R("]"),q,H("]"),P,n):d&&"as"==t?(V.marked="keyword",C(pe,n)):"regexp"==e?(V.state.lastType=V.marked="operator",V.stream.backUp(V.stream.pos-V.stream.start-1),C(r)):void 0:void 0}function Z(e,t){return"quasi"!=e?K():"${"!=t.slice(t.length-2)?C(Z):C(X,Q)}function Q(e){if("}"==e)return V.marked="string-2",V.state.tokenize=b,C(Z)}function J(e){return L(V.stream,V.state),K("{"==e?W:X)}function ee(e){return L(V.stream,V.state),K("{"==e?W:F)}function te(e,t){if("target"==t)return V.marked="keyword",C(G)}function ie(e,t){if("target"==t)return V.marked="keyword",C(Y)}function ne(e){return":"==e?C(P,W):K(G,H(";"),P)}function re(e){if("variable"==e)return V.marked="property",C()}function oe(e,t){return"async"==e?(V.marked="property",C(oe)):"variable"!=e&&"keyword"!=V.style?"number"==e||"string"==e?(V.marked=o?"property":V.style+" property",C(le)):"jsonld-keyword"==e?C(le):d&&E(t)?(V.marked="keyword",C(oe)):"["==e?C(X,ue,H("]"),le):"spread"==e?C(F,le):"*"==t?(V.marked="keyword",C(oe)):":"==e?K(le):void 0:(V.marked="property","get"==t||"set"==t?C(ae):(d&&V.state.fatArrowAt==V.stream.start&&(i=V.stream.match(/^\s*:\s*/,!1))&&(V.state.fatArrowAt=V.stream.pos+i[0].length),C(le)));var i}function ae(e){return"variable"!=e?K(le):(V.marked="property",C(Ne))}function le(e){return":"==e?C(F):"("==e?K(Ne):void 0}function se(n,r,o){function a(e,t){if(o?-1<o.indexOf(e):","==e){var i=V.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),C(function(e,t){return e==r||t==r?K():K(n)},a)}return e==r||t==r?C():C(H(r))}return function(e,t){return e==r||t==r?C():K(n,a)}}function de(e,t,i){for(var n=3;n<arguments.length;n++)V.cc.push(arguments[n]);return C(R(t,i),se(e,t),P)}function ce(e){return"}"==e?C():K(W,ce)}function ue(e,t){if(d)return":"==e?C(pe):"?"==t?C(ue):void 0}function fe(e){if(d&&":"==e)return V.stream.match(/^\s*\w+\s+is\b/,!1)?C(X,he,pe):C(pe)}function he(e,t){if("is"==t)return V.marked="keyword",C()}function pe(e,t){return"keyof"==t||"typeof"==t?(V.marked="keyword",C("keyof"==t?pe:F)):"variable"==e||"void"==t?(V.marked="type",C(xe)):"string"==e||"number"==e||"atom"==e?C(xe):"["==e?C(R("]"),se(pe,"]",","),P,xe):"{"==e?C(R("}"),se(ve,"}",",;"),P,xe):"("==e?C(se(_e,")"),ge):"<"==e?C(se(pe,">"),pe):void 0}function ge(e){if("=>"==e)return C(pe)}function ve(e,t){return"variable"==e||"keyword"==V.style?(V.marked="property",C(ve)):"?"==t?C(ve):":"==e?C(pe):"["==e?C(X,ue,H("]"),ve):void 0}function _e(e,t){return"variable"==e&&V.stream.match(/^\s*[?:]/,!1)||"?"==t?C(_e):(":"==e?C:K)(pe)}function xe(e,t){return"<"==t?C(R(">"),se(pe,">"),P,xe):"|"==t||"."==e||"&"==t?C(pe):"["==e?C(H("]"),xe):"extends"==t||"implements"==t?(V.marked="keyword",C(pe)):void 0}function me(e,t){if("<"==t)return C(R(">"),se(pe,">"),P,xe)}function ye(){return K(pe,be)}function be(e,t){if("="==t)return C(pe)}function we(e,t){return"enum"==t?(V.marked="keyword",C(Ge)):K(Le,ue,Se,Ve)}function Le(e,t){return d&&E(t)?(V.marked="keyword",C(Le)):"variable"==e?(A(t),C()):"spread"==e?C(Le):"["==e?de(ke,"]"):"{"==e?de(ze,"}"):void 0}function ze(e,t){return"variable"!=e||V.stream.match(/^\s*:/,!1)?("variable"==e&&(V.marked="property"),"spread"==e?C(Le):"}"==e?K():C(H(":"),Le,Se)):(A(t),C(Se))}function ke(){return K(Le,Se)}function Se(e,t){if("="==t)return C(F)}function Ve(e){if(","==e)return C(we)}function Ke(e,t){if("keyword b"==e&&"else"==t)return C(R("form","else"),W,P)}function Ce(e,t){return"await"==t?C(Ce):"("==e?C(R(")"),Te,H(")"),P):void 0}function Te(e){return"var"==e?C(we,H(";"),Ee):";"==e?C(Ee):"variable"==e?C(Ae):K(X,H(";"),Ee)}function Ae(e,t){return"in"==t||"of"==t?(V.marked="keyword",C(X)):C(G,Ee)}function Ee(e,t){return";"==e?C(Me):"in"==t||"of"==t?(V.marked="keyword",C(X)):K(X,H(";"),Me)}function Me(e){")"!=e&&C(X)}function Ne(e,t){return"*"==t?(V.marked="keyword",C(Ne)):"variable"==e?(A(t),C(Ne)):"("==e?C(D,R(")"),se(Ie,")"),P,fe,W,B):d&&"<"==t?C(R(">"),se(ye,">"),P,Ne):void 0}function Ie(e,t){return"@"==t&&C(X,Ie),"spread"==e?C(Ie):d&&E(t)?(V.marked="keyword",C(Ie)):K(Le,ue,Se)}function De(e,t){return("variable"==e?Oe:Be)(e,t)}function Oe(e,t){if("variable"==e)return A(t),C(Be)}function Be(e,t){return"<"==t?C(R(">"),se(ye,">"),P,Be):"extends"==t||"implements"==t||d&&","==e?("implements"==t&&(V.marked="keyword"),C(d?pe:X,Be)):"{"==e?C(R("}"),Re,P):void 0}function Re(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||d&&E(t))&&V.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(V.marked="keyword",C(Re)):"variable"==e||"keyword"==V.style?(V.marked="property",C(d?Pe:Ne,Re)):"["==e?C(X,ue,H("]"),d?Pe:Ne,Re):"*"==t?(V.marked="keyword",C(Re)):";"==e?C(Re):"}"==e?C():"@"==t?C(X,Re):void 0}function Pe(e,t){return"?"==t?C(Pe):":"==e?C(pe,Se):"="==t?C(F):K(Ne)}function He(e,t){return"*"==t?(V.marked="keyword",C(Ue,H(";"))):"default"==t?(V.marked="keyword",C(X,H(";"))):"{"==e?C(se(We,"}"),Ue,H(";")):K(W)}function We(e,t){return"as"==t?(V.marked="keyword",C(H("variable"))):"variable"==e?K(F,We):void 0}function je(e){return"string"==e?C():"("==e?K(X):K(Xe,Fe,Ue)}function Xe(e,t){return"{"==e?de(Xe,"}"):("variable"==e&&A(t),"*"==t&&(V.marked="keyword"),C($e))}function Fe(e){if(","==e)return C(Xe,Fe)}function $e(e,t){if("as"==t)return V.marked="keyword",C(Xe)}function Ue(e,t){if("from"==t)return V.marked="keyword",C(X)}function qe(e){return"]"==e?C():K(se(F,"]"))}function Ge(){return K(R("form"),Le,H("{"),R("}"),se(Ye,"}"),P,P)}function Ye(){return K(Le,Se)}function Ze(e,t,i){return t.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(i||0)))}return P.lex=B.lex=!0,{startState:function(e){e={tokenize:m,lastType:"sof",cc:[],lexical:new k((e||0)-u,0,"block",!1),localVars:c.localVars,context:c.localVars&&new M(null,null,!1),indented:e||0};return c.globalVars&&"object"==typeof c.globalVars&&(e.globalVars=c.globalVars),e},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),L(e,t)),t.tokenize!=y&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==p?i:(t.lastType="operator"!=p||"++"!=g&&"--"!=g?p:"incdec",S(t,i,p,g,e))},indent:function(e,t){if(e.tokenize==y)return Qe.Pass;if(e.tokenize!=m)return 0;var i,n=t&&t.charAt(0),r=e.lexical;if(!/^\s*else\b/.test(t))for(var o=e.cc.length-1;0<=o;--o){var a=e.cc[o];if(a==P)r=r.prev;else if(a!=Ke)break}for(;("stat"==r.type||"form"==r.type)&&("}"==n||(i=e.cc[e.cc.length-1])&&(i==G||i==Y)&&!/^[,\.=+\-*:?[\(]/.test(t));)r=r.prev;f&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var l,s=r.type,d=n==s;return"vardef"==s?r.indented+("operator"==e.lastType||","==e.lastType?r.info.length+1:0):"form"==s&&"{"==n?r.indented:"form"==s?r.indented+u:"stat"==s?r.indented+(l=t,"operator"==(s=e).lastType||","==s.lastType||v.test(l.charAt(0))||/[,.]/.test(l.charAt(0))?f||u:0):"switch"!=r.info||d||0==c.doubleIndentSwitch?r.align?r.column+(d?0:1):r.indented+(d?0:u):r.indented+(/^(?:case|default)\b/.test(t)?u:2*u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",blockCommentContinue:a?null:" * ",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:o,jsonMode:a,expressionAllowed:Ze,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=X&&t!=F||e.cc.pop()}}}),Qe.registerHelper("wordChars","javascript",/[\w$]/),Qe.defineMIME("text/javascript","javascript"),Qe.defineMIME("text/ecmascript","javascript"),Qe.defineMIME("application/javascript","javascript"),Qe.defineMIME("application/x-javascript","javascript"),Qe.defineMIME("application/ecmascript","javascript"),Qe.defineMIME("application/json",{name:"javascript",json:!0}),Qe.defineMIME("application/x-json",{name:"javascript",json:!0}),Qe.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Qe.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Qe.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(u){"use strict";var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var i={};function f(e,t){t=e.match(i[t=t]||(i[t]=new RegExp("\\s+"+t+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")));return t?/^\s*(.*?)\s*$/.exec(t[2])[1]:""}function h(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var i in e)for(var n=t[i]||(t[i]=[]),r=e[i],o=r.length-1;0<=o;o--)n.unshift(r[o])}u.defineMode("htmlmixed",function(l,e){var s=u.getMode(l,{name:"xml",htmlMode:!0,multilineTagIndentFactor:e.multilineTagIndentFactor,multilineTagIndentPastTag:e.multilineTagIndentPastTag}),d={},t=e&&e.tags,i=e&&e.scriptTypes;if(o(r,d),t&&o(t,d),i)for(var n=i.length-1;0<=n;n--)d.script.unshift(["type",i[n].matches,i[n].mode]);function c(e,t){var i,o,a,n=s.token(e,t.htmlState),r=/\btag\b/.test(n);return r&&!/[<>\s\/]/.test(e.current())&&(i=t.htmlState.tagName&&t.htmlState.tagName.toLowerCase())&&d.hasOwnProperty(i)?t.inTag=i+" ":t.inTag&&r&&/>$/.test(e.current())?(i=/^([\S]+) (.*)/.exec(t.inTag),t.inTag=null,r=">"==e.current()&&function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(!n[0]||n[1].test(f(t,n[0])))return n[2]}}(d[i[1]],i[2]),r=u.getMode(l,r),o=h(i[1],!0),a=h(i[1],!1),t.token=function(e,t){return e.match(o,!1)?(t.token=c,t.localState=t.localMode=null):(i=e,n=a,r=t.localMode.token(e,t.localState),e=i.current(),-1<(t=e.search(n))?i.backUp(e.length-t):e.match(/<\/?$/)&&(i.backUp(e.length),i.match(n,!1)||i.match(e)),r);var i,n,r},t.localMode=r,t.localState=u.startState(r,s.indent(t.htmlState,""))):t.inTag&&(t.inTag+=e.current(),e.eol()&&(t.inTag+=" ")),n}return{startState:function(){return{token:c,inTag:null,localMode:null,localState:null,htmlState:u.startState(s)}},copyState:function(e){var t;return e.localState&&(t=u.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:t,htmlState:u.copyState(s,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t,i){return!e.localMode||/^\s*<\//.test(t)?s.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t,i):u.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),u.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/multiplex"],e):e(CodeMirror)}(function(n){"use strict";n.defineMode("htmlembedded",function(e,t){var i=t.closeComment||"--%>";return n.multiplexingMode(n.getMode(e,"htmlmixed"),{open:t.openComment||"<%--",close:i,delimStyle:"comment",mode:{token:function(e){return e.skipTo(i)||e.skipToEnd(),"comment"}}},{open:t.open||t.scriptStartRegex||"<%",close:t.close||t.scriptEndRegex||"%>",mode:n.getMode(e,t.scriptingModeSpec)})},"htmlmixed"),n.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"}),n.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"}),n.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"}),n.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})}),define("gallery/mx-codemirror/index",["magix","$"],function(e,t,i){t.__esModule=!0;var n=e("magix"),r=e("$");n.default.applyStyle("xzKVLdvo",'.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr;height:500px;border:1px solid #e6e6e6;border-radius:4px}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:rgba(20,255,20,.5)}.cm-animate-fat-cursor,.cm-fat-cursor-mark{-webkit-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;border:0;background-color:#7e7}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}.CodeMirror:hover{border-color:#ccc}.CodeMirror-focus,.CodeMirror-focus:hover{border-color:#06f}'),t.default=n.default.View.extend({render:function(){var t=CodeMirror.fromTextArea(n.default.node(this.id),{lineNumbers:!0,mode:"application/x-ejs",lineWrapping:!0}),i=r.default("#"+this.id);t.on("blur",function(e){r.default(t.display.wrapper).removeClass("CodeMirror-focus"),i.trigger({type:"change",value:e.getValue()})}),t.on("focus",function(){r.default(t.display.wrapper).addClass("CodeMirror-focus")}),this.on("destroy",function(){t.toTextArea()})}})}),define("gallery/mx-cell/focus",["magix","$","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("$"),o=e("../../util/table");n.default.applyStyle("xzKVLdvm",".xzKVLdvbU{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.xzKVLdvbV{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.xzKVLdvbV:hover{background:#ccc}.xzKVLdvbW{width:16px;margin:2px}.xzKVLdvbX,.xzKVLdvbX:hover{background:#06f;color:#fff}.xzKVLdvbY,.xzKVLdvbY .xzKVLdvbV{cursor:not-allowed;opacity:.7}.xzKVLdvbY .xzKVLdvbV,.xzKVLdvbY .xzKVLdvbV:hover{background:#e9e9e9}.xzKVLdvbY .xzKVLdvbX,.xzKVLdvbY .xzKVLdvbX:hover{background:#6aa5ff}.xzKVLdvbZ{transform:rotate(180deg)}.xzKVLdvc_{transform:rotate(90deg)}.xzKVLdvca{transform:rotate(270deg)}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,e=e.i18n;return s+='<ul class="xzKVLdvx xzKVLdvbU',d&&(s+=" xzKVLdvbY"),s+='"><li title="'+n(e("_fO"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN" mx-click="'+t+"\x1e__bz({key:'left'})\">&#xe616;</li><li title=\""+n(e("_fP"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN xzKVLdvbZ" mx-click="'+t+"\x1e__bz({key:'right'})\">&#xe616;</li><li title=\""+n(e("_fQ"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN xzKVLdvc_" mx-click="'+t+"\x1e__bz({key:'top'})\">&#xe616;</li><li title=\""+n(e("_fR"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN xzKVLdvca" mx-click="'+t+"\x1e__bz({key:'bottom'})\">&#xe616;</li></ul>"},init:function(e){this.assign(e),this.__t=r.default("#"+this.id)},assign:function(e){return this.__fN=e.props,this.updater.set({disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bz<click>":function(e){var t=e.params.key,e=this.__fN;o.default.__fC(e,t)&&this.__t.trigger("change")}})}),define("gallery/mx-cell/index",["magix","$","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("$"),o=e("../../util/table");n.default.applyStyle("xzKVLdvm",".xzKVLdvbU{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.xzKVLdvbV{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.xzKVLdvbV:hover{background:#ccc}.xzKVLdvbW{width:16px;margin:2px}.xzKVLdvbX,.xzKVLdvbX:hover{background:#06f;color:#fff}.xzKVLdvbY,.xzKVLdvbY .xzKVLdvbV{cursor:not-allowed;opacity:.7}.xzKVLdvbY .xzKVLdvbV,.xzKVLdvbY .xzKVLdvbV:hover{background:#e9e9e9}.xzKVLdvbY .xzKVLdvbX,.xzKVLdvbY .xzKVLdvbX:hover{background:#6aa5ff}.xzKVLdvbZ{transform:rotate(180deg)}.xzKVLdvc_{transform:rotate(90deg)}.xzKVLdvca{transform:rotate(270deg)}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,c=e.i18n;s+='<ul class="xzKVLdvx xzKVLdvbU',d&&(s+=" xzKVLdvbY"),s+='">';e="//img.alicdn.com/tfs/";return s+='<li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__ag"))+'" mx-click="'+t+'\x1e__bz({type:\'rt\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB1CxUfuTqWBKNjSZFAXXanSpXa-200-200.svg"/></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__ah"))+'" mx-click="'+t+'\x1e__bz({type:\'rb\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB1w9NvuP7nBKNjSZLeXXbxCFXa-200-200.svg"/></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__aj"))+'" mx-click="'+t+'\x1e__bz({type:\'cb\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB1ylQtuRsmBKNjSZFsXXaXSVXa-200-200.svg"/></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__ak"))+'" mx-click="'+t+'\x1e__bz({type:\'ca\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB1efU6uOMnBKNjSZFCXXX0KFXa-200-200.svg"/></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__ai"))+'" mx-click="'+t+'\x1e__bz({type:\'r\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB16QchuRsmBKNjSZFFXXcT9VXa-200-200.svg"/></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("__al"))+'" mx-click="'+t+'\x1e__bz({type:\'c\'})"><img class="xzKVLdvbW" src="'+n(e)+'TB13fs.uHArBKNjSZFLXXc_dVXa-200-200.svg"/></li></ul><ul class="xzKVLdvx xzKVLdvbU',d&&(s+=" xzKVLdvbY"),s+='" style="display:block"><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fU"))+'" mx-click="'+t+'\x1e__fT({type:\'ml\'})"><i mxs="xzKVLdvw:_" class="xzKVLdvN xzKVLdvbZ">&#xe603;</i></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fV"))+'" mx-click="'+t+'\x1e__fT({type:\'mr\'})"><i mxs="xzKVLdvw:a" class="xzKVLdvN">&#xe603;</i></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fW"))+'" mx-click="'+t+'\x1e__fT({type:\'mu\'})"><i mxs="xzKVLdvw:b" class="xzKVLdvN xzKVLdvca">&#xe603;</i></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fX"))+'" mx-click="'+t+'\x1e__fT({type:\'md\'})"><i mxs="xzKVLdvw:c" class="xzKVLdvN xzKVLdvc_">&#xe603;</i></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fY"))+'" mx-click="'+t+'\x1e__fT({type:\'sh\'})"><i mxs="xzKVLdvw:d" class="xzKVLdvN">&#xe672;</i></li><li class="xzKVLdvp xzKVLdvbV" title="'+n(c("_fZ"))+'" mx-click="'+t+'\x1e__fT({type:\'sv\'})"><i mxs="xzKVLdvw:e" class="xzKVLdvN xzKVLdvc_">&#xe672;</i></li></ul>'},init:function(e){this.assign(e),this.__t=r.default("#"+this.id)},assign:function(e){return this.updater.set({props:e.props,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bz<click>":function(e){var t=this.updater.get();this.updater.get("disabled")||o.default.__fG(t.props,e.params.type)&&this.__t.trigger("change")},"__fT<click>":function(e){var t=this.updater.get();this.updater.get("disabled")||o.default.__fS(t.props,e.params.type)&&this.__t.trigger("change")}})}),define("gallery/mx-cell/size",["$","magix","../../util/converter","../../util/table","../../cainiao/const","../mx-number/index"],function(e,t,i){e("../mx-number/index"),t.__esModule=!0;var n=e("$"),r=e("magix"),o=e("../../util/converter"),a=e("../../util/table"),l=e("../../cainiao/const");r.default.applyStyle("xzKVLdvn",".xzKVLdvcb{display:block;margin:4px 0}.xzKVLdvcc{display:inline-flex;align-items:center}"),t.default=r.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.read,c=e.mSize,u=e.col,f=e.disabled,h=e.i18n;return s+='<div class="xzKVLdvcb xzKVLdvB xzKVLdvu" ',(e=f)&&(s+='readonly="'+n(e)+'" '),s+=' mx-input="'+t+"\x1e__bz({type:'col'})\" mx-view=\"gallery/mx-number/index?fixed=2&min="+o(d(c))+"&value="+o(d(u.width)),(e=f)&&(s+="&disabled="+o(e)),s+='"></div><div class="xzKVLdvcb xzKVLdvB xzKVLdvu" style="',u.autoHeight&&(s+="display:none"),s+='" ',(e=f)&&(s+='readonly="'+n(e)+'" '),s+=' mx-input="'+t+"\x1e__bz({type:'row'})\" mx-view=\"gallery/mx-number/index?fixed=2&min="+o(d(c))+"&value="+o(d(u.height)),(e=f)&&(s+="&disabled="+o(e)),s+='"></div><div mxv mxa="xzKVLdvx:_" class="xzKVLdvcc">'+n(h("__eE"))+':<input type="checkbox" ',(e=u.autoHeight)&&(s+="checked"),s+=' class="xzKVLdvE xzKVLdvg" mx-change="'+t+'\x1e__g_()"/></div>'},init:function(e){this.assign(e),this.__t=n.default("#"+this.id)},assign:function(e){var t=e.props,i=t.rows,n=t.rowIndex,t=t.colIndex,n=i[n],t=(t=(n=n||i[0]).cells[t])||n.cells[0];return this.updater.set({col:t,props:e.props,mSize:l.default.TABLE_MIN_SIZE,read:o.default.__i,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__g_<change>":function(e){var t=this.updater.get(),i=t.props,t=t.col,e=e.eventTarget.checked;(t.autoHeight=e)&&(t.height=l.default.TABLE_ROWS_HEIGHT),a.default.__l(i),this.__t.trigger("change")},"__bz<input,change>":function(e){var t=e.params.type,i=this.updater.get(),n=i.props,i=i.col,e=o.default.__h(e.value);"row"==t?i.height=e:"col"==t&&(i.width=e),i.id||(i.id=r.default.guid("td_")),a.default.__l(n,{col:i}),this.__t.trigger("change")}})}),define("gallery/mx-dragdrop/index",["$"],function(e,t,i){function o(e){(e=window.getSelection)?e().removeAllRanges():(e=window.document.selection)&&(e.empty?e.empty():e=null)}function a(e){e.preventDefault()}var l=e("$"),s=l(window),d=l(document),n=window.getComputedStyle,c="mousemove touchmove",u="mouseup touchend",f="keydown mousewheel DOMMouseScroll";i.exports={ctor:function(){var e=this;e.on("destroy",function(){e.__gk()})},__gk:function(e){var t,i,n=this.__gl;n&&(delete this.__gl,d.off(c,this.__gm).off(u,this.__gn).off(f,a),s.off("blur",this.__gn),t=n.__go,i=n.__gp,n=n.__gq,l(t).off("losecapture",this.__gn),t.setCapture&&t.releaseCapture(),n&&i(e))},dragdrop:function(e,t,i){var n,r=this;r.__gk(),e&&(o(),e.setCapture&&e.setCapture(),r.__gl={__gp:i,__go:e,__gq:l.isFunction(i)},n=l.isFunction(t),r.__gr=0,r.__gn=function(e){r.__gr=1,r.__gk(e)},r.__gm=function(e){n&&t(e)},d.on(c,r.__gm).on(u,r.__gn).on(f,a),s.on("blur",r.__gn),l(e).on("losecapture",r.__gn))},fromPoint:function(e,t){var i=null;if(document.elementFromPoint)for(!a.__gs&&n&&(a.__gs=!0,a.__gt=null!==document.elementFromPoint(-1,-1)),a.__gt&&(e+=s.scrollLeft(),t+=s.scrollTop()),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},clear:o}}),define("gallery/mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],function(e,t,i){var l=e("magix"),s=e("../mx-dragdrop/index"),n=e("../mx-runner/index"),d=e("$");l.applyStyle("xzKVLdvq",'.xzKVLdvcr{left:-1000px;top:0;background:#06f;pointer-events:none}.xzKVLdvcr,.xzKVLdvcs{position:absolute;z-index:4000}.xzKVLdvcs{width:26px;height:26px}.xzKVLdvct{background:#06f}.xzKVLdvcu{background:#e94f4f}.xzKVLdvcs:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}.xzKVLdvct:after{content:"\u2713"}.xzKVLdvcu:after{content:"\u2717"}');var c=l.guid("dbar_"),r=l.guid("pt_"),u=d(window),f=d(document),h={__gu:function(){d("#"+c).length||d('<div class="xzKVLdvcr" id="'+c+'"/>').appendTo("body")},__gv:function(e){e.child&&(d(e.child).css({opacity:.4}),this.__gu())},__b_:function(e){e&&e.child&&d(e.child).css({opacity:1}),this.__gw(),this.__gx()},__gw:function(){d("#"+c).css({left:-1e5})},__gy:function(e,t){var i=d("#"+c),n=!1;2&e.anchor&&(2&t?(i.css({height:2,width:e.bound.width,top:e.bound.y-1,left:e.bound.x}),n=!0):8&t&&(i.css({height:2,width:e.bound.width,top:e.bound.y+e.bound.height-1,left:e.bound.x}),n=!0)),!n&&1&e.anchor&&(1&t?i.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x-1}):4&t&&i.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x+e.bound.width-1}))},__gA:function(e){e.atPlace&&e.child!=e.hover?(3==e.anchor?e.__gz&&this.__gy(e,e.side):e.__gA&&this.__gy(e,e.position),this.__gB(!0)):(this.__gw(),this.__gB())},__gC:function(e){var t=d("#"+r);t.length||(t=d('<div class="xzKVLdvcs" id="'+r+'"/>')).appendTo("body");var i=Math.max(0,Math.min(e.pageX+10,f.width()-t.width())),e=Math.max(0,Math.min(e.pageY+18,f.height()-t.height()));t.css({left:i,top:e,display:"block"})},__gB:function(e){var t=d("#"+r);e?t.removeClass("xzKVLdvcu").addClass("xzKVLdvct"):t.addClass("xzKVLdvcu").removeClass("xzKVLdvct")},__gx:function(){d("#"+r).hide()}};i.exports=l.View.extend({mixins:[s],init:function(e){var t=this,i=d("#"+t.id);i.on("mousedown",e.selector,function(e){e.preventDefault(),t.__gv(e)}),t.on("destroy",function(){i.off("mousedown")});var n=[(t.__t=i).get(0)];e.drops&&(n=n.concat(e.drops.split(","))),t.__gD=n;var r=e.horizonal+""=="true",o=e.vertical+""=="true";r||o||(o=!0);n=0;r&&(n|=1),o&&(n|=2),t.__gE=n;n=!0;l.has(e,"sort")&&(n=e.sort+""=="true"),t.__gF=n},__gG:function(e){for(var t=0,i=this.__gD;t<i.length;t++){var n=i[t];if(l.inside(e,n))return l.node(n)}return null},__gI:function(e,t){var i=null;if(t=t||this.__gG(e),!this.__gF&&this.__gH)return{child:this.__gH,zone:t};for(;t!=e;){if(e.parentNode==t){i=e;break}e=e.parentNode}return!t||t.firstChild||i||(i=t),i&&"false"===i.getAttribute("ds-draggable")&&(i=null),{child:i,zone:t}},__gK:function(e,t){var i=0,n=0,r=-1,o=-1,a=-1,l=-1,s=!1;t.pageX>=e.x&&t.pageX<=e.x+e.width&&t.pageY>=e.y&&t.pageY<=e.y+e.height&&(i|=t.pageX<=e.x+e.width/2?1:4,r=t.pageX-e.x,a=e.x+e.width-t.pageX,i|=t.pageY<=e.y+e.height/2?2:8,o=t.pageY-e.y,l=e.y+e.height-t.pageY,s=!0),!s||-1<(t=Math.min(r,o,a,l))&&(t==r?n=1:t==o?n=2:t==a?n=4:t==l&&(n=8));l=this.__gJ;return l&&l.zone===l.hover&&(i=2,n=1),{position:i,atPlace:s,side:n}},__gv:function(e){var t;1!==e.which||(e=(t=this).__gI(e.target)).child&&(t.__gH=e.child,t.__gL=e.zone,t.__t.trigger({type:"dragbegin",dragNode:e.child,dragZone:e.zone}),h.__gv(e),t.dragdrop(e.zone,function(e){t.__gM(e)},function(e){t.__b_(e)}))},__gP:function(e,t,i){var n=this.__gK(e,t),e=n.side!=this.__gN,t=n.position!=this.__gO;(e||t)&&(this.__gN=n.side,this.__gO=n.position,i.__gz=e,i.__gA=t,i.side=n.side,i.position=n.position,i.atPlace=n.atPlace,i.anchor=this.__gE,h.__gA(i))},__gM:function(e){var t,i,n,r,o=s.fromPoint(e.clientX,e.clientY),a=this;if(h.__gC(e),a.__gQ=e,a.__gR=!0,a.__gS(),a.__gT(),a.__gU||a.__gV||!o)return delete a.__gW,delete a.__gN,void delete a.__gO;a.__gW!=o?o.id!==c&&(a.__gW=o,delete a.__gN,(i=a.__gG(o))?(i!=a.__gX&&(a.__gX=i,a.__t.trigger({type:"enterzone",zone:i,changePointer:h.__gB})),(t=a.__gI(o,i)).child&&(i={x:(r=(n=d(t.child)).offset()).left,y:r.top,width:n.outerWidth(),height:n.outerHeight()},r=(n=d(t.zone)).offset(),a.__gY={x:r.left,y:r.top,scrollX:n.prop("scrollLeft"),scrollY:n.prop("scrollTop"),maxWidth:n.prop("scrollWidth"),maxHeight:n.prop("scrollHeight"),width:n.width(),height:n.height()},a.__gP(a.__gZ=i,e,a.__gJ={child:a.__gH,bound:i,zone:t.zone,hover:t.child}))):a.__gX&&(a.__t.trigger({type:"leavezone",zone:a.__gX,changePointer:h.__gB}),delete a.__gX)):a.__gZ&&l.inside(o,a.__gJ.zone)?a.__gP(a.__gZ,e,a.__gJ):(delete a.__gN,delete a.__gO,a.__gF&&(h.__gw(),h.__gB()))},__b_:function(){var e=this;e.__h_(),e.__ha(),h.__b_({child:e.__gH});var t=e.__gO,i=e.__gN,n=e.__gR,r=e.__gJ,o=e.__gH;if(n&&(t||i)){var a=r.zone,l=e.__gE,t=3===l?i:t;if(1&l&&1&t||2&t&&2&l)r.hover==a?a.appendChild(o):a.insertBefore(o,r.hover);else if(8&t&&2&l||4&t&&1&l){for(var s=r.hover.nextSibling;s&&1!=s.nodeType;)s=s.nextSibling;a.insertBefore(o,s),s||(a.scrollTop=a.scrollHeight)}}r&&e.__t.trigger({type:"dragfinish",moved:n,dragNode:o,dragZone:e.__gL,dropNode:r.hover,dropZone:r.zone,outZone:!e.__gX}),delete e.__gH,delete e.__gL,delete e.__gW,delete e.__gJ,delete e.__gZ,delete e.__gO,delete e.__gN,delete e.__gQ,delete e.__gV,delete e.__gX,delete e.__gY,delete e.__gU,delete e.__gR},__gS:function(){var o=this;o.__hb||(o.__hb=function(){var e,t,i,n,r=o.__gY;r&&(r.maxWidth>r.width+5||r.maxHeight>r.height+5)&&(e=o.__gJ.zone,i=t=0,(n=o.__gQ).pageX>r.x&&n.pageY>r.y&&n.pageX<r.x+r.width&&n.pageY<r.y+r.height?(n.pageX-r.x<20&&0<r.scrollX?t=-Math.min(7,r.scrollX):r.x+r.width-n.pageX<20&&r.scrollX+r.width<r.maxWidth&&(t=Math.min(7,r.maxWidth-r.scrollX-r.width)),n.pageY-r.y<20&&0<r.scrollY?i=-Math.min(7,r.scrollY):r.y+r.height-n.pageY<20&&r.scrollY+r.height<r.maxHeight&&(i=Math.min(7,r.maxHeight-r.scrollY-r.height)),t||i?(o.__gU=!0,o.__hc=!0,e.scrollTop+=i,e.scrollLeft+=t,r.scrollX+=t,r.scrollY+=i,delete o.__gR,h.__gw(),h.__gB()):(delete o.__gU,delete o.__hc)):(delete o.__gU,delete o.__hc))},n.__dS(30,o.__hb))},__gT:function(){var d=this;d.__hd||(d.__hd=function(){var e,t,i,n,r,o,a,l,s;d.__hc||(t=e=0,i=d.__gQ,n=u.scrollTop(),r=u.height(),o=f.height(),a=f.width(),l=u.width(),s=u.scrollLeft(),i.pageX-s<20&&0<s?e=-Math.min(7,s):s+l-i.pageX<20&&s+l<a&&(e=Math.min(7,a-l-s)),i.pageY-n<20&&0<n?t=-Math.min(7,n):n+r-i.pageY<20&&n+r<o&&(t=Math.min(7,o-r-n)),e||t?(d.__gV=!0,i.pageX+=e,i.pageY+=t,window.scrollBy(e,t),delete d.__gR,h.__gw(),h.__gC(i),h.__gB()):delete d.__gV)},n.__dS(30,d.__hd))},__h_:function(){this.__hb&&(n.__dV(this.__hb),delete this.__hb,delete this.__hc)},__ha:function(){this.__hd&&(n.__dV(this.__hd),delete this.__hd)}})}),define("gallery/mx-dropdown/index",["magix","$","../mx-monitor/index"],function(e,t,i){var c=e("magix"),u=e("$"),r=e("../mx-monitor/index");c.applyStyle("xzKVLdvr",'[mx-view*="/mx-dropdown/"]{outline:0;position:relative;width:140px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:25px}[mx-view*="/mx-dropdown/"]:hover{border-color:#ccc}.xzKVLdvcv{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 4px}.xzKVLdvcw{cursor:not-allowed;background-color:#fbfbfb}.xzKVLdvcw:hover{border-color:#e6e6e6}.xzKVLdvcw .xzKVLdvcv{cursor:not-allowed}.xzKVLdvcx{position:absolute;right:0;top:-1.5px;font-size:28px;color:#ccc;transition:transform .3s,top .3s}.xzKVLdvcy .xzKVLdvcx{transform:rotate(180deg);top:-3px}.xzKVLdvcy,.xzKVLdvcy:hover,[mx-view*="/mx-dropdown/"][tabindex="0"]:focus{border-color:#06f}.xzKVLdvcz{height:23px;line-height:23px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.xzKVLdvcA{color:#999}.xzKVLdvcB{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xzKVLdvcy .xzKVLdvcB{display:block}.xzKVLdvcC{overflow:auto;max-height:196px;padding:4px 0}.xzKVLdvcD{display:block;width:100%;padding:9px 9px 4px}.xzKVLdvcE{padding:0;width:100%}.xzKVLdvcF{color:#ccc;position:absolute;left:15px;top:16px}.xzKVLdvcG{padding-left:28px;height:28px;line-height:28px;width:100%}.xzKVLdvcH{padding:0 4px;margin:2px 0}.xzKVLdvcI{cursor:pointer;color:#666;display:block;width:100%;padding:0 4px;height:26px;line-height:26px;border-radius:4px}.xzKVLdvcI:hover{color:#333;background-color:#f0f0f0}.xzKVLdvcJ,.xzKVLdvcJ:active,.xzKVLdvcJ:focus,.xzKVLdvcJ:hover{color:#fff;background-color:#06f}'),i.exports=c.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.i18n,c=e.selectedText,u=e.selected,f=e.rList,h=e.searchbox,p=e.keyword,g=e.viewId,v=e.list,_=e.textKey,x=e.valueKey;if(s+='<div class="xzKVLdvcv" mx-click="'+t+'\x1e__he()" title="'+n(d(c))+'"><span class="xzKVLdvcz',""===u&&(s+=" xzKVLdvcA"),s+='">'+n(d(c))+'</span><span mxs="xzKVLdvB:_" class="xzKVLdv_ xzKVLdvcx">&#xe692;</span></div><div mxv mxa="xzKVLdvB:_" class="xzKVLdvcB">',f){s+=" ",h&&(s+='<div mxv mxa="xzKVLdvB:a" class="xzKVLdvcD"><label mxv mxa="xzKVLdvB:b" class="xzKVLdvcE"><span mxs="xzKVLdvB:a" class="xzKVLdv_ xzKVLdvcF">&#xe608;</span><input placeholder="'+n(d("_hv"))+'" mx-keyup="'+t+'\x1e__dz()" mx-paste="'+t+'\x1e__dz()" mx-change="'+t+'\x1e__hu()" mx-focusin="'+t+'\x1e__hu()" mx-focusout="'+t+'\x1e__hu()" class="xzKVLdvB xzKVLdvcG" value="'+n(p)+'"/></label></div>'),s+='<ul class="xzKVLdvcC" id="list_'+n(g)+'">';var m=void 0,y=void 0;s+=" ";for(var b=0,w=v;b<w.length;b++){var L=w[b];s+=" ",y=_&&x?(s+=" ",m=d(L[_]),L[x]):(s+=" ",m=L),s+=" ",s+='<li title="'+n(m)+'" class="xzKVLdvcH">',s+='<span class="xzKVLdvcI xzKVLdvy',y+""==u+""&&(s+=" xzKVLdvcJ"),s+='" mx-click="'+t+"\x1e__ht({item:'"+a(i,L)+"'})\">"+n(m)+"</span></li>"}s+="</ul>"}return s+="</div>"},init:function(e){var t=this;r.__cz();var i=u("#"+t.id);i.on("keydown",function(e){13==e.keyCode&&t["__he<click>"]()}),t.on("destroy",function(){i.off("keydown"),r.__cA(t),r.__cB()}),t.updater.set({viewId:t.id}),t.__t=i,t.__hf=!e.list,t.assign(e,{node:i})},assign:function(e,t){var i=t.node,n=t.inner,r=this;r.__hg=e.list;var o,a,l=r.__hh=e.selected,s=r.__hi=e.textKey||"",d=r.__hj=e.valueKey||"",t=r.__hk=e.emptyText||"";r.__hl=e.searchbox+""=="true",r.__hm=e.disabled+""=="true",r.__hf&&(i=i?u(i).children():u(n),o=[],i.each(function(e,t){t=u(t),a="true"==t.attr("group"),o.push({group:a,text:t.text(),value:a?c.guid():t.attr("value")})}),s=r.__hi="text",d=r.__hj="value",r.__hg=o);e=r.__hg,n=c.toMap(e,d);return t&&(s&&d?n[""]||((i={})[s]=t,i[d]="",e.unshift(i),n[""]=i):n[t]||(e.unshift(t),n[t]=t)),l||!t||s||d||(l=t),l&&n[l]||(l=n[l]||e[0],s&&d&&(l=l[d])),r.__hh=l,r.__hn=s&&d?n[l][s]:l,!0},__cC:function(e){return c.inside(e,this.id)},render:function(){this.__t[this.__hm?"addClass":"removeClass"]("xzKVLdvcw").prop("tabindex",this.__hm?-1:0),this.__ho(!0)},__ao:function(){this.__t.hasClass("xzKVLdvcy")&&(this.__t.removeClass("xzKVLdvcy").trigger("focusout"),r.__cA(this))},__an:function(){var e,t,i,n;this.__t.hasClass("xzKVLdvcy")||(this.updater.get("rList")||this.updater.digest({rList:!0}),this.__t.addClass("xzKVLdvcy").trigger("focusin"),t=(e=u("#list_"+this.id)).find(".xzKVLdvcJ").position(),n=e.height(),i=e.prop("scrollTop"),(t.top<0||t.top>n)&&(n=t.top-n+i+n/2,e.prop("scrollTop",n)),r.__cF(this))},__ho:function(e){var t=this.__hh;this.updater.digest({textKey:this.__hi,valueKey:this.__hj,selected:t,searchbox:this.__hl,selectedText:this.__hn,list:this.__hg.slice()}),this.__t.val(t),e||this.__hp(t)},__hq:function(o,a){var l=this;clearTimeout(l.__dy);var s,d=l.__hg,c=[],u=0,f=d.length,h=l.__hi,p=l.__hj;o?(s=function(){if(u<f){for(var e,t=Math.min(u+400,f),i=u,n=void 0,r=void 0;i<t;i++)r=n=e=d[i],h&&p&&(n=e[h],r=e[p]),(0<=(n+"").indexOf(o)||0<=(r+"").indexOf(o))&&c.push(e);u=t,l.__dy=setTimeout(l.wrapAsync(s),20)}else a(c)})():a(d)},__hp:function(e,t){var i=this.updater,n=this.__hj,r=this.__hi,o=this.__hh,a=e,l=e;r&&n&&(l=e[r],a=e[n]),t&&o===a||(i.set({selected:this.__hh=a}),(r=u.Event("change",{item:e,keys:{text:r,value:n},value:n?e[n]:e,text:r?e[r]:e})).isDefaultPrevented()?i.set({selected:o}):i.digest({selected:a,selectedText:l}),this.__t.val(n?e[n]:e).trigger(r))},"__he<click>":function(){var e=this.__t;e.hasClass("xzKVLdvcy")?this.__ao():e.hasClass("xzKVLdvcw")||this.__an()},"__dz<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__hr);var i=u.trim(e.eventTarget.value);t.__hr=setTimeout(t.wrapAsync(function(){i!=t.__hs&&t.__hq(t.__hs=i,function(e){t.updater.digest({list:e})})}),300)},"__ht<click>":function(e){this.__hp(e.params.item,!0),this.__ao()},"__hu<change,focusin,focusout>":function(e){e.stopPropagation()}})}),define("gallery/mx-font/align",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");e.default.applyStyle("xzKVLdvm",".xzKVLdvbU{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.xzKVLdvbV{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.xzKVLdvbV:hover{background:#ccc}.xzKVLdvbW{width:16px;margin:2px}.xzKVLdvbX,.xzKVLdvbX:hover{background:#06f;color:#fff}.xzKVLdvbY,.xzKVLdvbY .xzKVLdvbV{cursor:not-allowed;opacity:.7}.xzKVLdvbY .xzKVLdvbV,.xzKVLdvbY .xzKVLdvbV:hover{background:#e9e9e9}.xzKVLdvbY .xzKVLdvbX,.xzKVLdvbY .xzKVLdvbX:hover{background:#6aa5ff}.xzKVLdvbZ{transform:rotate(180deg)}.xzKVLdvc_{transform:rotate(90deg)}.xzKVLdvca{transform:rotate(270deg)}"),t.default=e.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,c=e.i18n,e=e.value;return s+='<ul class="xzKVLdvx xzKVLdvbU',d&&(s+=" xzKVLdvbY"),s+='"><li title="'+n(c("_hx"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"left"==e[0]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:0,v:'left'})\">&#xe687;</li><li title=\""+n(c("_hy"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"center"==e[0]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:0,v:'center'})\">&#xe68a;</li><li title=\""+n(c("_hz"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"right"==e[0]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:0,v:'right'})\">&#xe686;</li><li title=\""+n(c("_hA"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"top"==e[1]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:1,v:'top'})\">&#xe614;</li><li title=\""+n(c("_hB"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"middle"==e[1]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:1,v:'middle'})\">&#xe613;</li><li title=\""+n(c("_hC"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',"bottom"==e[1]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({i:1,v:'bottom'})\">&#xe612;</li></ul>"},init:function(e){this.assign(e)},assign:function(e){return this.__hw=e.value,this.updater.set({value:e.value,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bz<click>":function(e){var t,i;this.updater.get("disabled")||(t=this.__hw,e=(i=e.params).i,i=i.v,t[e]=i,this.__hw=t,this.updater.digest({value:t}),$("#"+this.id).trigger({type:"input",value:t}))}})}),define("gallery/mx-font/lineheight",["magix","$","../mx-number/index","../mx-dropdown/index"],function(e,t,i){e("../mx-number/index"),e("../mx-dropdown/index"),t.__esModule=!0;var n=e("magix"),r=e("$");n.default.applyStyle("xzKVLdvs",".xzKVLdvcK{width:80px;border-radius:4px 0 0 4px;z-index:1}.xzKVLdvcL{width:61px;margin-left:-1px;border-radius:0 4px 4px 0}.xzKVLdvcL:focus{z-index:2}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,c=e.min,u=e.value;return s+='<div mxv="value" class="xzKVLdvcK xzKVLdvB xzKVLdvu" ',(e=d)&&(s+='readonly="'+n(e)+'" '),s+=' mx-input="'+t+"\x1e__aq({from:'number'})\" mx-view=\"gallery/mx-number/index?",(e=d)&&(s+="disabled="+o(e)),(e=c)&&(s+="&min="+o(e)),s+="&value="+a(i,u[0])+'&empty=true"></div><div mxv="disabled,value" class="xzKVLdvcL" mx-change="'+t+"\x1e__aq({from:'dropdown'})\" mx-view=\"gallery/mx-dropdown/index?",(e=d)&&(s+="disabled="+a(i,e)),s+="&selected="+a(i,u[1])+'"><i mxs="xzKVLdvD:_" value="mm" class="xzKVLdvv">mm</i><i mxs="xzKVLdvD:a" value="%" class="xzKVLdvv">%</i></div>'},init:function(e){this.assign(e)},assign:function(e){return this.__hw=e.value,this.updater.set({value:e.value,min:e.min,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__aq<input,change>":function(e){e.stopPropagation();var t=e.params.from,i=e.value,e=this.__hw,i="number"==t?[i,e[1]]:[e[0],i];r.default("#"+this.id).trigger({type:"input",value:this.__hw=i})}})}),define("gallery/mx-font/style",["magix","$"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("$");n.default.applyStyle("xzKVLdvm",".xzKVLdvbU{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.xzKVLdvbV{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.xzKVLdvbV:hover{background:#ccc}.xzKVLdvbW{width:16px;margin:2px}.xzKVLdvbX,.xzKVLdvbX:hover{background:#06f;color:#fff}.xzKVLdvbY,.xzKVLdvbY .xzKVLdvbV{cursor:not-allowed;opacity:.7}.xzKVLdvbY .xzKVLdvbV,.xzKVLdvbY .xzKVLdvbV:hover{background:#e9e9e9}.xzKVLdvbY .xzKVLdvbX,.xzKVLdvbY .xzKVLdvbX:hover{background:#6aa5ff}.xzKVLdvbZ{transform:rotate(180deg)}.xzKVLdvc_{transform:rotate(90deg)}.xzKVLdvca{transform:rotate(270deg)}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,c=e.i18n,e=e.value;return s+='<ul class="xzKVLdvx xzKVLdvbU',d&&(s+=" xzKVLdvbY"),s+='"><li title="'+n(c("_hD"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',e[0]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({key:'italic'})\">&#xe65f;</li><li title=\""+n(c("_hE"))+'" class="xzKVLdvp xzKVLdvbV xzKVLdvN',e[1]&&(s+=" xzKVLdvbX"),s+='" mx-click="'+t+"\x1e__bz({key:'underline'})\">&#xe62e;</li></ul>"},init:function(e){this.assign(e)},assign:function(e){return this.__hw=e.value,this.updater.set({value:e.value,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bz<click>":function(e){var t;this.updater.get("disabled")||(t=this.__hw,t="italic"==e.params.key?t[0]?["",t[1]]:["italic",t[1]]:t[1]?[t[0],""]:[t[0],"underline"],this.__hw=t,this.updater.digest({value:t}),r.default("#"+this.id).trigger({type:"input",value:t}))}})}),define("gallery/mx-menu/index",["magix","$","../mx-monitor/index"],function(e,t,i){var o=e("magix"),c=e("$"),u=e("../mx-monitor/index");o.Vframe;o.applyStyle("xzKVLdvt",".xzKVLdvcM{transition:margin-left .25s;z-index:90000}.xzKVLdvcN{background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;cursor:default;padding:4px 0;box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}.xzKVLdvcO{height:26px;line-height:26px;cursor:default;border-radius:4px;padding:0 12px;margin:0 4px}.xzKVLdvcP{color:#fff;background-color:#06f}.xzKVLdvcQ{height:1px;background:#eee;margin:4px 0}.xzKVLdvcR{color:#ccc;cursor:not-allowed}"),i.exports=o.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.width,c=e.list,u=e.disabled,f=e.textKey;s+='<div style="width:'+n(d)+'px;position:absolute;left:-10000px;top:-10000px" class="xzKVLdvcM" mx-contextmenu="'+t+'\x1e__cl()"><ul mxa="xzKVLdvF:_" class="xzKVLdvcN xzKVLdvx">';for(var h=0,p=c.length;h<p;h++){var g=c[h];s+=" ",g.spliter?s+='<li mxs="xzKVLdvF:_" class="xzKVLdvcQ"></li>':(s+='<li class="xzKVLdvy xzKVLdvcO ',u[g.id]&&(s+=" xzKVLdvcR"),s+='" ',u[g.id]||(s+=' mx-mouseover="'+t+'\x1e__hN()" mx-mouseout="'+t+'\x1e__hN();" mx-click="'+t+"\x1e__ht({item:'"+a(i,g)+"'})\" "),s+=' title="'+n(g[f])+'">'+n(g[f])+"</li>"),s+=" "}return s+="</ul></div>"},init:function(e){var t=this;t.assign(e),u.__cz(),t.on("destroy",function(){u.__cA(t),u.__cB(),t.__cj&&!e.cnt&&c("#"+t.id).remove()})},assign:function(e){var t=e.width||340,i=e.valueKey||"id",n=e.textKey||"text";return this.__hg=e.list,this.__hF=c(e.offset),this.__hG=c(e.scroller),this.__hH=t,this.__hI=i,this.__hJ=n,this.__hK=e.disabled||{},this.__hL=e.picked,!0},render:function(){this.updater.digest({disabled:this.__hK,list:this.__hg,width:this.__hH,valueKey:this.__hI,textKey:this.__hJ})},__cC:function(e){return o.inside(e,this.id)},__an:function(e){var t,i,n,r,o,a,l,s,d;this.__hM||(this.__hM=1,t=c("#"+this.id+" div"),i=(a=(l=this.__hF).offset()).left,n=a.top,r=l.width()+this.__hG.prop("scrollLeft"),o=l.height(),d=s=-1,a=t.outerWidth(),l=t.outerHeight(),r<(s=e.pageX-i)+a&&(s-=a)<0&&(s=0),o<(d=e.pageY-n)+l&&(d-=l)<0&&(d=0),t.css({left:s,top:d}),u.__cF(this))},__ao:function(){this.__hM&&(this.__hM=!1,c("#"+this.id+" div").css({left:-1e4}),u.__cA(this))},"__hN<mouseover,mouseout>":function(e){o.inside(e.relatedTarget,e.eventTarget)||c(e.eventTarget)["mouseout"==e.type?"removeClass":"addClass"]("xzKVLdvcP")},"__ht<click>":function(e){var t=c("#"+this.id),e={type:"pick",item:e.params.item};t.trigger(e),this.__ao();t=this.__hL;t&&t(e.item)},"__cl<contextmenu>":function(e){e.preventDefault()}},{show:function(e,t,i){var n="ctx_"+i.listKey,r=o.Vframe.get(n);r?(r.invoke("assign",[i]),r.invoke("render"),r.invoke("__an",[t])):(c(i.cnt||"body").append('<div id="'+n+'" />'),(r=e.owner.mountVframe(n,"gallery/mx-menu/index",i)).invoke("__an",[t]))}})}),define("gallery/mx-monitor/index",["$"],function(e,t,i){function n(e){for(var t=a.length;t--;){var i=a[t];i.__hO?a.splice(t,1):(i=i.__hP,"resize"!=e.type&&i.__cC(e.target)||i.__ao())}}function r(e){var t=a[e.id];t&&(t.__hO=!0),delete a[e.id]}var e=e("$"),o=0,a=[],l=e(document),s=e(window);i.exports={__cF:function(e){r(e);var t={__hP:e};a.push(t),a[e.id]=t},__cA:r,__cz:function(){o||(l.on("mousedown keyup",n),s.on("resize",n)),o++},__cB:function(){0<o&&(--o||(l.off("mousedown keyup",n),s.off("resize",n)))}}}),define("gallery/mx-number/_cfg",[],function(e,t,i){i.exports={"mx-number":{_class:" input pr"}}}),define("gallery/mx-number/index",["magix","$"],function(e,t,i){var o=e("magix"),n=e("$");o.applyStyle("xzKVLdvu",'.xzKVLdvcS{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.xzKVLdvcT,.xzKVLdvcU{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:4px;cursor:pointer}.xzKVLdvcT:hover,.xzKVLdvcU:hover{background-color:#f0f0f0}.xzKVLdvcU{top:1px}.xzKVLdvcT{bottom:1px}.xzKVLdvcV:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.xzKVLdvcT:after{border-top:4px solid #ccc}.xzKVLdvcU:after{border-bottom:4px solid #ccc}[mx-view*="/mx-number/"][readonly=true]{background-color:#fbfbfb;cursor:not-allowed}[mx-view*="/mx-number/"][readonly=true]:hover{border-color:#e6e6e6}[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcT,[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcU{cursor:not-allowed;border-color:transparent}[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcT:hover,[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcU:hover{background-color:transparent}[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcU:hover:after{border-bottom-color:#ccc}[mx-view*="/mx-number/"][readonly=true] .xzKVLdvcT:hover:after{border-top-color:#ccc}'),i.exports=o.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.value,e=e.disabled;return s+='<input class="xzKVLdvcS" mx-focusin="'+t+'\x1e__id()" mx-focusout="'+t+'\x1e__if()" value="'+n(d)+'" mx-change="'+t+'\x1e__ic()" mx-keydown="'+t+'\x1e__ik()" ',e&&(s+=" disabled"),s+=' autocomplete="off" mx-input="'+t+'\x1e__il()"/><span mxs="xzKVLdvG:_" class="xzKVLdvcU xzKVLdvcV xzKVLdvx" mx-click="'+t+'\x1e__hZ({i:true})" mx-mousedown="'+t+'\x1e__ij({i:true})" mx-contextmenu="'+t+'\x1e__cl()"></span><span mxs="xzKVLdvG:a" class="xzKVLdvcT xzKVLdvcV xzKVLdvx" mx-click="'+t+'\x1e__hZ()" mx-mousedown="'+t+'\x1e__ij()" mx-contextmenu="'+t+'\x1e__cl()"></span>'},init:function(e){var t=n("#"+this.id);this.__t=t,this.assign(e)},assign:function(e){var t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);var n=t.__hQ!==i,r=t.__hR;return t.__hQ=i,t.__hS=+e.step||1,t.__hT=e.empty+""=="true",t.__hR=e.disabled+""=="true",t.__hU=o.has(e,"max")?+e.max:Number.MAX_VALUE,t.__hV=o.has(e,"min")?+e.min:-Number.MAX_VALUE,t.__hW=+e.ratio||10,t.__hX=e.fixed||0,n||r!=t.__hR},render:function(){this.updater.digest({value:this.__hQ,disabled:this.__hR}),this.fix()},fix:function(){var e=this.__hQ;""!==e&&(e=e.toFixed(this.__hX)),this.__hY=this.__t.find("input"),this.__hY.val(e)},val:function(e,t){var i,n,r=this;if(""!==e||!r.__hT)return!(e=+e)&&0!==e||(i=r.__hU,n=r.__hV,i<e?e=i:e<n&&(e=n),e!==r.__hQ&&(e=e.toFixed(r.__hX),t||r.__hY.val(e),e=+e,r.__t.prop("value",r.__hQ=e).trigger({type:"input",value:e}))),r.__hQ;r.__t.prop("value",r.__hQ=e).trigger({type:"input",value:e})},__hZ:function(e,t){var i=this.__hQ;""===i&&(i=0);var n=this.__hS,i=i;t&&(n*=this.__hW),e?i+=n:i-=n,this.val(i)},__i_:function(){var e=this.__hY[0];e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},__ib:function(){this.__t.addClass("xzKVLdvD"),o.has(this,"__ia")||(this.__ia=this.__hQ)},"__ic<change>":function(e){e.stopPropagation();var t=e.eventTarget,e=t.value;if(""===e&&this.__hT)return t.value=this.__hQ="",void this.__t.prop("value","");e=Number(e);!e&&0!==e||this.val(e),e=(e=this.__hQ)||0===e?e.toFixed(this.__hX):"",t.value=e},"__id<focusin>":function(){this.__ib()},"__if<focusout>":function(){this.__ie||(this.__t.removeClass("xzKVLdvD"),this.__ia!=this.__hQ&&(this.fix(),this.__t.trigger({type:"change",value:this.__hQ})),delete this.__ia)},"__hZ<click>":function(e){this.__hR||this.__ig||(this.__hZ(e.params.i,e.shiftKey),this.__i_())},"__ij<mousedown>":function(e){var t=this;t.__hR||(t.__ie=!0,t.__ib(),t.__ih=setTimeout(t.wrapAsync(function(){t.__ii=setInterval(t.wrapAsync(function(){t.__ig=!0,t.__hZ(e.params.i),t.__i_()}),50)}),300))},"__ik<keydown>":function(e){var t;38!=e.keyCode&&40!=e.keyCode||(e.preventDefault(),this.__hR||(""===(t=e.eventTarget.value)?this.__hQ="":!(t=Number(t))&&0!==t||t==this.__hQ||(this.__hQ=t),this.__hZ(38==e.keyCode,e.shiftKey)))},"__cl<contextmenu>":function(e){e.preventDefault()},"__il<input>":function(e){e.stopPropagation();e=e.eventTarget;this.val(e.value,!0)},"$doc<mouseup>":function(){var e=this;clearTimeout(e.__ih),clearInterval(e.__ii),delete e.__ie,setTimeout(e.wrapAsync(function(){delete e.__ig}),0)}})}),define("gallery/mx-picture/index",["magix","$"],function(e,t,i){var n=e("magix"),r=e("$");n.applyStyle("xzKVLdvv",".xzKVLdvcW{min-height:500px}.xzKVLdvcX{width:100px;height:100px;margin:5px;overflow:hidden;border:1px solid #ccc;cursor:pointer}.xzKVLdvcX:hover{border-color:#999}.xzKVLdvcY{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.xzKVLdvcZ{position:relative}.xzKVLdvcZ:hover .xzKVLdvd_{opacity:1}.xzKVLdvd_{opacity:0;transition:opacity .25s;position:absolute;right:0;top:0;color:#ff0303;background:#fff;font-size:18px;cursor:pointer}.xzKVLdvda{color:#797575;width:100px;margin:0 5px;height:25px}.xzKVLdvdb{width:140px;height:80px;float:left;background-position:50%;background-repeat:no-repeat;background-size:contain;border:1px solid #ccc}.xzKVLdvdc{height:34px;border:2px dashed #ccc;outline:none;transition:all .3s;line-height:34px;margin-top:1px;text-align:center;font-size:14px;cursor:default;margin-left:40px;width:460px;border-radius:4px}.xzKVLdvdd,.xzKVLdvdc:focus{border-color:#06f}.xzKVLdvde{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:100px}.xzKVLdvdf{position:relative;overflow:hidden;cursor:pointer;height:35px;line-height:25px;margin-right:13px;width:110px}.xzKVLdvdg{width:250px;height:35px;font-size:14px}.xzKVLdvdh{font-size:16px}"),i.exports=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.disabled,c=e.i18n,e=e.pic;return s+="<div><button ",d&&(s+="disabled"),s+=' type="button" class="xzKVLdvz xzKVLdvO" mx-click="'+t+'\x1e__im()">'+n(c("_in"))+'</button><div mxa="xzKVLdvH:_" class="xzKVLdvw xzKVLdva"><div class="xzKVLdvdb xzKVLdvu" ',e&&(s+=" style=\"background-image:url('"+n(e)+"')\" "),s+="></div></div></div>"},init:function(e){this.assign(e),this.__t=r("#"+this.id)},assign:function(e){return this.updater.set({lang:e.lang,pic:e.pic,disabled:e.disabled+""=="true"}),!0},render:function(){this.updater.digest()},"__im<click>":function(){var t=this;t.mxDialog("gallery/mx-picture/list",{width:945,done:function(e){t.updater.digest({pic:e.src}),t.__t.trigger({type:"change",pic:e})}})}})}),define("gallery/mx-picture/list",["magix","$","../../i18n/index","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),a=e("$"),l=e("../../i18n/index"),e=e("../../service/index");n.applyStyle("xzKVLdvv",".xzKVLdvcW{min-height:500px}.xzKVLdvcX{width:100px;height:100px;margin:5px;overflow:hidden;border:1px solid #ccc;cursor:pointer}.xzKVLdvcX:hover{border-color:#999}.xzKVLdvcY{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.xzKVLdvcZ{position:relative}.xzKVLdvcZ:hover .xzKVLdvd_{opacity:1}.xzKVLdvd_{opacity:0;transition:opacity .25s;position:absolute;right:0;top:0;color:#ff0303;background:#fff;font-size:18px;cursor:pointer}.xzKVLdvda{color:#797575;width:100px;margin:0 5px;height:25px}.xzKVLdvdb{width:140px;height:80px;float:left;background-position:50%;background-repeat:no-repeat;background-size:contain;border:1px solid #ccc}.xzKVLdvdc{height:34px;border:2px dashed #ccc;outline:none;transition:all .3s;line-height:34px;margin-top:1px;text-align:center;font-size:14px;cursor:default;margin-left:40px;width:460px;border-radius:4px}.xzKVLdvdd,.xzKVLdvdc:focus{border-color:#06f}.xzKVLdvde{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:100px}.xzKVLdvdf{position:relative;overflow:hidden;cursor:pointer;height:35px;line-height:25px;margin-right:13px;width:110px}.xzKVLdvdg{width:250px;height:35px;font-size:14px}.xzKVLdvdh{font-size:16px}"),i.exports=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.i18n,c=e.keyword,u=e.list,e=e.error;s+='<div mxa="xzKVLdvI:_" class="xzKVLdvK"><b mxa="xzKVLdvI:a" class="xzKVLdvd">'+n(d("_iD"))+'</b></div><div mxv mxa="xzKVLdvI:b" class="xzKVLdvL"><div mxv mxa="xzKVLdvI:c" class="xzKVLdvw xzKVLdvk xzKVLdvj"><input class="xzKVLdvB xzKVLdvdg xzKVLdvp" placeholder="'+n(d("_iE"))+'" mx-input="'+t+'\x1e__dz()" value="'+n(c)+'"/><div mxa="xzKVLdvI:d" class="xzKVLdvdc xzKVLdvp" mx-paste="'+t+'\x1e__iw()" mx-drop="'+t+'\x1e__iy()" tabindex="0" mx-dragenter="'+t+'\x1e__iC()" mx-dragleave="'+t+'\x1e__iB()">'+n(d("_iF"))+'<i mxs="xzKVLdvI:_" class="xzKVLdvr xzKVLdvh xzKVLdvd">/</i>'+n(d("_iG"))+'</div><div mxv mxa="xzKVLdvI:e" class="xzKVLdvr xzKVLdvz xzKVLdvdf xzKVLdvA xzKVLdvq">'+n(d("_iH"))+'<input mxs="xzKVLdvI:a" class="xzKVLdvde" accept="image/*" type="file" mx-change="'+t+'\x1e__iz()" multiple="multiple"/></div></div><div mxa="xzKVLdvI:f" class="xzKVLdvw xzKVLdvcW xzKVLdva">';var f=0;s+=" ";for(var h=0,p=u.length;h<p;h++){var g=u[h];s+=" ",(!c||-1<g.title.indexOf(c))&&(s+=" ",f=1,s+='<div class="xzKVLdvp xzKVLdvcZ" title="'+n(g.title)+'"><div class="xzKVLdvcX" mx-click="'+t+"\x1e__iq({src:'"+n(l(g.src))+'\'})"><div class="xzKVLdvcY" style="background-image:url(\''+n(g.src)+'\')"></div></div><div mxa="xzKVLdvI:g" class="xzKVLdvo xzKVLdvda xzKVLdvy">'+n(g.title)+'</div><div mx-click="'+t+"\x1e__be({id:'"+n(l(g.id))+'\'})" class="xzKVLdvd_ xzKVLdv_" title="'+n(d("__af"))+'">&#xe67f;</div></div>'),s+=" "}return s+=" ",!f&&c&&(s+='<div mxa="xzKVLdvI:h" class="xzKVLdvo xzKVLdvb xzKVLdvdh">'+n(d("_iI",c))+"</div>"),s+=" ",e&&(s+='<div mxa="xzKVLdvI:i" class="xzKVLdvo xzKVLdvb xzKVLdvdh">'+n(e.msg)+"</div>"),s+="</div></div>"},mixins:[e.default],init:function(e){this.__io=e.done,this.__ga=e.dialog},render:function(){var i=this;i.fetch({name:"__ip",params:{biz_id:n.config("bizId")}},function(e,t){i.updater.digest({keyword:"",list:t.get("data",[]),error:e})})},"__U<click>":function(){this.__ga.close()},"__T<click>":function(){var i=this,n=a("#"+this.id+" input").val().trim(),r=new Image,o=this.__io;r.onerror=function(){i.alert(l.default("__bq"))},r.onload=function(){var e=r.width,t=r.height;i.__ga.close(),o({src:n,width:e,height:t})},r.src=n},"__iq<click>":function(e){var i=this,n=new Image,r=i.__io,o=e.params.src;n.onerror=function(){i.alert(l.default("__bq"))},n.onload=function(){var e=n.width,t=n.height;i.__ga.close(),r({src:o,width:e,height:t})},n.src=o},"__be<click>":function(e){var t=this,i=e.params.id;this.confirm(l.default("__ir"),function(){t.save({name:"__is",params:{id:i,biz_id:n.config("bizId")}},function(e){e?t.alert(e.msg):t.render()})})},"__dz<input>":function(e){clearTimeout(this.__dy);var t=this.updater;t.set({keyword:e.eventTarget.value}),this.__dy=setTimeout(this.wrapAsync(function(){t.digest()}),300)},__iu:function(e){var t=this;this.request().all({name:"__it",files:e,params:{biz_id:n.config("bizId"),temp_id:n.config("tempId")}},function(e){e?t.alert(e.msg):t.render()})},"__iw<paste>":function(e){e.preventDefault();var e=e.originalEvent.clipboardData,t=[];if(e&&e.items)for(var i=0,n=e.items;i<n.length;i++){var r=n[i];0===r.type.indexOf("image/")&&t.push(r.getAsFile())}t.length?this.__iu(t):this.alert(l.default("__iv"))},"__iy<drop>":function(e){this.__ix(e.eventTarget);e=e.originalEvent.dataTransfer.files;this.__iu(e)},"__iz<change>":function(e){var t=e.eventTarget,e=t.files;this.__iu(e),t.outerHTML=t.outerHTML},__ix:function(e){this.__iA||a(e).removeClass("xzKVLdvdd")},"__iB<dragleave>":function(e){this.__ix(e.eventTarget)},"__iC<dragenter>":function(e){var t=document.activeElement==e.eventTarget;t||(a(e.eventTarget).addClass("xzKVLdvdd"),this.__iA=t)}})}),define("gallery/mx-runner/fx",["magix","./index"],function(e,t,i){function r(e){return e}var n=e("magix"),o=e("./index"),a=Date.now||function(){return(new Date).getTime()},l=n.Base.extend({ctor:function(e,i){var n=this;n.__iJ&&!i||(i=i||r,n.__iJ=function(e,t){return e+(t-e)*i(n.__iK/n.__iL)}),n.__iM=[],n.__iN=e},__iS:function(e,t){this.__hO||(this.__iM.push({__iO:e,__iP:t}),this.__iQ||this.__iR())},__iR:function(){var e=this,t=e.__iM.shift();t?(e.__iL=t.__iO,e.__iT=t.__iP,e.__iU=a(),e.__iQ||o.__dS(e.__iN,e.__iQ=function(t){e.__iK=Date.now()-e.__iU,e.__iK>e.__iL&&(e.__iK=e.__iL,t=1);try{e.__iT(e.__iJ)}catch(e){t=e}t&&e.__iR()})):e.__hu()},__hu:function(){this.__iQ&&(o.__dV(this.__iQ),delete this.__iQ,this.fire("stop"))},destroy:function(){this.__hu(),this.__iM=[],this.__hO=1}});i.exports={__iW:function(){var e=new l;return this.capture(n.guid("__iV"),e),e}}}),define("gallery/mx-runner/index",["magix"],function(e,t,i){var a=e("magix"),l=window.requestAnimationFrame||function(e){return setTimeout(e,16)},s=window.cancelAnimationFrame||clearTimeout,d=Date.now||function(){return(new Date).getTime()};i.exports={__iM:[],__dS:function(e,t){this.__iM.push({i:e||15,f:t,n:d()}),this.__iR()},__dV:function(e){for(var t=this.__iM,i=void 0,n=0;n<t.length;n++)if(!(i=t[n]).r&&i.f==e){i.r=1;break}},__iR:function(){var r,o=this;o.__iX||(r=function(){for(var e,t=o.__iM,i=0,n=void 0;i<t.length;i++)(n=t[i]).r?t.splice(i--,1):(e=d())-n.n>=n.i&&(n.n=e,a.toTry(n.f));t.length?o.__iX=l(r):(s(o.__iX),delete o.__iX)},o.__iX=l(r))}}}),define("cainiao/const",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={ELEMENT_CTRL_SPACE:3,RESIZER_SIZE:3,EDITOR_NAME_SPACE:"http://cloudprint.cainiao.com/schema/editor",XSI_NAME_SPACE:"http://www.w3.org/2001/XMLSchema-instance",SCHEMA_LOCATION_NAME_SPACE:"http://cloudprint.cainiao.com/print http://cloudprint-docs-resource.oss-cn-shanghai.aliyuncs.com/lpml_schema.xsd",CLOUD_PRINT_NAME_SPACE:"http://cloudprint.cainiao.com/print",PAGE_WIDTH_MAX:1200,PAGE_WIDTH_MIN:1,PAGE_HEIGHT_MAX:1200,PAGE_HEIGHT_MIN:1,PAGE_WIDTH_DEFAULT:793.7,PAGE_HEIGHT_DEFAULT:1122.51,SCALE_DEFAULT:1,SCALE_MAX:5,SCALE_MIN:.5,SCALE_STEP:.25,LINE_TYPES:[{text:"___",value:"solid"},{text:"__a",value:"dashed"},{text:"__b",value:"dotted"}],FONT_FAMILIES:[{value:"SimSun",text:"__c"},{value:"SimHei",text:"__d"},{value:"Microsoft YaHei",text:"__e"},{value:"Microsoft JhengHei",text:"__f"},{value:"KaiTi",text:"__g"},{value:"Arial",text:"Arial"},{value:"Times New Roman",text:"Times New Roman"},{value:"Tahoma",text:"Tahoma"},{value:"webdings",text:"webdings"},{value:"Arial Black",text:"Arial Black"},{value:"Arial Narrow",text:"Arial Narrow"},{value:"Arial Unicode MS",text:"Arial Unicode MS"}],FONT_WEIGHTS:["normal","bold","light"],DIRECTIONS:["ltr","rtl"],QRCODES:[{text:"qrcode",value:"qrcode"},{text:"pdf417",value:"pdf417"},{text:"Maxicode",value:"maxicode"},{text:"Data Matrix",value:"datamatrix"}],QRCODES_MAXICODE_SCHEMA:[2,3,4,5,6],BARCODES:[{value:"code128",text:"code128"},{value:"code93",text:"code93"},{value:"code39",text:"code39"},{value:"upca",text:"UPC-A"},{value:"upce",text:"UPC-E"},{value:"ean8",text:"EAN8"},{value:"ean13",text:"EAN13"},{value:"itf14",text:"ITF14"},{value:"c25inter",text:"Interleaved 2 of 5"}],TABLE_ROWS_HEIGHT:30,TABLE_CELLS_WIDTH:200,TABLE_MIN_SIZE:10,HISTORY_MAX:100,AUTO_SAVE:-1,DROP_STAGE_LOADING:"//img.alicdn.com/tfs/TB1dIR5XpzqK1RjSZFzXXXjrpXa-400-240.gif",PAGES:[{text:"A1",width:594,height:841},{text:"A2",width:420,height:594},{text:"A3",width:297,height:420},{text:"A4",width:210,height:297},{text:"A5",width:148,height:210},{text:"A6",width:105,height:148},{text:"A7",width:74,height:105},{text:"B1",width:707,height:1e3},{text:"B2",width:500,height:707},{text:"B3",width:353,height:500},{text:"B4",width:250,height:353},{text:"B5",width:176,height:250},{text:"B6",width:125,height:176},{text:"B7",width:88,height:125},{text:"C1",width:648,height:917},{text:"C2",width:458,height:648},{text:"C3",width:324,height:458},{text:"C4",width:229,height:324},{text:"C5",width:162,height:229},{text:"C6",width:114,height:162},{text:"C7",width:81,height:114}]}}),define("cainiao/serializer",["./toxml","./tojson"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("./toxml"),e=e("./tojson");t.default={encode:n.default,decode:e.default}}),define("cainiao/tojson",["magix","../util/converter","./const","../element/index","../util/table","$"],function(e,t,i){"use strict";t.__esModule=!0;function n(e){return"true"===e}function o(e){return e=Number(e),isNaN(e)?0:e}function r(e){return o(e)%360}function x(e,t,i,n,r){m(t,i)&&((t=t[i]).parse&&(n=t.parse(n,r)),t.type==l?(n=o(n),m(t,"max")&&n>t.max&&(n=t.max),m(t,"min")&&n<t.min&&(n=t.min),t.convert&&(n=t.convert(n))):t.type==c&&(m(t.enums,n)||(n=t.back)),t.alias&&(r[t.alias]=n),r[i]=n)}function L(e,t,i){var n=e.props;n._layouts=[],n._children=[];for(var r=0,o=[{node:i,key:"_layouts"},{node:t,key:"_children"}];r<o.length;r++)for(var a=o[r],l=!1,s=0,d=a.node.__b;s<d.length;s++){var c=d[s],u=c.__c;"#script"==u?n[a.key].push({tag:"#script",text:c.__d}):l||(l=!0,n[a.key].push({tag:u}))}}function z(e){var n={};return e.replace(u,function(e,t,i){n[t]=i}),n}function k(e,t,i){for(var n=0,r=e.__i;n<r.length;n++){var o=r[n];x(e.__c,t,o.__g,o.__h,i)}var a=e.__j,l=a.style;if(l){var s,d=z(l);for(s in d)x(e.__c,t,s,d[s],i)}(a=a["editor:tip"])&&(i.tip=a)}var S=e("magix"),s=e("../util/converter"),V=e("./const"),K=e("../element/index"),C=e("../util/table"),_=e("$"),T=S.default.State,m=S.default.has,y=S.default.toMap,b=/^<([a-zA-Z\d]+)((?:\s+[-A-Za-z\d_:]+(?:="[^"]*")?)*)\s*(\/?)>/,w=/([-A-Za-z\d_:]+)(?:="([^"]*)")?/g,A=/^<\/([a-zA-Z\d]+)>/,E=s.default.__h,M=/^\s*<%[\s\S]*%>\s*$/,N=s.default.__i,a=1,l=2,d=4,c=8,e=function(e){var t={type:l,convert:E};return e?t.alias=e:(t.min=0,t.max=2800),t},I={page:{splitable:{type:d,parse:n},xmlns:{type:a},"xmlns:xsi":{type:a},"xsi:schemaLocation":{type:a},"xmlns:editor":{type:a,back:V.default.EDITOR_NAME_SPACE},width:{type:l,max:V.default.PAGE_WIDTH_MAX,min:V.default.PAGE_WIDTH_MIN,convert:E},height:{type:l,max:V.default.PAGE_HEIGHT_MAX,min:V.default.PAGE_HEIGHT_MIN,convert:E}},line:{style:{type:a},zIndex:{type:l},startX:e("x"),endX:e("y"),startY:e(),endY:e(),lineWidth:{type:l,min:1},lineColor:{type:a},lineType:{type:c,alias:"type",enums:y(V.default.LINE_TYPES,"value"),back:V.default.LINE_TYPES[0].value}},rect:{style:{type:a},zIndex:{type:l},left:e("x"),top:e("y"),width:e(),height:e(),borderWidth:{type:l,min:0},borderStyle:{alias:"borderType",type:c,enums:y(V.default.LINE_TYPES,"value"),back:V.default.LINE_TYPES[0].value},fillColor:{type:a}},text:{style:{type:a},zIndex:{type:l},left:e("x"),top:e("y"),width:e(),height:e(),orientation:{type:a},rotation:{alias:"rotate",type:l,parse:r},alpha:{type:l,min:0,max:1},fontFamily:{type:c,enums:y(V.default.FONT_FAMILIES,"value"),back:V.default.FONT_FAMILIES[1].value},autoFontSize:{type:d,parse:function(e){return"auto"==e}},fontSize:{type:l,min:0,parse:function(e,t){return"auto"==e&&(t.autoFontSize=!0,t.fontSizeLocked=!0,e=10),e}},lineHeight:{type:a},letterSpacing:{type:l,min:0},align:{type:c,enums:y(["left","center","right"]),back:"left"},valign:{type:c,enums:y(["top","middle","bottom"]),back:"top"},fontWeight:{type:c,enums:y(V.default.FONT_WEIGHTS),back:V.default.FONT_WEIGHTS[0]},fontColor:{type:a},backgroundColor:{type:a},direction:{type:c,enums:y(V.default.DIRECTIONS),back:V.default.DIRECTIONS[0]},fontItalic:{type:d,parse:n},fontUnderline:{type:d,parse:n}},image:{style:{type:a},zIndex:{type:l},left:e("x"),top:e("y"),width:e(),height:e(),allowFailure:{type:d,parse:n},src:{type:a},rotation:{alias:"rotate",type:l,parse:r},alpha:{type:l,min:0,max:1}},barcode:{style:{type:a},zIndex:{type:l},left:e("x"),top:e("y"),width:e(),height:e(),type:{type:a},ratioMode:{type:a},schema:{type:c,enums:y(V.default.QRCODES_MAXICODE_SCHEMA),back:V.default.QRCODES_MAXICODE_SCHEMA[0]},primary:{type:a},opacity:{alias:"alpha",type:l,min:0,max:1},rotation:{type:l},hideText:{alias:"showText",type:d,parse:function(e){return!n(e)}}},table:{style:{type:a},zIndex:{type:l},left:e("x"),top:e("y"),width:e(),height:e(),borderWidth:{type:l,min:0},cellBorderWidth:{type:l,min:0},colspan:{type:l,min:1},rowspan:{type:l,min:1}}},u=/([^;:]+):([^;]+)(?=;|$)/g,D={page:function(e,t){var i,n;1===t.___&&(i=I.page,n=T.get("__j"),n={xmlns:V.default.CLOUD_PRINT_NAME_SPACE,"xmlns:xsi":V.default.XSI_NAME_SPACE,"xsi:schemaLocation":V.default.SCHEMA_LOCATION_NAME_SPACE,"xmlns:editor":V.default.EDITOR_NAME_SPACE,width:V.default.PAGE_WIDTH_DEFAULT*n,height:V.default.PAGE_HEIGHT_DEFAULT*n,splitable:!1},k(t,i,n),e.page=n)},line:function(e,t){var i,n,r,o,a,l;t.__e&&1<t.___&&(a=I.line,n=(i="90"==t.__j["editor:_deg_"])?"vline":"hline",l=(r=K.default.byType(n)).getProps(0,0),o=T.get("__j"),l.width*=o,l.height*=o,k(t,a,l),l.zIndex||(l.zIndex=e.elements.length+1),m(l,"startX")&&m(l,"startY")&&m(l,"endX")&&m(l,"endY")&&(a=Math.abs(i?l.endY-l.startY:l.endX-l.startX),l.x=l.startX,l.y=l.startY,l[i?"height":"width"]=a),l[i?"width":"height"]=s.default.__k(l.lineWidth||1),l={id:S.default.guid("e_"),type:n,ctor:r,props:l},e.elements.push(l))},rect:function(e,t,i){var n,r,o=i[t.__e];o&&"layout"==o.__c&&(r=(n=K.default.byType("rect")).getProps(0,0),i=T.get("__j"),r.width*=i,r.height*=i,k(o,i=I.rect,r),k(t,i,r),r.fillColor&&(r.fill=!0),r={id:S.default.guid("e_"),type:"rect",ctor:n,props:r},L(r,t,o),e.elements.push(r))},text:function(e,t,i){var n=i[t.__e];if(n&&"layout"==n.__c||n&&"td"==n.__c){var r=t.__j,o=r.style,a=!1,l=I.text,s=void 0;o&&(a="vertical"==(s=z(o)).orientation);var d=a?"vtext":"htext",c=K.default.byType(d),u=c.getProps(0,0),o=T.get("__j");u.width*=o,u.height*=o;var f,o=r["editor:tip"];if(o&&(u.tip=o),"layout"==n.__c?(k(n,l,u),(f=i[n.__e])&&"td"==f.__c&&(u.supportCNStyle=!0),a||0!==u.height||(u.autoHeight=!0,u.heightLocked=!0,u.height=18.9)):(c.writeAdapter(!0,u),u.useCNStyle=!0,u.supportCNStyle=!0),s)for(var h in s)x(0,l,h,s[h],u);_.default.isArray(u.lineHeight)||((f=u.lineHeight.match(/(\d+)(mm|%|$)/))?((a=Number(f[1]))<0&&(a=0),u.lineHeight=[a,f[2]||"mm"]):u.lineHeight=["","mm"]),_.default.isArray(u.align)?u.valign&&_.default.isArray(u.align)&&(u.align[1]=u.valign):u.align=[u.align,u.valign||"top"],u.backgroundColor&&u.fontColor&&(u.color=1),r["editor:_printName_"]&&(u.alias=r["editor:_printName_"]),"true"==r["editor:component"]&&(u.allowEdit=0);r=["",""];u.fontItalic&&(r[0]="italic"),u.fontUnderline&&(r[1]="underline"),u.fontStyle=r;for(var p=0,g=t.__b;p<g.length;p++){var v=g[p];if("#cdata"==v.__c){u.text=v.__d;break}}c={id:S.default.guid("e_"),type:d,ctor:c,props:u};"layout"==n.__c&&L(c,t,n),e.elements.push(c)}},image:function(e,t,i){var n=i[t.__e];if(n&&"layout"==n.__c){var r=K.default.byType("image"),o=r.getProps(0,0),i=T.get("__j");o.width*=i,o.height*=i;i=I.image;k(n,i,o),k(t,i,o);o={id:S.default.guid("e_"),type:"image",ctor:r,props:o};return L(o,t,n),e.elements.push(o),o}return null},barcode:function(e,t,i){var n=i[t.__e];if(n&&"layout"==n.__c){var r=y(V.default.QRCODES,"value"),o=y(V.default.BARCODES,"value"),a=t.__j,l="qrcode",i=a.type,s=z(a.style||"");m(r,i)?l="qrcode":m(o,i)&&(l="90"==s.rotation?"vcode":"hcode");var o=K.default.byType(l),d=o.getProps(0,0),i=T.get("__j");d.width*=i,d.height*=i;a=a["editor:tip"];a&&(d.tip=a);var c=I.barcode;k(n,c,d);for(var u,f=0,h=t.__i;f<h.length;f++){var p=h[f];x(0,c,p.__g,p.__h,d)}for(u in s)x(0,c,u,s[u],d);for(var g=0,v=t.__b;g<v.length;g++){var _=v[g];if("#cdata"==_.__c){d.text=_.__d;break}}o={id:S.default.guid("e_"),type:l,ctor:o,props:d};L(o,t,n),e.elements.push(o)}},table:function(e,t,f){var i=f[t.__e];if("layout"==i.__c){var h=K.default.byType("table").getProps(0,0),n=T.get("__j");h.width*=n,h.height*=n;for(var r=0,o=h.rows;r<o.length;r++){var a=o[r];if("tr"==a.type){a.height*=n;for(var l=0,s=a.cells;l<s.length;l++){var d=s[l];"td"==d.type&&(d.width*=n)}}}var c=f[i.__e];c&&"layout"==c.__c?h.splitable=!0:h.splitable=!1;var u=I.table;k(i,u,h),k(t,u,h);var p=!0,c={id:S.default.guid("e_"),type:"table",ctor:K.default.byType("table"),props:h},u=t.__b;if(u){h.rows=[];for(var g=0,v=u;g<v.length;g++){var _=v[g],x=void 0,m=_.__c;if("#script"==m)x={tag:"#script",text:_.__d};else{var y=[],_=_.__b;if(_)for(var b=0,w=_;b<w.length;b++)!function(e){var t,i,n,r,o,a,l,s,d,c,u=e.__c;"#script"==u?y.push({tag:"#script",text:e.__d}):(t=!(s=l=-1),i=e.__j,o=Number(i.width),n=i.rowspan,M.test(n)?h.__invalid=!0:n=Number(n)||1,r=i.colspan,M.test(r)?h.__invalid=!0:r=Number(r)||1,0<=o&&(l=o),0<=(o=Number(i.height))&&0!=(s=o)||(s=N(V.default.TABLE_ROWS_HEIGHT),t=!0),o=!0,l=E(l),s=E(s),i.style&&(a=z(i.style)).borderWidth?(o=0<parseInt(a.borderWidth))&&(p=!1):p=!(o=!0),d=[],(c=function(e){if(e)for(var t=0,i=e;t<i.length;t++){var n=i[t],r=n.__c,r=D[r];r?r({elements:d},n,f):c(n.__b)}})(e.__b),y.push({tag:u,width:l,height:s,rowspan:n,colspan:r,autoHeight:t,hasBorder:o,children:d}))}(w[b]);x={tag:m,cells:y}}h.rows.push(x)}h.hideBorder=p,C.default.__l(h)}L(c,t,i),e.elements.push(c)}},header:function(e,t,i){e.setHeader=!0,"page"!=i[t.__e].__c||(t=t.__j).height&&(e.page.header=E(t.height))},footer:function(e,t,i){e.setFooter=!0,"page"!=i[t.__e].__c||(t=t.__j).height&&(e.page.footer=E(t.height))},"#script":function(e,t,i){i=i[t.__e];i&&("page"==i.__c&&1==i.___||"td"==i.__c&&1<i.___)&&e.elements.push({id:S.default.guid("s_"),type:"#script",text:t.__d})}};t.default=function(e){var t=function(e){var t,i,n,r,o,a,l,s,d,c,u=e.length,f=0,h=0,p={___:0,__a:S.default.guid(),__b:[]},g={},v=e,_=[p];for(g[p.__a]=p;f<u;){if(t=1,"<"==v[0])if("?"==v[1])l={__c:"#xml",__d:d=(n=v.indexOf("?>"))<0?v:v.substring(0,n+2),__a:i=S.default.guid(),___:p.___+1,__e:p.__a},g[i]=l,p.__b.push(l),f+=c=d.length,t=0;else if("%"==v[1])l={__c:"#script",__d:d=(n=v.indexOf("%>"))<0?v:v.substring(0,n+2),__a:i=S.default.guid(),___:p.___+1,__e:p.__a},g[i]=l,p.__b.push(l),f+=c=d.length,t=0;else if("!"==v[1])d=(n=v.indexOf("]]>"))<0?v:v.substring(0,n+3),i=S.default.guid(),l={__c:"#cdata",__f:d,__d:d.slice(9,-3),__a:i,___:p.___+1,__e:p.__a},g[i]=l,p.__b.push(l),f+=c=d.length,t=0;else if("/"==v[1]){if(r=v.match(A)){var x=_.pop();if(r[1]!=x.__c)throw new Error('closed tag "'+r[1]+'" umatch opened tag "'+x.__c+'"');p=_[_.length-1],f+=c=r[0].length,t=0}}else(r=v.match(b))&&(o=r[1],f+=c=r[0].length,a=[],s={},r[2].replace(w,function(e,t,i){a.push({__g:t,__h:i||""}),s[t]=i}),x=r[3],i=S.default.guid(),l={__c:o,__i:a,__j:s,__b:[],__k:x,__a:i,___:p.___+1,__e:p.__a},g[i]=l,p.__b.push(l),x||(_.push(l),p=l),t=0);if(t&&(f+=c=(d=(n=v.indexOf("<"))<0?v:v.substring(0,n)).length,d.trim()&&(l={__c:"#text",__d:d,__a:i=S.default.guid(),___:p.___+1,__e:p.__a},p.__b.push(l))),h==f)throw new Error("bad input:"+v);v=v.substring(c),h=f}if(1<_.length)throw new Error("parsing failure:"+_[1].__c+" unclosed!");return{node:p,map:g}}(e),e=t.node,a=t.map,l={page:{},elements:[]},s=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t],r=n.__c,o=D[r];o&&o(l,n,a),n.__b&&"table"!=r&&s(n.__b)}};return s(e.__b),l.setHeader||(l.page.header=0),l.setFooter||(l.page.footer=0),delete l.setHeader,delete l.setFooter,l}}),define("cainiao/toxml",["../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;function w(e){for(var t="\n";e--;)t+="\t";return t}function n(e,t,i){var n=w(t+1),t=w(t+2);return n+'<line style="lineType:'+e.type+";lineColor:#000;lineWidth:"+a(i?e.width:e.height)+";zIndex:"+e.zIndex+'"'+t+'startX="'+L(e.x)+'"'+t+'startY="'+L(e.y)+'"'+t+'endX="'+L(e.x+(i?0:e.width))+'"'+t+'endY="'+L(e.y+(i?e.height:0))+'"'+(i?t+'editor:_deg_="90"':"")+t+'editor:tip="'+e.tip+'">'+n+"</line>"}function r(e,t,i){var n=e.props,r=n._layouts,o=n._children,a=n.useCNStyle;a&&t--;var e=w(t+1),l=w(t+2),s=w(t+3),t='style="fontFamily:'+n.fontFamily+";";0!=n.rotate&&(t+="rotation:"+n.rotate+";"),1!=n.alpha&&(t+="alpha:"+n.alpha+";"),n.autoFontSize?t+="fontSize:auto;":8!=n.fontSize&&(t+="fontSize:"+n.fontSize+";"),""!==n.lineHeight[0]&&(t+="lineHeight:"+n.lineHeight[0]+("%"==n.lineHeight[1]?"%":"")+";"),n.fontStyle[0]&&(t+="fontItalic:true;"),n.fontStyle[1]&&(t+="fontUnderline:true;"),"left"!=n.align[0]&&(t+="align:"+n.align[0]+";"),"top"!=n.align[1]&&(t+="valign:"+n.align[1]+";"),"normal"!=n.fontWeight&&(t+="fontWeight:"+n.fontWeight+";"),"ltr"!=n.direction&&(t+="direction:"+n.direction+";"),"1"==n.color&&(t+="fontColor:#fff;backgroundColor:#000;"),n.letterSpacing&&(t+="letterSpacing:"+n.letterSpacing+";"),i&&(t+="orientation:vertical;"),t+='"';var d="",i="";n.alias&&(i=s+'editor:_printName_="'+n.alias+'"'),0===n.allowEdit&&(i+=s+'editor:component="true"');var c=l+"<text "+t+i+s+'editor:tip="'+n.tip+'">';if(o&&o.length)for(var u=0,f=o;u<f.length;u++)"#script"==(h=f[u]).tag?c+=s+h.text:"#cdata"==h.tag&&(c+=s+"<![CDATA["+n.text+"]]>");else c+=s+"<![CDATA["+n.text+"]]>";if(c+=l+"</text>",r&&r.length)for(var h,p=0,g=r;p<g.length;p++)"#script"==(h=g[p]).tag?d+=l+h.text:"text"==h.tag&&(d+=c);else d=c;return a?d:e+'<layout editor:_for_="'+Date.now()+'"'+l+'width="'+L(n.width)+'"'+l+'height="'+(n.autoHeight?0:L(n.height))+'"'+l+'left="'+L(n.x)+'"'+l+'top="'+L(n.y)+'"'+l+'style="zIndex:'+n.zIndex+'">'+d+e+"</layout>"}function o(e,t,i){var n=e.props,r=n._layouts,o=n._children,a="",l="",e=w(t+1),s=w(t+2),d=w(t+3),l="qrcode"==i?("maxicode"==n.type&&(a=d+'primary="'+n.primary+'"'+d+'schema="'+n.schema+'"'),"opacity:"+n.alpha+";"):"opacity:"+n.alpha+";hideText:"+!n.showText+";rotation:"+("vcode"==i?90:0)+";",c="",u=s+'<barcode type="'+n.type+'"'+d+'ratioMode="keepRatio"'+d+'style="'+l+'"'+a+d+'editor:tip="'+n.tip+'">';if(o&&o.length)for(var f=0,h=o;f<h.length;f++)"#script"==(p=h[f]).tag?u+=d+p.text:"#cdata"==p.tag&&(u+=d+"<![CDATA["+n.text+"]]>");else u+=d+"<![CDATA["+n.text+"]]>";if(u+=s+"</barcode>",r&&r.length)for(var p,g=0,v=r;g<v.length;g++)"#script"==(p=v[g]).tag?c+=s+p.text:"barcode"==p.tag&&(c+=u);else c=u;return e+'<layout editor:_for_="'+Date.now()+'"'+s+'width="'+L(n.width)+'"'+s+'height="'+L(n.height)+'"'+s+'left="'+L(n.x)+'"'+s+'top="'+L(n.y)+'"'+s+'style="zIndex:'+n.zIndex+'">'+c+e+"</layout>"}var e=e("../util/converter"),L=e.default.__i,a=e.default.__m,z=/^\s*<%[\s\S]*%>\s*$/,k={hline:function(e,t){e=e.props;return n(e,t,!1)},vline:function(e,t){e=e.props;return n(e,t,!0)},rect:function(e,t){var i=e.props,n=i._layouts,r=i._children,o="",e=w(t+1),a=w(t+2),l=w(t+3);1!=i.borderWidth&&(o+="borderWidth:"+i.borderWidth+";"),"solid"!=i.borderType&&(o+="borderStyle:"+i.borderType+";"),i.fill&&(o+="fillColor:#000;");var s="";(o=o&&' style="'+o+'"')?o+=l+'editor:tip="'+i.tip+'"':o=' editor:tip="'+i.tip+'"';var d=a+"<rect"+o+">";if(r&&r.length){for(var c=0,u=r;c<u.length;c++)"#script"==(f=u[c]).tag&&(d+=l+f.text);d+=a}if(d+="</rect>",n)for(var f,h=0,p=n;h<p.length;h++)"#script"==(f=p[h]).tag?s+=a+f.text:"rect"==f.tag&&(s+=d);else s=d;return e+'<layout editor:_for_="'+Date.now()+'"'+a+'width="'+L(i.width)+'"'+a+'height="'+L(i.height)+'"'+a+'left="'+L(i.x)+'"'+a+'top="'+L(i.y)+'"'+a+'style="zIndex:'+i.zIndex+'">'+s+e+"</layout>"},image:function(e,t){var i=e.props,n=i._layouts,r="",e=w(t+1),o=w(t+2),t=w(t+3);0!=i.rotate&&(r+="rotation:"+i.rotate+";"),1!=i.alpha&&(r+="alpha:"+i.alpha+";"),r=r&&t+'style="'+r+'"';var a=o+'<image src="'+i.src+'"'+r+" "+t+'allowFailure="false"'+t+'editor:tip="'+i.tip+'"/>',l="";if(n)for(var s=0,d=n;s<d.length;s++){var c=d[s];"#script"==c.tag?l+=o+c.text:"image"==c.tag&&(l+=a)}else l=a;return e+'<layout editor:_for_="'+Date.now()+'"'+o+'width="'+L(i.width)+'"'+o+'height="'+L(i.height)+'"'+o+'left="'+L(i.x)+'"'+o+'top="'+L(i.y)+'"'+o+'style="zIndex:'+i.zIndex+'">'+l+e+"</layout>"},htext:function(e,t){return r(e,t,!1)},vtext:function(e,t){return r(e,t,!0)},qrcode:function(e,t){return o(e,t,"qrcode")},hcode:function(e,t){return o(e,t,"hcode")},vcode:function(e,t){return o(e,t,"vcode")},table:function(e,t){var i=e.props,n=i._layouts,r=w(t+1);i.splitable&&t++;var e=w(t+1),o=w(t+2),a=w(t+3),l=w(t+4),s=o+"<table";s+=' style="borderWidth:0;cellBorderWidth:0;"',s+=' editor:tip="'+i.tip+'">';for(var d=0,c=i.rows;d<c.length;d++){var u=c[d];if("#script"==u.tag)s+=""+a+u.text;else if("tr"==u.tag){s+=a+"<tr>";for(var f=0,h=u.cells;f<h.length;f++)if("#script"==(m=h[f]).tag)s+=""+l+m.text;else if("td"==m.tag)if(s+=l+'<td width="'+L(m.width)+'"',m.autoHeight?s+=' height="0"':s+=' height="'+L(m.height)+'"',m.rowspan&&(1<m.rowspan||i.__invalid&&z.test(m.rowspan))&&(s+=' rowspan="'+m.rowspan+'"'),m.colspan&&(1<m.colspan||i.__invalid&&z.test(m.colspan))&&(s+=' colspan="'+m.colspan+'"'),s+=' style="borderWidth:'+(m.hasBorder?1:0)+'pt">',m.children&&m.children.length){for(var p=0,g=m.children;p<g.length;p++){var v=g[p],_=k[v.type];_&&(s+=_(v,t+4))}s+=l+"</td>"}else s+="</td>";s+=a+"</tr>"}}s+=o+"</table>";var x="";if(n)for(var m,y=0,b=n;y<b.length;y++)"#script"==(m=b[y]).tag?x+=o+m.text:"table"==m.tag&&(x+=s);else x=s;n=o+'height="'+L(i.height)+'"';i.splitable&&(n="");e=e+'<layout editor:_for_="'+Date.now()+'"'+o+'width="'+L(i.width)+'"'+n+o+'left="'+L(i.x)+'"'+o+'top="'+L(i.y)+'"'+o+'style="zIndex:'+i.zIndex+'" orientation="vertical">'+x+e+"</layout>";return i.splitable?r+'<layout orientation="vertical">'+e+r+"</layout>":e},"#script":function(e,t){return""+w(t+1)+e.text}};t.default=function(e){var t=e.page,i='<?xml version="1.0" encoding="UTF-8"?>\n',n=t.splitable?' splitable="true"':"";i+='<page xmlns="'+t.xmlns+'"\n    xmlns:xsi="'+t["xmlns:xsi"]+'"\n    xsi:schemaLocation="'+t["xsi:schemaLocation"]+'"\n    xmlns:editor="'+t["xmlns:editor"]+'"\n    width="'+L(t.width)+'" height="'+L(t.height)+'"'+n+">",0<t.header&&(i+=w(1)+'<header height="'+L(t.header)+'"></header>');for(var r=0,o=e.elements;r<o.length;r++){var a,l=o[r];"#script"!=l.type&&l.props.barred||(a=k[l.type])&&(i+=a(l,0))}e=L(t.footer);return 9<e?i+=w(1)+'<footer height="'+L(t.footer)+'">\n        <layout left="10" top="0" width="60" height="10" style="zIndex:1;overflow:visible;">\n                <pageIndex format="\u7b2ccurrentPageNumber\u9875 \u5171totalPageNumber\u9875" style="fontSize:12;fontFamily:Arial">\n                </pageIndex>\n            </layout>\n        </footer>':0<e&&(i+=w(1)+'<footer height="'+L(t.footer)+'"></footer>'),i+="\n</page>"}}),define("util/converter",["$","magix"],function(e,t,i){"use strict";t.__esModule=!0;function n(e,t){return void 0===t&&(t=2),Number(e.toFixed(t))}var r=e("$"),o=e("magix"),a={"<":"&lt;",">":"&gt;","&":"&amp;"};t.default={__j_:function(e){return 0|e.toFixed(0)},__aC:n,__i:function(e){var t=o.State.get("__j"),t=.26458333331386*Number(e)/t;return n(t)},__h:function(e){var t=o.State.get("__j");return n(3.7795275593333*Number(e)*t)},__k:function(e){return n(1.3333333333333*e*o.State.get("__j"))},__m:function(e){return n(.75*e/o.State.get("__j"))},__bf:function(e){var t=e.x,i=e.y,e=r.default("#stage_stage").offset();return{x:t-=e.left,y:i-=e.top}},__aF:function(e,t){var i=t.x,n=t.y,e=t.find?e.parents('[data-role="table-cell"]'):e,e=(e=e.length?e.eq(0):r.default("#stage_stage")).offset();return{x:i-=e.left,y:n-=e.top}},__bM:function(e){var t=e.x,i=e.y,n=r.default("#stage_outer"),e=n.offset();return{x:t=t-e.left+n.prop("scrollLeft"),y:i=i-e.top+n.prop("scrollTop")}},__aX:function(e){var t=e.x,i=e.y,n=r.default("#stage_stage").offset(),e=r.default("#stage_outer").offset();return{x:t+=n.left-e.left,y:i+=n.top-e.top}},__bO:function(e){var t=e.x,i=e.y,n=r.default("#stage_stage").offset(),e=r.default("#stage_outer").offset();return{x:t+=e.left-n.left,y:i+=e.top-n.top}},__eV:function(e){return e.replace(/[<>&]/g,function(e){return a[e]}).replace(/ /g,"&nbsp;").replace(/(?:\r\n|\r|\n)/g,"<br />")},__eX:function(e){return e.replace(/&nbsp;/g," ").replace(/<br>/g,"\r\n").replace(/<br \/>/g,"\r\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<div>([\s\S\n]*?)<\/div>/g,"\r\n$1")}}}),define("util/table",["../cainiao/const","magix"],function(e,t,i){"use strict";t.__esModule=!0;function ve(e,t){void 0===t&&(t={});for(var i,n={},r=t.startRow,o=t.endRow,a=t.column,l=function(e,t,i){n[e]||(n[e]={}),n[e][t]=i},s=function(e,t,i){return void 0!==r&&e<r?1:void 0===a?0:!(a==t)&&!(t<a&&a<t+i)},d=0,c=0,u=0,f=[];;){var h=e[d];if(!h||void 0!==o&&o<d)break;var p,g={row:d,col:c,cell:u},v=void 0;p=c,(v=n[i=d]?n[i][p]:0)?(s(d,c,1)||(g.ref=v,f.push(g)),c++):h.cells&&h.cells[u]?(v=(p=h.cells[u]).colspan||1,p=p.rowspan||1,g.rowspan=p,g.colspan=v,(1<p||1<v)&&function(e,t,i,n){for(var r={row:e,cell:t},o=t+1;o<t+n;o++)l(e,o,r);for(var a=e+1;a<e+i;a++)for(o=t;o<t+n;o++)l(a,o,r)}(d,c,p,v),s(d,c,v)||(g.data=!0,g.td=h.cells[u],f.push(g)),c++,u++):(0===d&&(f.$c=c),d++,u=c=0)}return f}function K(e){e.id||(e.id=n.default.guid("td_"))}function _e(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i],o=[];if("tr"==r.tag){var a={tag:r.tag,cells:o};if(r.cells)for(var l=0,s=r.cells;l<s.length;l++){var d=s[l];"td"==d.tag&&o.push(d)}t.push(a)}}return t}function f(e,t,i,n){for(var r=null;;){var o=e[i+=n];if(!o)break;if(o.ref&&(o=o.ref),o.row!=t.row||o.cell!=t.cell){r=o;break}}return r}function C(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.cells)for(var r=0,o=n.cells;r<o.length;r++){var a=o[r];if("td"==a.tag&&a.id==t.id)return i}}return-1}function T(e,t){var i,n=-1,r=e.cells,o=0;if(r){for(var a=0,l=0;o<r.length;o++){var s=r[o];if("td"==s.tag){if(t==a){n=o,i=s;break}a++,l=o}}-1==n&&(n=t==1+a?l+1:o)}return{index:n,cell:i}}function xe(e,t){for(var i=-1,n=0,r=0,o=0;r<e.length;r++)if("tr"==e[r].tag){if(n==t){i=r;break}n++,o=r}return-1==i&&(i=n+1==t?o+1:r),i}function v(e,t){for(var i={tag:"tr",cells:[]},n=0;n<e;n++)i.cells.push({tag:"td",hasBorder:!0,height:t});return i}function w(e,t){var i=e.rowIndex,n=e.colIndex,r=e.rows,o=!1;if(t){K(t);for(var a=0;a<r.length;a++){var l=r[a],s=!1;if("tr"==l.tag&&l.cells)for(var d=0;d<l.cells.length;d++){var c=l.cells[d];if("td"==c.tag&&c.id==t.id){i==a&&n==d||(o=!0,e.rowIndex=a,e.colIndex=d),s=!0;break}}if(s)break}}return o}function A(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i}}function L(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,o="left"==t||"right"==t;if(t=(o?function(e,t){var i=e.rows,n=e.rowIndex,e=e.colIndex,r=i[n].cells,o=e,a=null,e=r[o];if("left"==t){for(;0<=--o;)if((d=r[o])&&"td"==d.tag){a=d;break}}else if("right"==t)for(;++o<r.length;)if((d=r[o])&&"td"==d.tag){a=d;break}if(!a)return null;var l="right"==t?e:a,s="right"==t?a:e,i=_e(i);K(l),K(s);for(var d,e=C(i,e),c=-1,u=-1,f=0,h=ve(i,{startRow:e,endRow:e});f<h.length;f++)(d=h[f]).data&&(d.td.id==l.id?c=d.col:d.td.id==s.id&&(u=d.col));return c+(l.colspan||1)==u?a:null}:function(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,e=_e(i),o=i[n].cells[r];K(o);n=C(e,o);if(!("down"==t&&n==e.length-1||"up"==t&&0===n)){for(var r=o.rowspan||1,a="down"==t?n+r:n,e=ve(e,{endRow:a}),l=-1,s=null,d=0,c=e;d<c.length;d++)(h=c[d]).data&&h.td.id==o.id&&(l=h.col);for(var u=0,f=e;u<f.length;u++){var h=f[u];if(h.data&&h.col==l){var p=h.rowspan||1;if("down"==t&&h.row==a||"up"==t&&h.row+p==a){s=h.td;break}}}return s}})(e,t)){o=o?"rowspan":"colspan";return(i[n].cells[r][o]||1)==(t[o]||1)?t:void 0}}function _(e,t){var i=e.rows,n=e.rowIndex,e=e.colIndex;if(!(n<0||e<0)){var r=i[n].cells[e];K(r);for(var o=_e(i),a=ve(o),l=null,s=0;s<a.length;s++){var d,c,u=a[s];if(u.data)if(o[u.row].cells[u.cell].id==r.id){"left"==t?0<u.col&&(d=f(a,u,s,-1))&&(l=o[d.row].cells[d.cell]):"right"==t?u.col<a.$c-1&&(c=f(a,u,s,1))&&(l=o[c.row].cells[c.cell]):"top"==t?(d=f(a,u,s,-a.$c))&&(l=o[d.row].cells[d.cell]):"bottom"==t&&(c=f(a,u,s,a.$c))&&(l=o[c.row].cells[c.cell]);break}}return l}}var me=e("../cainiao/const"),n=e("magix");t.default={__fG:function(e,t){var i=!1;return"r"==t?i=this.__ja(e):"c"==t?i=this.__jb(e):"rt"==t?i=this.__jc(e,0):"rb"==t?i=this.__jc(e,1):"cb"==t?i=this.__jd(e,0):"ca"==t&&(i=this.__jd(e,1)),i&&this.__l(e,{fsize:e.lockSize}),i},__fS:function(e,t){var i=!1;return"sh"==t?i=this.__je(e,2):"sv"==t?i=this.__jf(e,2):"ml"==t?i=this.__jg(e,"left"):"mr"==t?i=this.__jg(e,"right"):"mu"==t?i=this.__jg(e,"up"):"md"==t&&(i=this.__jg(e,"down")),i&&this.__l(e),i},__jg:function(e,t){var i=!1,n="left"==t||"right"==t,r=L(e,t);if(r){var o=e.rows,a=e.rowIndex,l=e.colIndex,s=o[a].cells[l],a="right"==t||"down"==t,l=a?s:r,d=a?r:s;n?l.width+=d.width:l.height+=d.height,K(d),K(l);var c=l.children||(l.children=[]),t=d.children;if(t)for(var u=0,f=t;u<f.length;u++){var h=f[u];h.zIndex=c.length+1,c.push(h)}for(var a=C(o,d),p=o[a].cells,g=!1,t=_e(o),v=C(t,d),_=p.length;_--;)"td"==(x=p[_]).tag&&(x.id==d.id?p.splice(_,1):g=!0);n=n?"colspan":"rowspan",s=s[n]||1,r=r[n]||1;if(l[n]=s+r,!g){for(var x,m,y=0,b=ve(t,{endRow:v});y<b.length;y++)(x=b[y]).data&&(m=x.rowspan||1,x.row+m-1>=v&&--x.td.rowspan);o.splice(a,1)}w(e,l),i=!0}return i},__je:function(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,o=i[n].cells;if(o){var a=!1,l=o[r],e=l.colspan||1,s=l.rowspan||1,d=l.width/t;if(1<e){l.width=-1;var n=A(e,t),c=n.newCellsSpan,n=n.updatedSpan;l.colspan=n;for(var u=t<e?t-1:e-1,f=0;f<u;f++){var h={tag:"td",hasBorder:!0,width:-1};1<c&&(h.colspan=c),1<s&&(h.rowspan=s),o.splice(r+1,0,h)}a=!0}if(e<t){l.width=d;var p=t-e,i=_e(i),i=ve(i);K(l);for(var g=-1,v=0,_=i;v<_.length;v++)if((x=_[v]).data&&x.td.id==l.id){g=x.col;break}for(var x,m,y,b,w=0,L=i;w<L.length;w++)(x=L[w]).data&&(m=x.td,y=l.id!=m.id&&x.col==g,b=x.col<g&&x.colspan+x.col>g,(y||b)&&(m.colspan||(m.colspan=1),m.colspan+=p));for(f=0;f<p;f++){h={tag:"td",hasBorder:!0,width:d};1<s&&(h.rowspan=s),o.splice(r+1,0,h)}a=!0}return a}},__jf:function(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,o=i[n].cells;if(o){var e=!1,a=o[r],l=a.colspan||1,n=a.rowspan||1,o=_e(i);K(a);var s=C(o,a),d=a.height/t;if(1<n){a.height=-1;var c=ve(o,{startRow:s,endRow:s+n-1}),r=A(n,t),u=r.newCellsSpan,f=r.updatedSpan;a.rowspan=f;for(var h=-1,p=0,g=c;p<g.length;p++)if((b=g[p]).data&&b.td.id==a.id){h=b.col;break}for(var v=0,_=c;v<_.length;v++){var x=(b=_[v]).col,m=b.row,y=b.cell;s+f<=m&&x===h&&(m+s+f)%u==0&&(x=i[V=xe(i,m)],m=T(x,y).index,x.cells.splice(m,0,{tag:"td",colspan:l,height:d,hasBorder:!0,width:y.width,rowspan:u}))}e=!0}if(n<t){a.height=d;for(var b,w,L,z=t-n,k=0,S=c=ve(o,{startRow:0,endRow:s});k<S.length;k++)(b=S[k]).data&&(w=b.td,L=b.rowspan||1,w.id!=a.id&&b.row+L>s&&(L=L+z,b.td.rowspan=L));var V=xe(i,s),c={tag:"tr",cells:[{tag:"td",hasBorder:!0,width:a.width,colspan:l}]};i.splice(V+1,0,c),e=!0}return e}},__jb:function(e){var t=e.rows,i=e.rowIndex,n=e.colIndex,r=t[i].cells;if(r){i=!1;i=(i=_(e,"left"))||_(e,"right");var o=r[n],n=_e(t);K(o);n=ve(n);if(!(n.$c<=1)){for(var a,l=0,s=n;l<s.length;l++)if((d=s[l]).data&&d.td.id==o.id){a=d.col;break}for(var d,c=0,u=n;c<u.length;c++)if((d=u[c]).data)if(d.col<=a&&1<d.colspan&&d.col+d.colspan>a)d.td.colspan--;else if(d.col==a){var f=t[xe(t,d.row)].cells;K(d.td);for(var h=f.length;h--;)if(f[h].id==d.td.id){f.splice(h,1);break}}return i?w(e,i):(e.rowIndex=-1,e.colIndex=-1),!0}}},__ja:function(e){var t=e.rows,i=e.rowIndex,n=e.colIndex,r=t[i].cells;if(r){i=!1;i=(i=_(e,"top"))||_(e,"bottom");r=r[n],n=_e(t);if(!(n.length<=1)){K(r);for(var o,a=C(n,r),r=ve(n,{endRow:a}),l={},s=0,d=r;s<d.length;s++)(c=d[s]).data&&(c.row===a?c.rowspan&&1<c.rowspan&&(l[c.col]={td:c.td,rowspan:c.rowspan-1}):c.row<a&&c.row+c.rowspan>a&&c.td.rowspan--);r=ve(n,{endRow:a+1,startRow:a+1});for(var c,u=t[xe(t,a)].cells,f=0,h=r;f<h.length;f++)if(l[(c=h[f]).col]){var p=l[c.col],g=p.td,p=p.rowspan;if(g.children=[],o){K(o);for(var v=u.length;v--;)if(u[v].id==o.id){u.splice(v,0,g);break}}else t[xe(t,c.row)].cells.unshift(g);g.rowspan=p,o=g}else o=c.td;r=xe(t,a);return t.splice(r,1),i?w(e,i):(e.rowIndex=-1,e.colIndex=-1),!0}}},__jc:function(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,o=i[n].cells;if(o){var a=o[r],l=_e(i);K(a);var s=C(l,a),n=ve(l,{startRow:s,endRow:s}),o=n.$c,r=0===t;if(0===(t+=s)||t===l.length){var d=v(o,a.height),o=xe(i,0===t?t:t+1);return i.splice(o,0,d),r&&e.rowIndex++,!0}for(var c=0,u=0,f=ve(l,{endRow:t});u<f.length;u++){var h,p,g=f[u];g.data&&(h=g.row<t,p=g.row+g.rowspan>t,h&&p&&g.td.rowspan++,g.row===t&&(c+=g.colspan||1))}d=v(c,a.height),a=xe(i,t);return i.splice(a,0,d),r&&e.rowIndex++,!0}},__jd:function(e,t){var i=e.rows,n=e.rowIndex,r=e.colIndex,o=i[n].cells;if(o){var a=o[r],l=_e(i);K(a);for(var n=C(l,a),o=ve(l,{startRow:n,endRow:n}),r=o.$c,n=0===t,s=0,d=o;s<d.length;s++){var c=d[s];if(c.data&&c.td.id==a.id){t=c.col+t;break}}if(0===t||t===r){for(var u=0,f=i;u<f.length;u++)"tr"==(_=f[u]).tag&&(m=T(_,0===t?t:t+1).index,_.cells.splice(m,0,{tag:"td",hasBorder:!0,width:a.width}));return n&&e.colIndex++,!0}for(var h={},p=0,g=ve(l,{column:t});p<g.length;p++){var v=g[p];if(1!==h[v.row]){var _=i[xe(i,v.row)],x=T(_,v.cell),m=x.index,x=x.cell;if(v.col==t)_.cells.splice(m,0,{tag:"td",hasBorder:!0,width:a.width});else if(x&&x.colspan++,(h[v.row]=1)<v.rowspan)for(var y=v.row+1;y<v.row+v.rowspan;y++)h[y]=1}}return n&&e.colIndex++,!0}},__fC:function(e,t){t=_(e,t);return w(e,t)},__fF:function(e,t,i){for(var n=0,r=0,o=null,a=0,l=e;a<l.length;a++){var s=l[a];if("tr"==s.tag){var d=!1;if(s.cells&&t===n)for(var c=0,u=s.cells;c<u.length;c++)if("td"==u[c].tag){if(i===r){d=!0,o=s.cells[r];break}r++}if(d)break;n++}}return o},__l:function(e,t){if(void 0===t&&(t={}),!e.__invalid){for(var i=t.col,n=t.share,r=t.lw,o=t.fsize,a=t.nextRow,l=t.nextCol,s=t.changeType,d=e.rows,c=_e(d),u=ve(c),f=[],h=[],p=0,g=u;p<g.length;p++)(se=g[p]).data&&(K=(se.colspan||1)-1,C=(se.rowspan||1)-1,(void 0===h[se.col]||h[se.col]>K)&&(h[se.col]=K),(void 0===f[se.row]||f[se.row]>C)&&(f[se.row]=C));for(var v=0,_=u;v<_.length;v++)if((se=_[v]).data){var x=se.td;if(1<(K=x.colspan))for(var m=se.col;m<se.col+K;m++)x.colspan-=h[m]||0;if(1<(C=x.rowspan))for(var y=x.height/C,m=se.row;m<se.row+C;m++)x.rowspan-=f[m]||0,x.height-=(f[m]||0)*y}for(var b={},w={},L=0,z=0,k=0,S=u=ve(c);k<S.length;k++)if((se=S[k]).col>z&&(z=se.col),0==se.col&&(b[se.row]=(b[se.row]||0)+(w[se.row]||0)),se.data){for(var V=b[se.row]||0,K=se.td.colspan||1,C=se.td.rowspan||1,m=se.row+1;m<se.row+C;m++)w[m]=(w[m]||0)+K;b[se.row]=V+K}for(var T=0;T<c.length;){var A=z-(V=b[T]||0)+1;if(0<A)for(var E=xe(d,T);0<A;)L=1,d[E].cells.push({tag:"td",hasBorder:!0,width:-1,height:-1}),A--;T++}L&&(c=_e(d),u=ve(c));for(var M,N=[],I=[],D=!1,O=!1,B=0,R=u;B<R.length;B++)(se=R[B]).data&&(W=se.cell,M=se.col,he=c[se.row].cells[W],se.colspan&&1!=se.colspan||(void 0===N[M]||he.width>N[M]&&!D||i&&i.id==he.id)&&(D=D||i&&i.id==he.id,N[M]=he.width),se.rowspan&&1!=se.rowspan||(void 0===I[se.row]||he.height>I[se.row]&&!O||i&&he.id==i.id)&&(O=O||i&&he.id==i.id,I[se.row]=he.height));for(var P=0,H=u;P<H.length;P++)if((se=H[P]).data){var W=se.cell,j=se.col;if(0<=(he=c[se.row].cells[W]).width&&1<se.colspan){for(var X=0,F=0,m=j;m<j+se.colspan;m++)void 0!==N[m]&&0<=N[m]&&(X+=N[m],F++);if(F<se.colspan)for(var $=Math.max(he.width-X,0)/(se.colspan-F),m=j;m<j+se.colspan;m++)(void 0===N[m]||N[m]<0)&&(N[m]=$);else if(X<he.width&&(!i||i.id==he.id)||X>he.width&&i&&i.id==he.id)for(m=j;m<j+se.colspan;m++)N[m]=0<X?N[m]/X*he.width:he.width/se.colspan}if(0<=he.height&&1<se.rowspan){for(var U=0,q=0,m=se.row;m<se.row+se.rowspan;m++)void 0!==I[m]&&0<=I[m]&&(U+=I[m],q++);if(q<se.rowspan)for(y=Math.max(0,he.height-U)/(se.rowspan-q),m=se.row;m<se.row+se.rowspan;m++)(void 0===I[m]||I[m]<0)&&(I[m]=y);else if(U<he.height&&(!i||i.id==he.id)||U>he.height&&i&&i.id==he.id)for(m=se.row;m<se.row+se.rowspan;m++)I[m]=0<U?I[m]/U*he.height:he.height/se.rowspan}}i&&e.lockSize&&("row"==s&&(C=i.rowspan||1,I[i.row+C]=a),"col"==s&&(K=i.colspan||1,N[i.col+K]=l));for(var G=0,Y=0,Z=0,Q=N;Z<Q.length;Z++)0<=($=Q[Z])&&(G+=$,Y++);for(var J=0,ee=0,te=0,ie=I;te<ie.length;te++)0<=(y=ie[te])&&(J+=y,ee++);if(Y<N.length){$=me.default.TABLE_CELLS_WIDTH;G<e.width&&($=(e.width-G)/(N.length-Y));for(m=N.length;m--;)N[m]<0&&(N[m]=$)}else if((r||o)&&G>e.width||o&&G<e.width)for(m=N.length;m--;)N[m]=N[m]/G*e.width;if(ee<I.length){y=me.default.TABLE_ROWS_HEIGHT;J<e.height&&(y=(e.height-J)/(I.length-ee));for(m=I.length;m--;)I[m]<0&&(I[m]=y)}else if(o&&(J>e.height||J<e.height))for(m=I.length;m--;)I[m]=I[m]/J*e.height;for(var ne=G=0,re=N;ne<re.length;ne++)G+=$=re[ne];for(var oe=J=0,ae=I;oe<ae.length;oe++)J+=y=ae[oe];e.width=G,e.height=J;var le=!1;if(n){if("x"==n)for($=G/N.length,m=N.length;m--;)1e-4<Math.abs(N[m]-$)&&(le=!0,N[m]=$);if("y"==n)for(y=J/I.length,m=I.length;m--;)1e-4<Math.abs(I[m]-y)&&(le=!0,I[m]=y)}for(var se,de=null,ce=0,ue=0,fe=u;ue<fe.length;ue++){if((se=fe[ue]).data){var he,W=se.cell,pe=se.row,ge=se.col,C=(he=c[pe].cells[W]).rowspan||1,K=he.colspan||1;he.row=pe;for($=0,y=0,m=he.col=ge;m<ge+K;m++)$+=N[m];for(m=pe;m<pe+C;m++)y+=I[m];de&&0<ge&&(de.ref&&(de=de.ref),he.left={row:de.row,col:de.cell}),0<pe&&((de=u[ce-N.length]).ref&&(de=de.ref),he.top={row:de.row,col:de.cell}),he.hasRight=!e.lockSize||ge+K<N.length,he.hasBottom=!e.lockSize||pe+C<I.length,he.hasTop=0<pe,he.width=$,he.height=y}de=se,ce++}return t&&(t.colWidths=N,t.rowHeights=I),le}}}}),define("util/transform",[],function(e,t,i){"use strict";t.__esModule=!0;function n(e,t){return e=e.props,t=t.props,e.zIndex-t.zIndex}var r={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={__aG:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},__az:function(e,t){var i=e.x,n=e.y,r=e.width,o=e.height,a=Math.sqrt(Math.pow(r,2)+Math.pow(o,2))/2,l=r?Math.round(180*Math.atan(o/r)/Math.PI):0,s=180-t-l,d=l-t,c=90-t,u=t,e=r/2,l=o/2,t=i+e,r=n+l,o={x:t+a*Math.cos(s*Math.PI/180),y:r-a*Math.sin(s*Math.PI/180)},i={x:t+l*Math.cos(c*Math.PI/180),y:r-l*Math.sin(c*Math.PI/180)},n={x:t+a*Math.cos(d*Math.PI/180),y:r-a*Math.sin(d*Math.PI/180)},c={x:t+e*Math.cos(u*Math.PI/180),y:r+e*Math.sin(u*Math.PI/180)},s={x:t-a*Math.cos(s*Math.PI/180),y:r+a*Math.sin(s*Math.PI/180)},l={x:t-l*Math.sin(u*Math.PI/180),y:r+l*Math.cos(u*Math.PI/180)},a={x:t-a*Math.cos(d*Math.PI/180),y:r+a*Math.sin(d*Math.PI/180)},d={x:t-e*Math.cos(u*Math.PI/180),y:r-e*Math.sin(u*Math.PI/180)},t=Math.min(o.x,n.x,s.x,a.x),r=Math.max(o.x,n.x,s.x,a.x),e=Math.min(o.y,n.y,s.y,a.y),u=Math.max(o.y,n.y,s.y,a.y);return{point:[o,i,n,c,s,l,a,d],width:r-t,height:u-e,left:t,right:r,top:e,bottom:u}},__aA:function(e,t){var i=r[t],t=i-4;return t<0&&(t=i+4),{current:{index:i,point:e[i]},opposite:{index:t,point:e.slice(t,t+1)[0]}}},__jh:function(e,t){var i=e.x,n=e.y,r=e.width,o=e.height,a=e.scale,l={x:0,y:0},s=r*(a.x-1),d=o*(a.y-1),e=r+s,a=o+d,s=i-s/2,d=n-d/2;return t&&(n=[{x:i,y:n},{x:i+r,y:n},{x:i+r,y:n+o},{x:i,y:n+o}],o=[{x:s,y:d},{x:s+e,y:d},{x:s+e,y:d+a},{x:s,y:d+a}],l.x=n[t].x-o[t].x,l.y=n[t].y-o[t].y),{x:s+l.x,y:d+l.y,width:e,height:a}},__aB:function(e,t,i,n){var r=this.__jh({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),o=r.width,t=r.height,r=this.__az(r,e.rotate),e=i.point[n].x-r.point[n].x+r.left,n=i.point[n].y-r.point[n].y+r.top;return{left:e+r.width/2-o/2,top:n+r.height/2-t/2,width:o,height:t}},__ji:function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];"#script"===r.type||r.props.barred||t.push(r)}return t},__ba:function(e){return this.__ji(e).sort(n)},__bn:function(e,t){var i=e.x,n=e.y,r=e.width,o=e.height;if(0==r)return{x:i,y:n};e=i+r/2,i=n+o/2,n=Math.sqrt(r*r/2/2+o*o/2/2),t=180*Math.atan(o/r)/Math.PI+t+180;return{x:e+n*Math.cos(t*Math.PI/180),y:i+n*Math.sin(t*Math.PI/180)}}}}),define("i18n/en-us",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={_ek:"Printer Designer",_dk:"Background",_dn:"Bg Size",_do:"Auto",_dp:"Use Page",_dq:"Use Background",_dm:"Clear",_bs:"Property",_bt:"Component Tree",_bv:"Use Original Size",_bw:"Divide Table Width",_bx:"Divide Table Height",_bu:"Type",__bq:"Get image size error. Try again~~",_bh:"Press drag sort element z index",_bi:"Delete element",__eE:"Auto height",_V:"XML Code",_el:"Save",_W:"Cancel",_gf:"Confirm",_X:"Apply",__Y:"Select All",__Z:"Copy",__a_:"Cut",__aa:"Paste",__ab:"Move Up",__ac:"Move Down",__ad:"To Top",__ae:"To Bottom",__af:"Delete",__ag:"Add Rows Above",__ah:"Add Rows Below",__ai:"Delete The Rows",__aj:"Add Cols Before",__ak:"Add Cols After",__al:"Delete The Cols",_cS:"Redo",_cR:"Undo",_cT:"New",_cw:"Templates",__cy:"Clear content and set a new page?",_cY:"Align left",_d_:"Align right",_da:"Align top",_dc:"Align bottom",_cV:"Stage horizontal centers(use each element center when shift key pressed)",_cU:"Stage vertical centers(use each element center when shift key pressed)",_db:"Align vertical centers",_cZ:"Align horizontal centers",_dh:"Paper Size",_dr:"Paging Print",_ds:"Papers",_dv:"Paper setting",_dt:"Zoom-in",_du:"Zoom-out",_dA:"Expand toolbox",_dB:"Shrink toolbox",_dC:"Searching...",_fO:"Left",_fP:"Right",_fQ:"Above",_fR:"Below",_hx:"Left",_hy:"Center",_hz:"Right",_hA:"Top",_hB:"Middle",_hC:"Bottom",_hD:"Italic",_hE:"Underline",_in:"Broswer Images",_iD:"Images",__iY:"Image URL",__ir:"Are you sure you want to delete this item?",__gd:"Tip",_hv:"Search...",__en:"X",__eo:"Y",__ev:"Lock",__ew:"Name",__er:"Alpha",__fb:"Width",__fc:"Height",__eG:"Rotate",__fL:"V-Line",__ex:"H-Line",__ey:"Length",__ez:"Width",__eA:"Style",___:"Solid",__a:"Dashed",__b:"Dotted",__fi:"Rectangle",__fm:"Border",__fl:"Bd-Width",__fn:"Fill",__fj:"Width",__fk:"Height",__fK:"V-Code",__em:"H-Code",__fe:"QRCode",__ep:"Width",__eq:"Height",__ff:"Width",__fg:"Height",__es:"Content",__eu:"Show Text",__et:"Category",__fh:"Schema",__fa:"Image",_dl:"Choose",__fd:"Orig-Size",__fo:"Table",__fw:"Cell Pick",__fy:"Cell Size",__fx:"Op-Cell",__ft:"Paging",__fs:"Bd-Hidden",__fp:"Width",__fq:"Height",__fu:"Div-Width",__fv:"Div-Height",__fr:"Lock Size",__fz:"Cell Border",__fA:"Show border",__fB:"Hide border",__eB:"H-Text",__fM:"V-Text",__eU:"Alias",__eT:"Content",__eS:"Align",__eR:"Style",__eQ:"Direction",__eP:"Weight",__eM:"Color",__eN:"Default",__eO:"White On Black",__eL:"Line Height",__eK:"Lt-Spacing",__eI:"Font Size",__eJ:"Auto FS",__eH:"Font Family",__eC:"Width",__eD:"Height",__eF:"CN Style",_f_:"Please input text",__c:"Simsun",__d:"Simhei",__g:"KaiTi",__e:"Microsoft YaHei",__f:"Microsoft JhengHei",__fJ:"Delete table",_aJ:"Press move or use context menu",_fY:"H-Split Cell",_fZ:"V-Split Cell",_fX:"Merge Down",_fW:"Merge Up",_fU:"Merge Left",_fV:"Merge Right",_M:"Delete line",_N:"Press move line position",_cW:"Vertical layout(use element center to align when shift key pressed.Average edit zone when ctrl pressed)",_cX:"Horizontal layout(use element center to align when shift key pressed.Average edit zone when ctrl pressed)",_dd:"Same width as select max width",_de:"Same width as select min width",_df:"Same height as select max height",_dg:"Same height as select min height",_iF:"Paste Image",_iG:"Dragdrop(multiple)",_iH:"Click Upload",_iE:"Search images",_iI:'Can not find images title contains "{0}"',__iv:"Not detected images. Please recopy and paste",_cx:"No templates",__ee:"Processing...",__ed:"missing temp_id or biz_id",_aK:"[unsaved {0}]",_aL:"[saving...]",__eb:"Detected unsaved history,recover it?",__dN:"Unsaved,quit?",_di:"Header",_dj:"Footer",_aM:"Error\uff1a"}}),define("i18n/index",["magix","./zh-cn","./en-us"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("./zh-cn"),e=e("./en-us"),o={"zh-cn":n.default,"en-us":e.default},a=r.default.has,l=/\{(\d+)\}/g;t.default=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var n=(r.default.config("lang")||navigator.language).toLowerCase();a(o,n)||(n="zh-cn");n=o[n],e=a(n,e)?n[e]:e;return i.length&&(e=e.replace(l,function(e,t){return t|=0,i.length>t?i[t]:e})),e}}),define("i18n/zh-cn",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={_ek:"\u6253\u5370\u8bbe\u8ba1\u5668",_dk:"\u5957\u6253\u80cc\u666f",_dn:"\u5957\u6253\u5c3a\u5bf8",_do:"\u9ed8\u8ba4",_dp:"\u80cc\u666f\u9002\u5e94\u7eb8\u5f20",_dq:"\u7eb8\u5f20\u9002\u5e94\u80cc\u666f",_dm:"\u6e05\u9664",_bs:"\u5c5e\u6027",_bt:"\u7ed3\u6784\u6811",_bu:"\u7c7b\u578b",_bv:"\u4f7f\u7528\u56fe\u7247\u81ea\u8eab\u5bbd\u9ad8",_bw:"\u5355\u5143\u683c\u5747\u5206\u5bbd\u5ea6",_bx:"\u5355\u5143\u683c\u5747\u5206\u9ad8\u5ea6",__bq:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_bh:"\u6309\u4e0b\u62d6\u52a8\u6392\u5e8fz\u8f74",_bi:"\u5220\u9664\u5143\u7d20",__eE:"\u81ea\u52a8\u9ad8\u5ea6",_V:"\u4ee3\u7801",_el:"\u4fdd\u5b58",_W:"\u53d6\u6d88",_gf:"\u786e\u5b9a",_X:"\u5e94\u7528",__Y:"\u5168\u9009",__Z:"\u590d\u5236",__a_:"\u526a\u5207",__aa:"\u7c98\u8d34",__ab:"\u4e0a\u79fb\u4e00\u5c42",__ac:"\u4e0b\u79fb\u4e00\u5c42",__ad:"\u79fb\u81f3\u9876\u5c42",__ae:"\u79fb\u5230\u5e95\u5c42",__af:"\u5220\u9664",__ag:"\u4e0a\u65b9\u6dfb\u52a0\u884c",__ah:"\u4e0b\u65b9\u6dfb\u52a0\u884c",__ai:"\u5220\u9664\u5f53\u524d\u884c",__aj:"\u524d\u9762\u6dfb\u52a0\u5217",__ak:"\u540e\u9762\u6dfb\u52a0\u5217",__al:"\u5220\u9664\u5f53\u524d\u5217",_cS:"\u91cd\u505a",_cR:"\u64a4\u9500",_cT:"\u65b0\u5efa",_cw:"\u901a\u7528\u6a21\u677f",__cy:"\u786e\u8ba4\u6e05\u7a7a\u65b0\u5efa\uff1f",_cY:"\u5de6\u5bf9\u9f50",_d_:"\u53f3\u5bf9\u9f50",_da:"\u4e0a\u5bf9\u9f50",_dc:"\u4e0b\u5bf9\u9f50",_db:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",_cZ:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",_cV:"\u7f16\u8f91\u533a\u6c34\u5e73\u5c45\u4e2d(\u6309\u4e0bshift\u952e\u5219\u4ee5\u5355\u4e2a\u5143\u7d20\u4e2d\u5fc3\u70b9\u5bf9\u9f50)",_cU:"\u7f16\u8f91\u533a\u5782\u76f4\u5c45\u4e2d(\u6309\u4e0bshift\u952e\u5219\u4ee5\u5355\u4e2a\u5143\u7d20\u4e2d\u5fc3\u70b9\u5bf9\u9f50)",_dh:"\u7eb8\u5f20\u5c3a\u5bf8",_dr:"\u662f\u5426\u5206\u9875",_ds:"\u5e38\u7528\u7eb8\u5f20",_dv:"\u7eb8\u5f20\u8bbe\u7f6e",_dt:"\u7f29\u5c0f",_du:"\u653e\u5927",_dA:"\u5c55\u5f00\u5de5\u5177\u680f",_dB:"\u6536\u8d77\u5de5\u5177\u680f",_dC:"\u641c\u7d22\u6253\u5370\u9879",_fO:"\u5411\u5de6",_fP:"\u5411\u53f3",_fQ:"\u5411\u4e0a",_fR:"\u5411\u4e0b",_hx:"\u5c45\u5de6",_hy:"\u5c45\u4e2d",_hz:"\u5c45\u53f3",_hA:"\u5c45\u4e0a",_hB:"\u5c45\u4e2d",_hC:"\u5c45\u4e0b",_hD:"\u659c\u4f53",_hE:"\u4e0b\u5212\u7ebf",_in:"\u6d4f\u89c8\u56fe\u5e93",_iD:"\u56fe\u7247\u5e93",__iY:"\u56fe\u7247\u7f51\u7edc\u5730\u5740",__ir:"\u786e\u8ba4\u5220\u9664\u8be5\u56fe\u7247\uff1f",__gd:"\u63d0\u793a",_hv:"\u641c\u7d22\u5173\u952e\u8bcd",__en:"X\u5750\u6807",__eo:"Y\u5750\u6807",__ev:"\u7f16\u8f91\u9501\u5b9a",__ew:"\u7ec4\u4ef6\u6811\u540d\u79f0",__er:"\u900f\u660e\u5ea6",__fb:"\u5bbd",__fc:"\u9ad8",__eG:"\u65cb\u8f6c\u89d2\u5ea6",__fL:"\u6c34\u5e73\u76f4\u7ebf",__ex:"\u5782\u76f4\u76f4\u7ebf",__ey:"\u7ebf\u6761\u957f\u5ea6",__ez:"\u7ebf\u6761\u5bbd\u5ea6",__eA:"\u7ebf\u6761\u6837\u5f0f",___:"\u5b9e\u7ebf",__a:"\u865a\u7ebf",__b:"\u70b9\u7ebf",__fi:"\u77e9\u5f62",__fm:"\u8fb9\u6846\u6837\u5f0f",__fl:"\u8fb9\u6846\u5bbd\u5ea6",__fn:"\u662f\u5426\u586b\u5145",__fj:"\u77e9\u5f62\u5bbd\u5ea6",__fk:"\u77e9\u5f62\u9ad8\u5ea6",__fK:"\u7eb5\u5411\u6761\u7801",__em:"\u6a2a\u5411\u6761\u7801",__fe:"\u4e8c\u7ef4\u7801",__ep:"\u6761\u7801\u5bbd\u5ea6",__eq:"\u6761\u7801\u9ad8\u5ea6",__ff:"\u4e8c\u7ef4\u7801\u5bbd\u5ea6",__fg:"\u4e8c\u7ef4\u7801\u9ad8\u5ea6",__es:"\u5185\u5bb9",__eu:"\u663e\u793a\u6587\u672c",__et:"\u7801\u5f0f",__fh:"\u6a21\u5f0f",__fa:"\u56fe\u7247",_dl:"\u9009\u62e9\u56fe\u7247",__fd:"\u8fd8\u539f\u5bbd\u9ad8",__fo:"\u8868\u683c",__fw:"\u5355\u5143\u683c\u9009\u53d6",__fy:"\u5355\u5143\u683c\u5bbd\u9ad8",__fx:"\u5355\u5143\u683c\u64cd\u4f5c",__ft:"\u5206\u9875\u6253\u5370",__fs:"\u9690\u85cf\u8fb9\u6846",__fp:"\u8868\u683c\u5bbd",__fq:"\u8868\u683c\u9ad8",__fu:"\u5747\u5206\u5bbd\u5ea6",__fv:"\u5747\u5206\u9ad8\u5ea6",__fr:"\u9501\u5b9a\u5bbd\u9ad8",__fz:"\u5355\u5143\u683c\u8fb9\u6846",__fA:"\u6709\u8fb9\u6846",__fB:"\u65e0\u8fb9\u6846",__eB:"\u6a2a\u5411\u6587\u672c",__fM:"\u7eb5\u5411\u6587\u672c",__eU:"\u6587\u672c\u522b\u540d",__eT:"\u6587\u672c\u5185\u5bb9",__eS:"\u6392\u5217",__eR:"\u6837\u5f0f",__eQ:"\u8f93\u51fa\u65b9\u5411",__eP:"\u5b57\u4f53\u7c97\u7ec6",__eM:"\u989c\u8272",__eN:"\u9ed8\u8ba4",__eO:"\u9ed1\u5e95\u767d\u5b57",__eL:"\u884c\u9ad8",__eK:"\u5b57\u95f4\u8ddd",__eI:"\u5b57\u53f7",__eJ:"\u81ea\u52a8\u5b57\u53f7",__eH:"\u5b57\u4f53",__eC:"\u6587\u672c\u957f\u5ea6",__eD:"\u6587\u672c\u9ad8\u5ea6",__eF:"\u83dc\u9e1f\u903b\u8f91",_f_:"\u8bf7\u8f93\u5165\u6587\u672c",__c:"\u5b8b\u4f53",__d:"\u9ed1\u4f53",__g:"\u6977\u4f53",__e:"\u5fae\u8f6f\u96c5\u9ed1",__f:"\u5fae\u8f6f\u6b63\u9ed1\u4f53",__fJ:"\u5220\u9664\u8868\u683c",_aJ:"\u6309\u4e0b\u62d6\u52a8\u6216\u4f7f\u7528\u53f3\u952e\u83dc\u5355",_fY:"\u6c34\u5e73\u62c6\u5206\u5355\u5143\u683c",_fZ:"\u5782\u76f4\u62c6\u5206\u5355\u5143\u683c",_fX:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",_fW:"\u5411\u4e0a\u5408\u5e76\u5355\u5143\u683c",_fU:"\u5411\u5de6\u5408\u5e76\u5355\u5143\u683c",_fV:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",_M:"\u5220\u9664\u5f53\u524d\u8f85\u52a9\u7ebf",_N:"\u6309\u4e0b\u62d6\u52a8\u53ef\u8c03\u6574\u8f85\u52a9\u7ebf\u4f4d\u7f6e",_cW:"\u5782\u76f4\u5747\u5206\u6392\u5217(\u6309\u4e0bshift\u952e\u5219\u4f7f\u7528\u5143\u7d20\u4e2d\u5fc3\u70b9\u8fdb\u884c\u5747\u5206,\u6309\u4e0bctrl\u5219\u5e73\u5206\u7f16\u8f91\u533a\u9ad8\u5ea6)",_cX:"\u6c34\u5e73\u5747\u5206\u6392\u5217(\u6309\u4e0bshift\u952e\u5219\u4f7f\u7528\u5143\u7d20\u4e2d\u5fc3\u70b9\u8fdb\u884c\u5747\u5206,\u6309\u4e0bctrl\u5219\u5e73\u5206\u7f16\u8f91\u533a\u5bbd\u5ea6)",_dd:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6\u540c\u5bbd",_de:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5c0f\u5bbd\u5ea6\u540c\u5bbd",_df:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6\u540c\u9ad8",_dg:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5c0f\u9ad8\u5ea6\u540c\u9ad8",_iF:"\u7c98\u8d34\u56fe\u7247",_iG:"\u62d6\u62fd\uff08\u591a\u4e2a\uff09\u4e0a\u4f20",_iH:"\u70b9\u51fb\u4e0a\u4f20",_iE:"\u641c\u7d22\u56fe\u7247\u5e93",_iI:'\u627e\u4e0d\u5230"{0}"\u7684\u56fe\u7247',__iv:"\u672a\u68c0\u6d4b\u5230\u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u590d\u5236\u7c98\u8d34",_cx:"\u6682\u65e0\u901a\u7528\u6a21\u677f",__ee:"\u6b63\u5728\u5904\u7406...",_aM:"\u4fdd\u5b58\u5931\u8d25\uff1a",__ed:'\u7f3a\u5c11\u53c2\u6570"temp_id"\u6216"biz_id"',_aK:"[\u672a\u4fdd\u5b58 {0}]",_aL:"[\u4fdd\u5b58\u4e2d...]",__eb:"\u68c0\u6d4b\u5230\u4e0a\u6b21\u672a\u4fdd\u5b58\u5c31\u9000\u51fa\uff0c\u662f\u5426\u6062\u590d\u5230\u4e0a\u6b21\u7f16\u8f91\u72b6\u6001\uff1f",__dN:"\u5185\u5bb9\u5c1a\u672a\u4fdd\u5b58\uff0c\u786e\u8ba4\u5173\u95ed\uff1f",_di:"\u9875\u5934",_dj:"\u9875\u811a"}}),define("service/index",["magix","$"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),u=e("$"),n=r.default.Service.extend(function(n,r){var e=n.get("method")||"GET",t=n.get("upload"),i=n.get("params"),e={url:n.get("url"),type:e,data:i,dataType:"json",complete:function(e,t){try{if("error"==t)r({msg:e.statusText});else{var i=e.responseJSON;if(!i||"1"!=i.status)return void r({msg:i?i.message||"server error":"data error"});n.set("data",i.data),r()}}catch(e){r({msg:e.message})}}};if(t){var o=new FormData,a=n.get("key")||"files",t=n.get("files")||[];if(t.length)for(var l=0,s=t;l<s.length;l++){var d=s[l];o.append(a,d)}else o.append(a,t);if(i)for(var c in i)o.append(c,i[c]);e.cache=!1,e.processData=!1,e.contentType=!1,e.data=o}u.default.ajax(e)});n.add([{name:"__dw",url:r.default.config("getComponentsUrl")},{name:"__ip",url:r.default.config("getImagesUrl")},{name:"__it",url:r.default.config("uploadImagesUrl"),key:r.default.config("uploadImagesKey"),method:"POST",upload:!0},{name:"__cv",url:r.default.config("getTemplatesUrl"),cache:12e4},{name:"__ef",url:r.default.config("getContentUrl")},{name:"__dR",url:r.default.config("saveContentUrl"),method:"POST"},{name:"__dY",url:r.default.config("uploadThumbImageUrl"),key:r.default.config("thumbImageKey"),method:"POST",upload:!0},{name:"__is",url:r.default.config("delImageUrl"),method:"POST"}]),t.default={ctor:function(){var e=this;e.on("rendercall",function(){delete e.__iZ})},request:function(e){e=e||r.default.guid("r");var t=new n;return this.capture(e,t,!0),t},fetch:function(e,t){var i=JSON.stringify(e);this.request(i).all(e,t)},save:function(e,t){var i=this,n=JSON.stringify(e);i.lock(n,function(){i.request(n+"_request").save(e,t)})},lock:function(e,t){this.__iZ||(this.__iZ={});var i=this.__iZ;i[e]||(i[e]=t)()},unlock:function(e){var t=this.__iZ;t&&delete t[e]},upload:function(e,i,n){this.request(i).all({name:"__it",files:e,params:{biz_id:r.default.config("bizId"),temp_id:r.default.config("tempId")}},function(e,t){n(i,t.get("data",[]))})}}}),define("element/index",["magix","../util/table","./hcode/designer","./hline/designer","./htext/designer","./image/designer","./qrcode/designer","./rect/designer","./table/designer","./vcode/designer","./vline/designer","./vtext/designer"],function(e,t,i){"use strict";t.__esModule=!0;for(var v=e("magix"),_=e("../util/table"),n=e("./hcode/designer"),r=e("./hline/designer"),o=e("./htext/designer"),a=e("./image/designer"),l=e("./qrcode/designer"),s=e("./rect/designer"),d=e("./table/designer"),c=e("./vcode/designer"),u=e("./vline/designer"),e=e("./vtext/designer"),d=[r.default,u.default,s.default,o.default,e.default,a.default,n.default,c.default,l.default,d.default],f=Object.create(null),h=0,p=d;h<p.length;h++){var g=p[h];f[g.type]=g}t.default={list:d,byType:function(e){return f[e]},byJSON:function(e){var f,h=this,t=[],p={},g=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if("#script"==r.type?t.push(r):r.props.barred||(f=v.default.guid("e_"),r.id&&(p[r.id]=r),r.id=f,r.ctor=h.byType(r.type),t.push(r)),"table"==r.type){for(var o=0,a=r.props.rows;o<a.length;o++){var l=a[o];if("tr"==l.tag)for(var s=0,d=l.cells;s<d.length;s++){var c,u=d[s];"td"==u.tag&&u.children&&(c=[],g(u.children,c),u.children=c)}}_.default.__l(r.props)}}};return g(e,t),{elements:t,map:p}}}}),define("element/htext/designer",["magix","../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../editor/core/designer"),o=e("../../editor/const/props-desc"),a=e("../../util/converter"),l=e("../../cainiao/const"),s=e("../../i18n/index"),e=function(e,t){return e?(t._x=t.x,t._y=t.y,t._width=t.width,t._height=t.height,t.x=.76,t.y=.76,t.width=-3.77,t.height=-3.77,t.autoHeight=!1):(t.x=t._x,t.y=t._y,t.width=t._width,t.height=t._height),t.xLocked=e,t.yLocked=e,t.widthLocked=e,t.heightLocked=e,t.zIndex=0,e},d=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/htext/index"}),d.init.apply(this,arguments)}},{title:"__eB",type:"htext",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},writeAdapter:e,getProps:function(e,t){return{zIndex:0,x:e,y:t,width:94.49,height:18.9,locked:!1,rotate:0,alpha:1,supportCNStyle:!1,useCNStyle:!1,fontFamily:"SimHei",fontSize:8,lineHeight:["","mm"],fontStyle:[],align:["left","top"],letterSpacing:0,fontWeight:"normal",autoFontSize:!1,autoHeight:!1,text:"",alias:"",direction:"ltr",color:"-1",tip:s.default("__eB"),allowEdit:1}},props:[{tip:"__en",key:"x",type:o.default.NUMBER,fixed:2,read:a.default.__i,write:a.default.__h},{tip:"__eo",key:"y",type:o.default.NUMBER,fixed:2,read:a.default.__i,write:a.default.__h},{tip:"__eC",key:"width",type:o.default.NUMBER,min:"0",fixed:2,max:2800,read:a.default.__i,write:a.default.__h},{tip:"__eD",key:"height",type:o.default.NUMBER,min:"0",fixed:2,max:2800,read:a.default.__i,write:a.default.__h,ifShow:function(e){return!n.default.config("textAutoHeight")||!e.autoHeight}},{tip:"__eE",key:"autoHeight",type:o.default.BOOLEAN,refresh:!0,ifShow:function(e){return n.default.config("textAutoHeight")&&!e.useCNStyle},write:function(e,t){return t.heightLocked=e}},{tip:"__eF",key:"useCNStyle",ifShow:function(e){return n.default.config("cnTableText")&&e.supportCNStyle},type:o.default.BOOLEAN,refresh:!0,write:e},{tip:"__eG",key:"rotate",type:o.default.NUMBER,min:-360,max:360},{tip:"__er",key:"alpha",type:o.default.NUMBER,min:"0",max:1,fixed:2,step:.1},{tip:"__eH",key:"fontFamily",type:o.default.DROPDOWN,textKey:"text",valueKey:"value",items:l.default.FONT_FAMILIES},{tip:"__eI",key:"fontSize",type:o.default.NUMBER,min:"0",step:1,fixed:2},{tip:"__eJ",key:"autoFontSize",type:o.default.BOOLEAN,write:function(e,t){return t.fontSizeLocked=e}},{tip:"__eK",key:"letterSpacing",type:o.default.NUMBER,min:"0"},{tip:"__eL",key:"lineHeight",type:o.default.LINEHEIGHT,min:"0"},{tip:"__eM",key:"color",type:o.default.DROPDOWN,textKey:"text",valueKey:"value",items:[{text:"__eN",value:"-1"},{text:"__eO",value:1}]},{tip:"__eP",key:"fontWeight",type:o.default.DROPDOWN,items:l.default.FONT_WEIGHTS},{tip:"__eQ",key:"direction",type:o.default.DROPDOWN,items:l.default.DIRECTIONS},{tip:"__eR",key:"fontStyle",type:o.default.FONTSTYLE},{tip:"__eS",key:"align",type:o.default.FONTALIGN},{tip:"__eT",styleVTop:1,key:"text",type:o.default.TEXTAREA,ifShow:function(e){return 0<e.allowEdit}},{tip:"__eU",key:"alias",type:o.default.INPUT,ifShow:function(e){return 0<e.allowEdit},refresh:!0,sync:"tip"},{type:o.default.SPLITER},{tip:"__ev",type:o.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ew",key:"tip",type:o.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2" d="M 15 20 L 45 20 M 17 31 L 30 31 M 15 40 L 38 40" /></svg>'})}),define("element/htext/index",["magix","../../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../util/converter");t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.color,c=e.useCNStyle,u=e.width,f=e.height,h=e.alpha,p=e.x,g=e.y,v=e.rotate,_=e.fontFamily,x=e.letterSpacing,m=e.lineHeight,y=e.direction,b=e.fontWeight,w=e.fontStyle,L=e.flexMap,z=e.align,k=e.zIndex,S=e.autoFontSize,V=e.fontSize,K=e.scale,C=e.vId,T=e.alias,A=e.toHTML,E=e.text,M=e.i18n,e="1"!=d&&!c&&(u<=1||f<=1||0==h);return s+='<div class="xzKVLdvt" style="left:'+n(p)+"px;top:"+n(g)+"px;opacity:"+n(h)+";transform:rotate("+n(v)+"deg);font-family:'"+n(_)+"';font-size:8pt;letter-spacing:"+n(x)+"pt;",""!==m[0]&&(s+="line-height:"+n(m[0])+n(m[1])+";"),s+="width:",s+=c?"92%":n(u)+"px",s+=";height:",s+=c?"92%":n(f)+"px",s+=";direction:"+n(y)+";",s+="1"==d?"color:#fff;background-color:#000;":"color:#000;background-color:#fff;",s+="font-weight:"+n(b)+";",w[0]&&(s+="font-style:italic;"),w[1]&&(s+="text-decoration:underline;"),s+="overflow:hidden;display:flex;align-items:"+n(L[z[1]])+";justify-content:"+n(L[z[0]])+";z-index:"+n(k)+";cursor:text;",e&&(s+="border:dotted 1px #ff000030"),s+='"><div style="-webkit-user-modify:read-write-plaintext-only;outline:none;cursor:text;',S||(s+="font-size:"+n(V*K)+"pt;"),s+='" contenteditable="true" data-role="text-element" mx-focusout="'+t+'\x1e__eZ()" mx-input="'+t+'\x1e__eY()" id="area_'+n(C)+'">',s+=T?r(A(T)):E?r(A(E)):n(M("_f_")),s+="</div></div>"},init:function(e){this.assign(e),this.updater.set({flexMap:{left:"flex-start",center:"center",right:"flex-end",bottom:"flex-end",top:"flex-start",middle:"center"},toHTML:r.default.__eV})},assign:function(e){return this.__eW=e,this.updater.set(e.props),this.updater.set({scale:n.State.get("__j")}),e.forceUpdate},render:function(){var e,t;this.updater.digest(),this.updater.get("editable")&&((t=$("#area_"+this.id)).focus(),(e=document.createRange()).selectNodeContents(t[0]),e.collapse(!1),0==(t=window.getSelection()).anchorOffset&&(t.removeAllRanges(),t.addRange(e)))},"__eY<input>":function(e){e=r.default.__eX(e.eventTarget.innerHTML);this.__eW.props.text=e},"__eZ<focusout>":function(e){var t=this.__eW,i=t.id,t=t.props;t.editable=!1,n.State.fire("__aD"),n.State.fire("__ap",{data:t,eId:i}),n.State.fire("__G")}})}),define("element/hline/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/hline/index"}),s.init.apply(this,arguments)}},{title:"__ex",type:"hline",modifier:{resize:!0,resizeX:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:75.59,height:1.33,type:"solid",locked:!1,tip:l.default("__ex")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__ey",key:"width",type:r.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__ez",key:"height",type:r.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__m,write:o.default.__k},{tip:"__eA",key:"type",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",type:r.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M 10 29 L 50 29" style="stroke:#fff;stroke-width:2"/></svg>'})}),define("element/hline/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");t.default=e.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.x,c=e.y,u=e.width,f=e.type,h=e.height,e=e.zIndex;return s+='<div style="left:'+n(d)+"px;top:"+n(c)+"px;width:"+n(u<1?1:u)+"px;border-top:"+n(f)+" "+n(h<1?1:h)+"px #000;z-index:"+n(e)+'" class="xzKVLdvt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/image/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../i18n/index"),l=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/image/index"}),l.init.apply(this,arguments)}},{title:"__fa",type:"image",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,width:188.98,height:188.98,tip:a.default("__fa"),rotate:0,src:"//img.alicdn.com/tfs/TB1E1OSryAnBKNjSZFvXXaTKXXa-200-200.png",locked:!1,alpha:1,x:e,y:t}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"_dl",key:"src",type:r.default.IMAGE,updateSize:!0},{tip:"__fb",key:"width",max:2800,type:r.default.NUMBER,min:"0",fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__fc",key:"height",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__eG",key:"rotate",type:r.default.NUMBER,min:-360,max:360},{tip:"__er",key:"alpha",type:r.default.NUMBER,min:"0",max:1,fixed:1,step:.1},{tip:"__fd",type:r.default.ORIGINSIZE},{type:r.default.SPLITER},{tip:"__ev",type:r.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ew",key:"tip",type:r.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="32" height="28" x="14" y="16" style="fill:none;stroke-width:2;stroke:#fff" rx="2" ry="2"/><circle cx="22" cy="24" r="4" style="fill:#fff" /><path style="stroke:#fff;stroke-width:2;fill:none" d="M 14 42 L 22 34 L 36 39 L 46 26" /></svg>'})}),define("element/image/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");t.default=e.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.width,c=e.height,u=e.alpha,f=e.src,h=e.x,p=e.y,g=e.rotate,v=e.zIndex,e=d<=1||c<=1||0==u;return s+='<div style="',s+=f?"width:"+n(d)+"px;height:"+n(c)+"px;":"width:100px;height:100px;",s+="left:"+n(h)+"px;top:"+n(p)+"px;transform:rotate("+n(g)+"deg);z-index:"+n(v)+";",e&&(s+="border:dotted 1px #ff000030"),s+='" class="xzKVLdvt"><img style="width:100%;height:100%;opacity:'+n(u)+';" src="',f&&(s+=n(f)),s+='" ',f||(s+=' alt="\u8bf7\u8bbe\u7f6e\u56fe\u7247" '),s+="/></div>"},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/hcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/hcode/index"}),s.init.apply(this,arguments)}},{title:"__em",type:"hcode",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:151.18,alpha:1,rotate:0,height:90.71,locked:!1,text:"",showText:!1,type:"code128",tip:l.default("__em")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__ep",key:"width",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__eq",key:"height",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__er",type:r.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__es",type:r.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__et",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",items:a.default.BARCODES},{tip:"__eu",type:r.default.BOOLEAN,key:"showText"},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",role:"free",type:r.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="4" height="30" x="10" y="15" style="fill:#fff;"/><rect width="2" height="30" x="16" y="15" style="fill:#fff;"/><rect width="2" height="30" x="20" y="15" style="fill:#fff;"/><rect width="8" height="30" x="24" y="15" style="fill:#fff;"/><rect width="2" height="30" x="35" y="15" style="fill:#fff;"/><rect width="3" height="30" x="39" y="15" style="fill:#fff;"/><rect width="2" height="30" x="43" y="15" style="fill:#fff;"/><rect width="4" height="30" x="46" y="15" style="fill:#fff;"/></svg>'})}),define("element/hcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),e="https://img.alicdn.com/tfs/",r={upca:e+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upce:e+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upca_text:e+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",upce_text:e+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",code128:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code93:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",c25inter:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code128_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code93_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",c25inter_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code39:e+"TB1NXIiqkomBKNjSZFqXXXtqVXa-448-100.svg",code39_text:e+"TB1TdocqiMnBKNjSZFoXXbOSFXa-448-122.svg",ean8:e+"TB1mIuAqlnTBKNjSZPfXXbf1XXa-134-100.svg",ean8_text:e+"TB1rOARqiAnBKNjSZFvXXaTKXXa-134-122.svg",ean13:e+"TB1n8RrqCcqBKNjSZFgXXX_kXXa-190-112.svg",ean13_text:e+"TB1stsuqcj_B1NjSZFHXXaDWpXa-214-122.svg",itf14:e+"TB1Y247qdknBKNjSZKPXXX6OFXa-270-100.svg",itf14_text:e+"TB1PDcUqkUmBKNjSZFOXXab2XXa-270-122.svg"};t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.width,c=e.height,u=e.alpha,f=e.x,h=e.y,p=e.zIndex,g=e.codeMap,v=e.type,_=e.showText,e=d<=1||c<=1||0==u;s+='<div style="left:'+n(f)+"px;top:"+n(h)+"px;width:"+n(d)+"px;height:"+n(c)+"px;z-index:"+n(p)+";",e&&(s+="border:dotted 1px #ff000030"),s+='" class="xzKVLdvt">';_=g[v+(_?"_text":"")];return s+=" ",s+=_?'<img style="width:100%;height:100%;opacity:'+n(u)+';" src="'+n(_)+'">':" \u6682\u4e0d\u652f\u6301"+n(v)+"\u7684\u9884\u89c8 ",s+="</div>"},init:function(e){this.assign(e),this.updater.set({codeMap:r})},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/rect/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/rect/index"}),s.init.apply(this,arguments)}},{title:"__fi",type:"rect",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:98.27,borderWidth:1,borderType:"solid",fill:!1,rotate:0,height:98.27,locked:!1,tip:l.default("__fi")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__fj",key:"width",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__fk",key:"height",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__fl",key:"borderWidth",type:r.default.NUMBER,min:"0"},{tip:"__fm",key:"borderType",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{tip:"__fn",key:"fill",type:r.default.BOOLEAN},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",role:"free",type:r.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="42" height="28" x="9" y="16" style="fill:none;stroke-width:2;stroke:#fff"/></svg>'})}),define("element/rect/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix");t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.borderWidth,c=e.fill,u=e.x,f=e.y,h=e.width,p=e.height,g=e.scale,v=e.borderType,_=e.zIndex,e=!(d||c);return s+='<div style="left:'+n(u)+"px;top:"+n(f)+"px;width:"+n(h)+"px;height:"+n(p)+"px;",d&&(h=d*g,s+="border:"+n(v)+" "+n(h<1?1:h)+"px #000;"),c&&(s+="background-color:#000;"),s+="z-index:"+n(_)+";",e&&(s+="border:dotted 1px #ff000030"),s+='" class="xzKVLdvt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),this.updater.set({scale:n.State.get("__j")}),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/qrcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/qrcode/index"}),s.init.apply(this,arguments)}},{title:"__fe",type:"qrcode",modifier:{resize:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:113.39,alpha:1,rotate:0,height:113.39,locked:!1,text:"",schema:2,primary:"",type:"qrcode",tip:l.default("__fe")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__ff",key:"width",type:r.default.NUMBER,min:"0",max:2800,fixed:2,refresh:!0,sync:"height",read:o.default.__i,write:o.default.__h},{tip:"__fg",key:"height",type:r.default.NUMBER,min:"0",max:2800,sync:"width",fixed:2,refresh:!0,read:o.default.__i,write:o.default.__h},{tip:"__er",type:r.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__es",type:r.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__et",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",refresh:!0,items:a.default.QRCODES},{tip:"__fh",type:r.default.DROPDOWN,ifShow:function(e){return"maxicode"==e.type},key:"schema",items:a.default.QRCODES_MAXICODE_SCHEMA},{tip:"primary",type:r.default.INPUT,key:"primary",ifShow:function(e){return"maxicode"==e.type}},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",role:"free",type:r.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="16" height="16" x="10" y="10" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="16" height="16" x="34" y="10" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="16" height="16" x="10" y="34" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="6" height="6" x="15" y="15" style="fill:#fff;"/><rect width="6" height="6" x="39" y="15" style="fill:#fff;"/><rect width="6" height="6" x="15" y="39" style="fill:#fff;"/><rect width="4" height="4" x="34" y="34" style="fill:#fff;"/><rect width="4" height="4" x="46" y="34" style="fill:#fff;"/><rect width="4" height="8" x="38" y="38" style="fill:#fff;"/><rect width="4" height="4" x="34" y="46" style="fill:#fff;"/><rect width="5" height="4" x="43" y="46" style="fill:#fff;"/><rect width="4" height="8" x="46" y="42" style="fill:#fff;"/></svg>'})}),define("element/qrcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");t.default=e.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.width,c=e.height,u=e.alpha,f=e.x,h=e.y,p=e.zIndex,e=d<=1||c<=1||0==u;return s+='<div style="left:'+n(f)+"px;top:"+n(h)+"px;width:"+n(d)+"px;height:"+n(c)+"px;z-index:"+n(p)+";",e&&(s+="border:dotted 1px #ff000030"),s+='" class="xzKVLdvt"><img style="width:100%;height:100%;opacity:'+n(u)+';" src="https://img.alicdn.com/tfs/TB1NQQvqlsmBKNjSZFFXXcT9VXa-250-250.svg"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/table/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=e("../../util/table"),d=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/table/index"}),d.init.apply(this,arguments)}},{title:"__fo",type:"table",modifier:{},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:3*a.default.TABLE_CELLS_WIDTH,height:2*a.default.TABLE_ROWS_HEIGHT,rowIndex:-1,colIndex:-1,hideBorder:!1,lockSize:!1,rows:[{tag:"tr",cells:[{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH}]},{tag:"tr",cells:[{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",hasBorder:!0,height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH}]}],locked:!1,tip:l.default("__fo")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__fp",key:"width",type:r.default.LABEL,read:o.default.__i},{tip:"__fq",key:"height",type:r.default.LABEL,read:o.default.__i},{tip:"__fr",key:"lockSize",type:r.default.BOOLEAN,write:function(e,t){return t.lockSize=e,s.default.__l(t),e}},{tip:"__fs",key:"hideBorder",type:r.default.BOOLEAN,refresh:!0,write:function(e,t){for(var i=0,n=t.rows;i<n.length;i++){var r=n[i];if("tr"==r.tag)for(var o=0,a=r.cells;o<a.length;o++){var l=a[o];"td"==l.tag&&(l.hasBorder=!e)}}return e}},{tip:"__ft",key:"splitable",type:r.default.BOOLEAN},{tip:"__fu",type:r.default.CELLCOLSHARE},{tip:"__fv",type:r.default.CELLROWSHARE},{type:r.default.SPLITER,ifShow:function(e){return-1<e.rowIndex}},{tip:"__fw",type:r.default.CELLFOCUS,ifShow:function(e){return-1<e.rowIndex}},{tip:"__fx",styleVTop:1,type:r.default.CELLOPERATE,ifShow:function(e){return-1<e.rowIndex}},{tip:"__fy",styleVTop:1,type:r.default.CELLSIZE,ifShow:function(e){return-1<e.rowIndex}},{tip:"__fz",type:r.default.CELLDROPDOWN,ifShow:function(e){return-1<e.rowIndex},items:[{text:"__fA",value:!0},{text:"__fB",value:!1}]},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",role:"free",type:r.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2;fill:none" d="M 10 14 L 50 14 L 50 46 L 10 46 L 10 14" /><path style="stroke:#fff;stroke-width:1;fill:none" d="M 10 24 L 50 24 M 10 34 L 50 34 M 23 14 L 23 46 M 36 14 L 36 46" /></svg>'})}),define("element/table/index",["magix","$","../../editor/core/workaround","../../gallery/mx-dragdrop/index","../../util/table","../../cainiao/const","../../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var g=e("magix"),v=e("$"),_=e("../../editor/core/workaround"),n=e("../../gallery/mx-dragdrop/index"),x=e("../../util/table"),m=e("../../cainiao/const"),p=e("../../util/converter"),y={8:"rt",9:"rb",10:"r",11:"cb",12:"ca",13:"c"};g.default.applyStyle("xzKVLdvl",".xzKVLdvbJ{border-collapse:collapse;border:1pt dotted #ececec;border-spacing:0}.xzKVLdvbK{border-collapse:collapse;border:1pt dotted #ececec;position:relative;padding:0}.xzKVLdvbL{overflow:hidden;position:relative;width:100%;height:100%}.xzKVLdvbM,.xzKVLdvbN{border:1px solid #f99;left:-1px;top:-1px;right:-1px;bottom:-1px;position:absolute;pointer-events:none}.xzKVLdvbO{background:#f99;position:absolute;z-index:3;pointer-events:all}.xzKVLdvbP{cursor:ns-resize}.xzKVLdvbQ{cursor:ew-resize}.xzKVLdvbR{left:-20px;top:20px;color:#c3c3c3;cursor:pointer;transition:color .4s}.xzKVLdvbR:hover{color:#000}.xzKVLdvag .xzKVLdvbR{visibility:hidden}.xzKVLdvbS{border-style:solid;border-color:#000}.xzKVLdvbM{box-shadow:inset 2px 2px 4px rgba(0,0,0,.2)}.xzKVLdvbT{border-style:dashed}"),t.default=g.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.x,c=e.y,u=e.width,f=e.height,h=e.zIndex,p=e.i18n,g=e.rows,v=e.vId,_=e.rowIndex,x=e.colIndex,m=e.size;s+='<div mxv style="left:'+n(d)+"px;top:"+n(c)+"px;width:"+n(u)+"px;height:"+n(f)+"px;z-index:"+n(h)+'" class="xzKVLdvt"><div class="xzKVLdvt xzKVLdvbR" mx-mousedown="'+t+'\x1e__fI()" mx-click="'+t+'\x1e__fJ()" title="'+n(p("__fJ"))+'"><i mxs="xzKVLdvr:_" class="xzKVLdvN">&#xe600;</i></div><table mxv mxa="xzKVLdvr:_" class="xzKVLdvbJ">';for(var y=0,b=g.length;y<b;y++){var w=g[y];if(s+=" ","tr"==w.tag){s+="<tr mxv>";for(var L=0,z=w.cells,k=z.length;L<k;L++){var S,V,K=z[L];if(s+=" ","td"==K.tag){if(s+='<td mxv class="xzKVLdvbK',K.hasBorder&&(s+=" xzKVLdvbS"),s+='" style="width:'+n(K.width)+"px;height:"+n(K.height)+'px" mx-mousedown="'+t+"\x1e__fE({row:"+n(y)+",col:"+n(L)+'})" mx-contextmenu="'+t+"\x1e__fH({row:"+n(y)+",col:"+n(L)+'})" id="'+n(v)+"_c_"+n(y)+"_"+n(L)+'" ',K.rowspan&&1<K.rowspan&&(s+=' rowspan="'+n(K.rowspan)+'" '),K.colspan&&1<K.colspan&&(s+=' colspan="'+n(K.colspan)+'" '),s+='><div class="xzKVLdvbM xzKVLdvv" id="'+n(v)+"_dashed_"+n(y)+"_"+n(L)+'"></div><div mxv mxa="xzKVLdvr:a" class="xzKVLdvbL" data-role="table-cell">',K.children){s+=" ";for(var C=0,T=K.children,A=T.length;C<A;C++){var E=T[C];s+=" ";var M=E.ctor,N=E.props,I=E.id,E=E.type;s+=" ","#script"!=E&&(s+='<div mxv="rows" id="'+n(I)+'" mx-view="element/'+n(M.type)+"/designer?type="+o(E)+"&ctor="+a(i,M)+"&id="+o(I)+"&props="+a(i,N)+'&cell=true" mx-mousedown="'+t+"\x1e__fD({id:'"+n(l(I))+"',ctor:'"+a(i,M)+"',props:'"+a(i,N)+"',type:'"+n(l(E))+"'})\"></div>"),s+=" "}s+=" "}s+="</div>",_==y&&x==L&&(s+='<div class="xzKVLdvbN',K.hasBorder||(s+=" xzKVLdvbT"),s+='">',S=Math.max(0,Math.min(8*m,K.width-2*m)),s+=" ",V=Math.max(0,Math.min(8*m,K.height-2*m)),s+=" ",K.top&&(s+='<div style="width:'+n(S)+"px;height:"+n(m)+"px;top:"+n(1-m)+"px;left:"+n((K.width-S)/2|0)+'px;" class="xzKVLdvbO xzKVLdvbP" mx-mousedown="'+t+"\x1e__aE({type:'row',ri:"+n(K.top.row)+",ci:"+n(K.top.col)+'})"></div>'),s+=" ",K.left&&(s+='<div style="width:'+n(m)+"px;height:"+n(V)+"px;left:-"+n(m-1)+"px;top:"+n((K.height-V)/2|0)+'px" class="xzKVLdvbO xzKVLdvbQ" mx-mousedown="'+t+"\x1e__aE({type:'col',ri:"+n(K.left.row)+",ci:"+n(K.left.col)+'})"></div>'),s+=" ",K.hasBottom&&(s+='<div style="width:'+n(S)+"px;height:"+n(m)+"px;left:"+n((K.width-S)/2|0)+"px;bottom:-"+n(m-1)+'px;" class="xzKVLdvbO xzKVLdvbP" mx-mousedown="'+t+"\x1e__aE({type:'row',cell:'"+a(i,K)+"'})\"></div>"),s+=" ",K.hasRight&&(s+='<div style="width:'+n(m)+"px;height:"+n(V)+"px;right:-"+n(m-1)+"px;top:"+n((K.height-V)/2|0)+'px" class="xzKVLdvbO xzKVLdvbQ" mx-mousedown="'+t+"\x1e__aE({type:'col',cell:'"+a(i,K)+"'})\"></div>"),s+="</div>"),s+="</td>"}s+=" "}s+="</tr>"}s+=" "}return s+="</table></div>"},mixins:[n],init:function(i){this.assign(i),this.__t=v.default("#"+this.id);function e(e){var t=i.props;x.default.__fC(t,e.dir)&&(g.State.fire("__ap",{data:t,eId:i.id}),g.State.fire("__aD"))}g.State.on("__bW",e),this.on("destroy",function(){g.State.off("__bW",e)})},__aw:function(){var e=this,t=this.__eW;t.props.rowIndex=-1,t.props.colIndex=-1,this.assign(t),setTimeout(this.wrapAsync(function(){e.render()}),0)},assign:function(e){var t={};return(this.__eW=e).onlyMove&&(t.rows=1),this.updater.set(e.props,t),this.updater.set({size:m.default.RESIZER_SIZE,scale:g.State.get("__j")}),e.forceUpdate},render:function(){this.updater.digest()},"__fD<mousedown>":function(e){"element_table"!=e.from&&(e.from="element_table",_.StageElements.__bT(e,this))},"__fE<mousedown>":function(e){var n,r,o,a,l,s,d,c,u,f,t,h;"element_table"!=e.from&&(e.from="element_table",t=e.params,n=t.row,r=t.col,(a=(o=this).__eW).props.rowIndex=n,a.props.colIndex=r,o.assign(a),o.render(),g.State.fire("__aD"),_.StageSelectElements.__bz(a),l=g.Vframe.get("m_app_stage"),s=p.default.__bM({x:e.pageX,y:e.pageY}),d=v.default(e.eventTarget),c=p.default.__aF(d,{x:e.pageX,y:e.pageY,find:0}),f=u=!1,(t=a.props.rows[n].cells[r]).children||(t.children=[]),h=_.StageElements.__bN(t),o.dragdrop(e.eventTarget,o.__bj(function(e){var t,i;f||(u=!0,i=p.default.__bM({x:e.pageX,y:e.pageY}),l.invoke("__aZ",[s,i]),t=p.default.__aF(d,{x:e.pageX,y:e.pageY,find:0}),e=Math.abs(s.x-i.x),i=Math.abs(s.y-i.y),e={x:Math.min(c.x,t.x),y:Math.min(c.y,t.y),width:e,height:i},i=_.StageElements.__bP(h,e,{}),(e=JSON.stringify(i,["id"]))!=o.__bQ&&(o.__bQ=e,i.length?_.StageSelectElements.__bR(i):(a.props.rowIndex=n,a.props.colIndex=r,o.assign(a),setTimeout(o.wrapAsync(function(){o.render()}),0),_.StageSelectElements.__bz(a))))},50),function(){u&&(delete o.__bQ,f=!0,l.invoke("__b_"))}))},"__aE<mousedown>":function(e){var o,a,t,l,s,i,n,d,c,u,f,h,p;"element_table"!=e.from&&(e.from="element_table",i=this.__eW,o=i.props,a=i.id,o.locked||(t=o.rows,n=e.params,l=n.cell,s=n.type,i=n.ri,n=n.ci,g.State.fire("__ay",{cursor:"col"==s?"ew-resize":"ns-resize"}),l=l||x.default.__fF(t,i,n),d=e.pageX,c=e.pageY,u=l.height,f=l.width,h=!1,l.id||(l.id=g.default.guid("td_")),g.State.fire("__ax",{locked:1}),p={},o.lockSize&&x.default.__l(o,p),this.dragdrop(e.eventTarget,function(e){var t,i=e.pageX-d,n=e.pageY-c,r=0;o.lockSize&&(t=l.rowspan||1,(r=(e=p.rowHeights[l.row+t])-n)<m.default.TABLE_MIN_SIZE?(n=e-m.default.TABLE_MIN_SIZE,r=m.default.TABLE_MIN_SIZE):r>e+u-m.default.TABLE_MIN_SIZE&&(r=e+u-m.default.TABLE_MIN_SIZE),t=l.colspan||1,(t=(e=p.colWidths[l.col+t])-i)<m.default.TABLE_MIN_SIZE?(i=e-m.default.TABLE_MIN_SIZE,t=m.default.TABLE_MIN_SIZE):t>e+f-m.default.TABLE_MIN_SIZE&&(t=e+f-m.default.TABLE_MIN_SIZE));n=Math.max(u+n,m.default.TABLE_MIN_SIZE),i=Math.max(m.default.TABLE_MIN_SIZE,f+i);"row"==s?n!=l.height&&(h=!0,l.height=n):"col"==s&&i!=l.width&&(h=!0,l.width=i),x.default.__l(o,{col:l,changeType:s,nextRow:r,nextCol:t}),g.State.fire("__ap",{data:o,eId:a}),g.State.fire("__aD")},function(){h&&g.State.fire("__G"),g.State.fire("__ax"),g.State.fire("__ay")})))},"__fH<contextmenu>":function(e){if("element_table"!=e.from){e.from="element_table",e.preventDefault();var i=_.StageSelectElements.__bL(),n=this,t=n.__eW,r=t.id,o=t.props,a=e.params,t=a.row,a=a.col,t=o.rows[t],l=m.default.TABLE_ROWS_HEIGHT,s=m.default.TABLE_CELLS_WIDTH,d=[];t&&t.cells[a]&&(p=t.cells[a],l=p.height,s=p.width,p.children?d=p.children:p.children=d=[]);for(var c=[],u=0,f=d;u<f.length;u++){var h=f[u];"#script"==h.type||h.props.useCNStyle||c.push(h)}var p=v.default(e.eventTarget).offset();n.__ci={x:e.pageX-p.left,y:e.pageY-p.top},_.StageElements.__cj(n,e,r,c,function(e){var t;0==e.id?c.length&&_.StageSelectElements.__bR(c):1==e.id?_.Clipboard.__c_():14==e.id?_.Clipboard.__cf():2==e.id?(_.Clipboard.__cd({coll:d,collType:"td",width:s,height:l},n.__ci),g.State.fire("__G")):7==e.id?(t=_.StageElements.__bY(!0),n.updater.digest({elements:t}),g.State.fire("__G")):3<=e.id&&e.id<=6?(_.StageElements.__ck(e.id,i[0],c),n.updater.digest(o),g.State.fire("__G")):8<=e.id&&e.id<=13&&(x.default.__fG(o,y[e.id]),g.State.fire("__aD"),g.State.fire("__ap",{data:o,eId:r}),g.State.fire("__G"))})}},"__fI<mousedown>":function(e){e.from="element_table"},"__fJ<click>":function(){var e=this.__eW.id;_.StageElements.__bd(e,!1),g.State.fire("__bb"),g.State.fire("__G")}})}),define("element/vcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/vcode/index"}),s.init.apply(this,arguments)}},{title:"__fK",type:"vcode",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:151.18,alpha:1,height:90.71,locked:!1,text:"",rotate:90,showText:!1,type:"code128",tip:l.default("__fK")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__ep",key:"width",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__eq",key:"height",type:r.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__er",type:r.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__es",type:r.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__et",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",items:a.default.BARCODES},{tip:"__eu",type:r.default.BOOLEAN,key:"showText"},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",role:"free",type:r.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="30" height="4" x="15" y="10" style="fill:#fff;"/><rect width="30" height="2" x="15" y="16" style="fill:#fff;"/><rect width="30" height="2" x="15" y="20" style="fill:#fff;"/><rect width="30" height="8" x="15" y="24" style="fill:#fff;"/><rect width="30" height="2" x="15" y="35" style="fill:#fff;"/><rect width="30" height="3" x="15" y="39" style="fill:#fff;"/><rect width="30" height="2" x="15" y="43" style="fill:#fff;"/><rect width="30" height="4" x="15" y="46" style="fill:#fff;"/></svg>'})}),define("element/vcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),e="https://img.alicdn.com/tfs/",r={upca:e+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upce:e+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upca_text:e+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",upce_text:e+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",code128:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code93:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",c25inter:e+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code128_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code93_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",c25inter_text:e+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code39:e+"TB1NXIiqkomBKNjSZFqXXXtqVXa-448-100.svg",code39_text:e+"TB1TdocqiMnBKNjSZFoXXbOSFXa-448-122.svg",ean8:e+"TB1mIuAqlnTBKNjSZPfXXbf1XXa-134-100.svg",ean8_text:e+"TB1rOARqiAnBKNjSZFvXXaTKXXa-134-122.svg",ean13:e+"TB1n8RrqCcqBKNjSZFgXXX_kXXa-190-112.svg",ean13_text:e+"TB1stsuqcj_B1NjSZFHXXaDWpXa-214-122.svg",itf14:e+"TB1Y247qdknBKNjSZKPXXX6OFXa-270-100.svg",itf14_text:e+"TB1PDcUqkUmBKNjSZFOXXab2XXa-270-122.svg"};t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.width,c=e.height,u=e.alpha,f=e.x,h=e.y,p=e.rotate,g=e.zIndex,v=e.codeMap,_=e.type,x=e.showText,e=d<=1||c<=1||0==u;s+='<div style="left:'+n(f)+"px;top:"+n(h)+"px;width:"+n(d)+"px;height:"+n(c)+"px;transform:rotate("+n(p)+"deg);z-index:"+n(g)+";",e&&(s+="border:dotted 1px #ff000030"),s+='" class="xzKVLdvt">';x=v[_+(x?"_text":"")];return s+=" ",s+=x?'<img style="width:100%;height:100%;opacity:'+n(u)+';" src="'+n(x)+'">':" \u6682\u4e0d\u652f\u6301"+n(_)+"\u7684\u9884\u89c8 ",s+="</div>"},init:function(e){this.assign(e),this.updater.set({codeMap:r})},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/vline/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("../../editor/core/designer"),r=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=n.default.prototype;t.default=n.default.extend({init:function(){this.updater.set({elementPath:"element/vline/index"}),s.init.apply(this,arguments)}},{title:"__fL",type:"vline",modifier:{resize:!0,resizeY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:1.33,type:"solid",height:75.59,locked:!1,tip:l.default("__fL")}},props:[{tip:"__en",key:"x",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__eo",key:"y",type:r.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__h},{tip:"__ey",key:"height",type:r.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__i,write:o.default.__h},{tip:"__ez",key:"width",type:r.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__m,write:o.default.__k},{tip:"__eA",key:"type",type:r.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{type:r.default.SPLITER},{tip:"__ev",key:"locked",type:r.default.BOOLEAN,role:"free"},{tip:"__ew",key:"tip",type:r.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M 29 10 L 29 50" style="stroke:#fff;stroke-width:2"/></svg>'})}),define("element/vline/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");t.default=e.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.x,c=e.y,u=e.height,f=e.type,h=e.width,e=e.zIndex;return s+='<div style="left:'+n(d)+"px;top:"+n(c)+"px;height:"+n(u<1?1:u)+"px;border-left:"+n(f)+" "+n(h<1?1:h)+"px #000;z-index:"+n(e)+'" class="xzKVLdvt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/vtext/designer",["magix","../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../editor/core/designer"),o=e("../../editor/const/props-desc"),a=e("../../util/converter"),l=e("../../cainiao/const"),s=e("../../i18n/index"),d=r.default.prototype,e=function(e,t){return e?(t._x=t.x,t._y=t.y,t._width=t.width,t._height=t.height,t.x=.76,t.y=.76,t.width=-3.77,t.height=-3.77):(t.x=t._x,t.y=t._y,t.width=t._width,t.height=t._height),t.xLocked=e,t.yLocked=e,t.widthLocked=e,t.heightLocked=e,t.zIndex=0,e};t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/vtext/index"}),d.init.apply(this,arguments)}},{title:"__fM",type:"vtext",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},writeAdapter:e,getProps:function(e,t){return{x:e,y:t,zIndex:0,width:22.68,height:128.5,locked:!1,rotate:0,alpha:1,supportCNStyle:!1,useCNStyle:!1,autoFontSize:!1,fontFamily:"SimHei",fontSize:8,lineHeight:["","mm"],fontStyle:[],align:["left","top"],letterSpacing:0,fontWeight:"normal",text:"",alias:"",direction:"ltr",color:"-1",tip:s.default("__fM"),allowEdit:1}},props:[{tip:"__en",key:"x",type:o.default.NUMBER,fixed:2,read:a.default.__i,write:a.default.__h},{tip:"__eo",key:"y",type:o.default.NUMBER,fixed:2,read:a.default.__i,write:a.default.__h},{tip:"__eC",key:"width",type:o.default.NUMBER,min:"0",fixed:2,max:2800,read:a.default.__i,write:a.default.__h},{tip:"__eD",key:"height",type:o.default.NUMBER,min:"0",fixed:2,max:2800,read:a.default.__i,write:a.default.__h},{tip:"__eF",key:"useCNStyle",ifShow:function(e){return n.default.config("cnTableText")&&e.supportCNStyle},type:o.default.BOOLEAN,refresh:!0,write:e},{tip:"__eG",key:"rotate",type:o.default.NUMBER,min:-360,max:360},{tip:"__er",key:"alpha",type:o.default.NUMBER,min:"0",max:1,fixed:2,step:.1},{tip:"__eH",key:"fontFamily",type:o.default.DROPDOWN,textKey:"text",valueKey:"value",items:l.default.FONT_FAMILIES},{tip:"__eI",key:"fontSize",type:o.default.NUMBER,min:"0",step:1,fixed:2},{tip:"__eJ",key:"autoFontSize",type:o.default.BOOLEAN,write:function(e,t){return t.fontSizeLocked=e}},{tip:"__eK",key:"letterSpacing",type:o.default.NUMBER,min:"0"},{tip:"__eL",key:"lineHeight",type:o.default.LINEHEIGHT,min:"0"},{tip:"__eM",key:"color",type:o.default.DROPDOWN,textKey:"text",valueKey:"value",items:[{text:"__eN",value:"-1"},{text:"__eO",value:1}]},{tip:"__eP",key:"fontWeight",type:o.default.DROPDOWN,items:l.default.FONT_WEIGHTS},{tip:"__eQ",key:"direction",type:o.default.DROPDOWN,items:l.default.DIRECTIONS},{tip:"__eR",key:"fontStyle",type:o.default.FONTSTYLE},{tip:"__eS",key:"align",type:o.default.FONTALIGN},{tip:"__eT",key:"text",type:o.default.TEXTAREA,styleVTop:1,ifShow:function(e){return 0<e.allowEdit}},{tip:"__eU",key:"alias",type:o.default.INPUT,ifShow:function(e){return 0<e.allowEdit},refresh:!0,sync:"tip"},{type:o.default.SPLITER},{tip:"__ev",type:o.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ew",key:"tip",type:o.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2" d="M 20 15 L 20 45 M 31 17 L 31 30 M 40 15 L 40 38" /></svg>'})}),define("element/vtext/index",["magix","../../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../util/converter");t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.color,c=e.useCNStyle,u=e.width,f=e.height,h=e.alpha,p=e.x,g=e.y,v=e.rotate,_=e.fontFamily,x=e.letterSpacing,m=e.lineHeight,y=e.direction,b=e.fontWeight,w=e.fontStyle,L=e.flexMap,z=e.align,k=e.zIndex,S=e.autoFontSize,V=e.fontSize,K=e.scale,C=e.vId,T=e.alias,A=e.toHTML,E=e.text,M=e.i18n,e="1"!=d&&!c&&(u<=1||f<=1||0==h);return s+='<div class="xzKVLdvt" style="left:'+n(p)+"px;top:"+n(g)+"px;opacity:"+n(h)+";transform:rotate("+n(v)+"deg);font-family:'"+n(_)+"';font-size:8pt;letter-spacing:"+n(x)+"pt;",""!==m[0]&&(s+="line-height:"+n(m[0])+n(m[1])+";"),s+="width:",s+=c?"92%":n(u)+"px",s+=";height:",s+=c?"92%":n(f)+"px",s+=";direction:"+n(y)+";overflow:hidden;writing-mode:tb-rl;",s+="1"==d?"color:#fff;background-color:#000;":"color:#000;background-color:#fff;",s+="font-weight:"+n(b)+";",w[0]&&(s+="font-style:italic;"),w[1]&&(s+="text-decoration:underline;"),s+="display:flex;align-items:"+n(L[z[1]])+";justify-content:"+n(L[z[0]])+";z-index:"+n(k)+";cursor:text;",e&&(s+="border:dotted 1px #ff000030"),s+='"><div style="-webkit-user-modify:read-write-plaintext-only;outline:none;cursor:text;',S||(s+="font-size:"+n(V*K)+"pt;"),s+='" contenteditable="true" data-role="text-element" mx-focusout="'+t+'\x1e__eZ()" mx-input="'+t+'\x1e__eY()" id="area_'+n(C)+'">',s+=T?r(A(T)):E?r(A(E)):n(M("_f_")),s+="</div></div>"},init:function(e){this.assign(e),this.updater.set({flexMap:{left:"flex-start",center:"center",right:"flex-end",bottom:"flex-end",top:"flex-start",middle:"center"},originMap:{"left,top":"top right","left,middle":"top center","left,bottom":"top left","center,top":"center right","center,middle":"center center","center,bottom":"center left","right,top":"bottom right","right,middle":"bottom center","right,bottom":"bottom left"},toHTML:r.default.__eV})},assign:function(e){return this.__eW=e,this.updater.set(e.props),this.updater.set({scale:n.State.get("__j")}),e.forceUpdate},render:function(){var e,t;this.updater.digest(),this.updater.get("editable")&&((t=$("#area_"+this.id)).focus(),(e=document.createRange()).selectNodeContents(t[0]),e.collapse(!1),0==(t=window.getSelection()).anchorOffset&&(t.removeAllRanges(),t.addRange(e)))},"__eY<input>":function(e){e=r.default.__eX(e.eventTarget.innerHTML);this.__eW.props.text=e},"__eZ<focusout>":function(e){var t=this.__eW,i=t.id,t=t.props;t.editable=!1,n.State.fire("__aD"),n.State.fire("__ap",{data:t,eId:i}),n.State.fire("__G")}})}),define("editor/index",["magix","./const/click-desc","../gallery/mx-dialog/index","../cainiao/const","./core/history","./core/store","../element/index","../i18n/index","./core/cursor","./core/mask","../cainiao/serializer","../service/index","../gallery/mx-runner/index","./core/draft","./core/toolbox","./core/toolbar","./core/axis","./core/stage","./core/property"],function(e,t,i){e("./core/draft"),e("./core/toolbox"),e("./core/toolbar"),e("./core/axis"),e("./core/stage"),e("./core/property"),t.__esModule=!0;var h=e("magix"),o=e("./const/click-desc"),n=e("../gallery/mx-dialog/index"),r=e("../cainiao/const"),l=e("./core/history"),s=e("./core/store"),p=e("../element/index"),d=e("../i18n/index"),a=e("./core/cursor"),c=e("./core/mask"),u=e("../cainiao/serializer"),f=e("../service/index"),g=e("../gallery/mx-runner/index"),v=[],_=1,x="can not load html2canvas library",m=h.default.mix;h.default.applyStyle("xzKVLdvh",".xzKVLdvaM{height:40px;line-height:40px;font-size:16px;padding:0 10px;background:#06f;color:#fff;position:relative;z-index:3000}.xzKVLdvaN{height:calc(100% - 40px)}.xzKVLdvaO{width:calc(100% - 475px);height:calc(100% - 45px)}.xzKVLdvaP{transition:width .15s}.xzKVLdvaQ{width:calc(100% - 265px)}.xzKVLdvaR{width:calc(100% - 21px);overflow:scroll;height:100%;background-color:#edeef3;transition:all .3s}.xzKVLdvaS{box-shadow:inset 1px 1px 6px 2px #dadada}.xzKVLdvaR::-webkit-scrollbar{width:10px;height:10px}.xzKVLdvaR::-webkit-scrollbar-thumb{background-color:#c2c0c0;min-height:25px;min-width:25px;border:1px solid #e0e0e0}.xzKVLdvaR::-webkit-scrollbar-track{background-color:#f7f7f7;border:1px solid #efefef}.xzKVLdvaT{line-height:25px;position:relative;z-index:3000}.xzKVLdvaU{outline:none;color:hsla(0,0%,100%,.6470588235294118);border:1px solid hsla(0,0%,100%,.6470588235294118);background:transparent;border-radius:4px;height:20px;line-height:16px;font-size:14px;padding:2px 8px;width:60px}.xzKVLdvaU:hover{color:#fff;border:1px solid #fff}.xzKVLdvaV{width:235px}.xzKVLdvaW{font-size:14px;line-height:45px;height:40px}.xzKVLdvaX{margin-left:10px;color:hsla(0,0%,100%,.6470588235294118);font-size:10px}"),h.default.View.merge(n,{__bj:function(n,r){var o=this;r=r||150;var a,l=Date.now();return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now();clearTimeout(a),r<i-l?(l=i,n.apply(o,e)):a=setTimeout(function(){n.apply(o,e)},r-(i-l))}},__dL:function(e,t,i,n){e=Math.max(i-(t-e),16);setTimeout(n,e)}});function y(e){var t=h.State.get("page"),i=h.State.get("__aN"),n=h.State.get("__av"),r=h.State.get("__o"),o=h.State.get("__p"),a=p.default.byJSON(e.elements),l=a.elements,s=a.map;e.page&&m(t,e.page),i.length=0,i.push.apply(i,l),n.length=0;var d={};if(e.select)for(var c=0,u=e.select;c<u.length;c++){var f=s[u[c].id];f&&(d[f.id]=1,n.push(f))}r.length=0,e.xLines&&r.push.apply(r,e.xLines),o.length=0,e.yLines&&o.push.apply(o,e.yLines),h.State.set({__j:e.scale||1,__au:d})}var b={id:1,colIndex:1,rowIndex:1,locked:1,lockSize:1,top:1,left:1,hasLeft:1,hasTop:1,hasBottom:1,hasRight:1};t.default=h.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.i18n,c=e.name,u=e.lang,f=e.vId,h=e.anim,e=e.collapse;return s+='<div mxa="xzKVLdvk:_" class="xzKVLdvaM"><div mxa="xzKVLdvk:a" class="xzKVLdvp xzKVLdvaV"><i mxs="xzKVLdvk:_" class="xzKVLdvN xzKVLdvd">&#xe63c;</i>'+n(d("_ek"))+'&trade;</div><div mxa="xzKVLdvk:b" class="xzKVLdvp xzKVLdvaW">'+n(c)+'<span mx-view="editor/core/draft?lang='+o(u)+'" id="draft_'+n(f)+'" class="xzKVLdvaX"></span></div><div mxa="xzKVLdvk:c" class="xzKVLdvq xzKVLdve" id="header_btns"><button mxa="xzKVLdvk:d" class="xzKVLdvaU xzKVLdve" mx-click="'+t+'\x1e__aU()">'+n(d("_el"))+'</button><button mxa="xzKVLdvk:e" class="xzKVLdvaU" mx-click="'+t+'\x1e__ej()">',s+="en-us"==u?"\u4e2d\u6587":"EN",s+='</button></div></div><div mxa="xzKVLdvk:f" class="xzKVLdvaN"><div mx-view="editor/core/toolbox" id="toolbox_'+n(f)+'" class="xzKVLdvn xzKVLdvp xzKVLdvx"></div><div class="xzKVLdvaO xzKVLdvp',h&&(s+=" xzKVLdvaP"),e&&(s+=" xzKVLdvaQ"),s+='" id="canvas_'+n(f)+'"><div mxs="xzKVLdvk:a" mx-view="editor/core/toolbar" class="xzKVLdvaT xzKVLdvx"></div><div mx-view="editor/core/axis?cnt='+o(f)+'_stage" class="xzKVLdvu xzKVLdvx"></div><div mx-view="editor/core/stage" id="'+n(f)+'_stage" class="xzKVLdvaR xzKVLdvx xzKVLdvaS"></div></div><div mx-view="editor/core/property" id="property_'+n(f)+'" class="xzKVLdvn xzKVLdvq"></div></div>'},mixins:[f.default],init:function(){var t=this;window.onbeforeunload=function(e){if(t.__dM())return d.default("__dN")},h.State.on("__aO",function(e){y(e.json)}),h.State.on("__ay",function(e){e.cursor?a.default.__an(e.cursor):a.default.__ao()}),h.State.on("__r",function(){t.__dO(!0)}),this.__dO()},__dT:function(){var t,i=this;!this.__dP&&1e3<r.default.AUTO_SAVE&&(this.__dP=Date.now(),t=h.Vframe.get("draft_"+this.id),this.__dQ=function(){var e=Date.now()-i.__dP;(e=r.default.AUTO_SAVE-e)<=0?i.__dR(!0):t.invoke("__aq",[{after:Math.round(e/1e3)}])},g.__dS(1e3,this.__dQ))},__dW:function(){clearInterval(this.__dU),g.__dV(this.__dQ),delete this.__dP},__dO:function(e){var t;this.__dX=h.default.guid("ss"),e&&((e=this.__dM())?(this.__dP||(t=h.Vframe.get("draft_"+this.id))&&t.invoke("__aq",[{saving:0,draft:e,after:Math.round(r.default.AUTO_SAVE/1e3)}]),s.default.__aU(),this.__dT()):(s.default.__aQ(),this.__dW(),(t=h.Vframe.get("draft_"+this.id))&&t.invoke("__aq",[{saving:0,draft:0}])))},__dY:function(n){var r=this,o=Date.now();setTimeout(r.wrapAsync(function(){new Promise(function(e,t){var r;2&_?window.html2canvas?e():t(x):4&_?v.push([e,t]):(_|=4,v.push([e,t]),(r=document.createElement("script")).src="//html2canvas.hertzen.com/dist/html2canvas.min.js",r.onload=r.onerror=function(){document.head.removeChild(r),_|=2;for(var e=0,t=v;e<t.length;e++){var i=t[e],n=i[0],i=i[1];window.html2canvas?n():i(x)}v.length=0},document.head.appendChild(r))}).then(function(){html2canvas(h.default.node("stage_stage")).then(function(e){e=function(e){for(var t=e.split(","),e=t[0].match(/:(.*?);/)[1],i=atob(t[1]),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:e})}(e.toDataURL("image/png"));r.request().all({name:"__dY",files:e,params:{temp_id:h.default.config("tempId"),biz_id:h.default.config("bizId")}},function(e,t){var i=Date.now();r.__dL(o,i,300,function(){e?(r.alert(e.msg),n(e)):n(null,t.get("data.url",""))})})})}).catch(function(e){r.alert(e)})}),50)},__ea:function(n,e,r){var o=this,t={page:h.State.get("page"),elements:h.State.get("__aN")},a=this.__dX,t=u.default.encode(t),l=Date.now();this.save({name:"__dR",params:{temp_id:h.default.config("tempId"),content:t,thumb_url:e}},function(e,t){var i=Date.now();o.__dL(l,i,300,function(){a==o.__dX&&(o.__dW(),r(e),e?n||o.alert(d.default("_aM")+e.msg):(s.default.__aQ(),o.__dZ=o.__e_()))})})},__dR:function(i){var n=this;h.State.fire("__bA",{zone:o.default.OTHER}),this.__dP=1;var r=h.Vframe.get("draft_"+this.id);r&&r.invoke("__aq",[{saving:1,draft:0}]),h.State.fire("__bK",{start:!0}),this.__dY(function(e,t){h.State.fire("__bK"),e?(r&&r.invoke("__aq",[{saving:0,draft:1}]),n.__dP=0):n.__ea(i,t,function(e){r&&r.invoke("__aq",[{saving:0,draft:0,error:e}]),n.__dP=0,n.alert("\u4fdd\u5b58\u6210\u529f\uff5e")})})},__dM:function(){return this.__dZ!=this.__e_()},__e_:function(){return JSON.stringify({page:h.State.get("page"),elements:h.State.get("__aN")},function(e,t){if(!h.default.has(b,e))return t})},__ec:function(){var i=this,n=s.default.__ct(),e=h.default.config("bizId"),t=h.default.config("tempId");n.success&&n.bizId==e&&n.tempId==t&&this.confirm(d.default("__eb"),function(){y(n),h.State.fire("__q",{keepSelect:1}),h.State.fire("__bb"),h.State.fire("__as");var e,t=i.__dM;t&&(h.State.fire("__G"),(e=h.Vframe.get("draft_"+i.id))&&e.invoke("__aq",[{draft:t}]))},function(){s.default.__aQ()})},render:function(){var o=this,e=h.default.parseUrl(location.search).params,t=h.default.config("mock"),i=e.temp_id,e=e.biz_id;t&&(e=i="-1"),i&&e?c.default.__an("__ee"):c.default.__an("__ed"),h.default.config({tempId:i,bizId:e});var a,t={page:{xmlns:r.default.CLOUD_PRINT_NAME_SPACE,"xmlns:xsi":r.default.XSI_NAME_SPACE,"xsi:schemaLocation":r.default.SCHEMA_LOCATION_NAME_SPACE,"xmlns:editor":r.default.EDITOR_NAME_SPACE,width:r.default.PAGE_WIDTH_DEFAULT*r.default.SCALE_DEFAULT,height:r.default.PAGE_HEIGHT_DEFAULT*r.default.SCALE_DEFAULT,header:0,footer:0,splitable:!0},__j:r.default.SCALE_DEFAULT,__cn:null,__aN:[],__aV:null,__av:[],__au:{},__o:[],__p:[]};h.State.set(t),this.updater.digest({lang:h.default.config("lang")}),i&&e&&(a=Date.now(),this.fetch({name:"__ef",params:{temp_id:i,biz_id:e}},function(n,r){var e=Date.now();o.__dL(a,e,500,function(){if(n)c.default.__an(n.msg);else{var e=r.get("data.content",""),t=r.get("data.temp_name","");o.updater.digest({name:t});try{var i=u.default.decode(e);y(i),l.default.__aP(),h.State.fire("__bb"),h.State.fire("__q"),h.State.fire("__as"),o.__dZ=o.__e_(),o.__ec(),c.default.__ao()}catch(e){c.default.__an(e.message)}}})}))},"$doc<mousedown,mouseup>":function(e){var t;"mousedown"==e.type?(this.__eg=e.pageX,this.__eh=e.pageY):(t=e.pageX-this.__eg,e=e.pageY-this.__eh,(5<t||5<e)&&(this.__ei=!0))},"$doc<click>":function(e){var t;this.__ei?delete this.__ei:h.default.inside(e.target,document.body)&&(t=o.default.OUTER,h.default.inside(e.target,"app")&&(h.default.inside(e.target,"toolbox_list")||h.default.inside(e.target,"toolbox_prelist")||h.default.inside(e.target,"header_btns")||(h.default.inside(e.target,"canvas_"+this.id)?t=o.default.CANVAS:h.default.inside(e.target,"property_"+this.id)&&(t=o.default.PROPERTY),h.State.fire("__bA",{zone:t}))))},"$doc<drop,dragover>":function(e){e.preventDefault(),"dragover"==e.type?h.State.fire("__bB",{hoverNode:e.target}):h.State.fire("__bB")},"$doc<toolboxtoggle>":function(e){this.updater.digest({anim:!0,collapse:e.collapse})},"__ej<click>":function(){var e="zh-cn"==(e=h.default.config("lang"))?"en-us":"zh-cn";h.default.config({lang:e}),h.State.fire("__s",{lang:e}),this.updater.digest({lang:e})},"__aU<click>":function(){this.__dR()}})}),define("editor/const/click-desc",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={TOOLBOX:1,CANVAS:2,PROPERTY:4,OTHER:8,OUTER:16}}),define("editor/const/keys",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:46,BACKSPACE:8,TAB:9,C:67,V:86,A:65,W:87,S:83,F:70,N:78,D:68,X:88,Z:90,Y:89}}),define("editor/const/props-desc",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={LABEL:1,INPUT:2,NUMBER:4,DROPDOWN:8,IMAGE:16,ORIGINSIZE:32,TEXTAREA:64,SPLITER:128,BOOLEAN:256,LINEHEIGHT:512,FONTSTYLE:1024,FONTALIGN:2048,CELLOPERATE:4096,CELLSIZE:8192,CELLFOCUS:16384,CELLCOLSHARE:32768,CELLROWSHARE:65536,CELLDROPDOWN:2<<16}}),define("editor/core/axis",["magix","$","../../util/converter","../../gallery/mx-dragdrop/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),f=e("$"),r=e("../../util/converter"),e=e("../../gallery/mx-dragdrop/index"),p=n.default.State,g=r.default.__i;n.default.applyStyle("xzKVLdva",".xzKVLdvP{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:2000;position:relative}.xzKVLdvQ{float:left;width:21px;height:100%;border-right:1px solid #ccc;overflow:hidden}.xzKVLdvR{top:0;width:1px}.xzKVLdvR,.xzKVLdvS{position:absolute;background:#06f;z-index:2000;display:none}.xzKVLdvS{left:0;height:1px}.xzKVLdvT{left:0;top:0;width:21px;height:20px;border-bottom:1px solid #ccc;border-right:1px solid #ccc;z-index:2001}.xzKVLdvT,.xzKVLdvU{position:absolute;background:#fff}.xzKVLdvU{left:5px}.xzKVLdvU,.xzKVLdvV{cursor:default;font-size:10px}.xzKVLdvV{position:absolute;top:-5px;background:#fff;transform:rotate(-90deg);transform-origin:0 0}.xzKVLdvW,.xzKVLdvX{position:relative;z-index:1000}.xzKVLdvW{top:20px}.xzKVLdvX{left:20px}.xzKVLdvY{width:4px;border-left:1px solid #06f}.xzKVLdvY,.xzKVLdvZ{position:absolute;pointer-events:none}.xzKVLdvZ{height:1px;background:#06f}.xzKVLdva_{left:-15px;top:6px;cursor:pointer;pointer-events:all}.xzKVLdva_,.xzKVLdvaa{position:absolute;font-size:10px;color:#666}.xzKVLdvaa{left:4px;top:2px;cursor:default}.xzKVLdvab{left:6px;top:-15px;cursor:pointer;pointer-events:all}.xzKVLdvab,.xzKVLdvac{position:absolute;font-size:10px;color:#666}.xzKVLdvac{left:4px;top:2px;cursor:default}.xzKVLdvad{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.xzKVLdvae,.xzKVLdvad{position:absolute;overflow:hidden;background:#0075f7;pointer-events:all}.xzKVLdvae{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.scale,c=e.sTop,u=e.vId,f=e.draw,h=e.yHelpers,p=e.toMM,g=e.yStart,v=e.vWidth,_=e.i18n,x=e.sLeft,m=e.xHelpers,y=e.xStart,b=e.vHeight,w=e.width,L=e.xEnd,z=e.height,k=e.yEnd;s+=" ";s+=" ";var S=3.7795275593333*d;s+=" ";var V=15;s+=" ",d<=.5?(s+=" ",V=30,s+=" "):d<1?(s+=" ",V=25,s+=" "):4.5<=d?(s+=" ",V=3,s+=" "):4<=d?(s+=" ",V=4,s+=" "):3.5<=d?(s+=" ",V=5,s+=" "):3<=d?(s+=" ",V=6,s+=" "):2.5<=d?(s+=" ",V=8,s+=" "):2<=d?(s+=" ",V=10,s+=" "):1.5<=d&&(s+=" ",V=12,s+=" "),s+=" ",s+=" ";var K,C=V/5*S;s+=" ",s+=" ";var T="#aaa;";if(s+='<div class="xzKVLdvX" style="top:-'+n(c)+'px" id="'+n(u)+'_y_help">',f){s+=" ";for(var A=0,E=h.length;A<E;A++){var M=h[A];s+=" ";var N=S*(Math.abs(p(g))+M.mm)+20;s+='<div class="xzKVLdvZ" style="width:'+n(v)+"px;top:"+n(N)+'px;"><i class="xzKVLdvN xzKVLdvab" title="'+n(_("_M"))+'" mx-click="'+t+"\x1e__J({type:'y',id:'"+n(l(M.id))+'\'})">&#xe600;</i><span mxa="xzKVLdv_:_" class="xzKVLdvac">'+n(M.mm)+'</span><span class="xzKVLdvad" mx-mousedown="'+t+"\x1e__K({type:'y',id:'"+n(l(M.id))+"',c:"+n(N)+'})" title="'+n(_("_N"))+'"></span></div>'}s+=" "}if(s+='</div><div class="xzKVLdvW" style="left:-'+n(x)+'px" id="'+n(u)+'_x_help">',f){s+=" ";for(var I=0,D=m.length;I<D;I++){M=m[I];s+=" ";N=S*(Math.abs(p(y))+M.mm);s+='<div class="xzKVLdvY" style="height:'+n(b)+"px;left:"+n(N)+'px;"><i class="xzKVLdvN xzKVLdva_" title="'+n(_("_M"))+'" mx-click="'+t+"\x1e__J({type:'x',id:'"+n(l(M.id))+'\'})">&#xe600;</i><span mxa="xzKVLdv_:a" class="xzKVLdvaa">'+n(M.mm)+'</span><span class="xzKVLdvae" mx-mousedown="'+t+"\x1e__K({type:'x',id:'"+n(l(M.id))+"',c:"+n(N)+'})" title="'+n(_("_N"))+'"></span></div>'}s+=" "}if(s+='</div><div mxa="xzKVLdv_:b" mx-mousemove="'+t+'\x1e__C()" mx-mouseout="'+t+'\x1e__D()" mx-click="'+t+'\x1e__H()"><div class="xzKVLdvP" id="'+n(u)+'_x"><div style="width:'+n(w)+'px;height:100%">',f){s+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+n(w)+' 20" style="cursor:default;">';for(var O=0;O<y;O+=C)s+=" ",s+=" ",s+=(K=p(O))%V==0?'<rect width="1" height="'+n(12)+'" x="'+n(y-O)+'" y="'+n(7)+'" style="fill:'+n(T)+';"/><text x="'+n(y-O+2)+'" y="14" style="font-size:10px;fill:#999;">'+n(0===K?0:-K)+"</text>":'<rect width="1" height="'+n(4)+'" x="'+n(y-O)+'" y="'+n(15)+'" style="fill:'+n(T)+';"/>',s+=" ";s+=" ";for(O=C;O<L;O+=C)s+=" ",s+=" ",s+=(K=p(O))%V==0?'<rect width="1" height="'+n(12)+'" x="'+n(y+O)+'" y="'+n(7)+'" style="fill:'+n(T)+';"/><text x="'+n(y+O+2)+'" y="14" style="font-size:10px;fill:#999;">'+n(K)+"</text>":'<rect width="1" height="'+n(4)+'" x="'+n(y+O)+'" y="'+n(15)+'" style="fill:'+n(T)+';"/>',s+=" ";s+="</svg>"}if(s+='</div></div><div class="xzKVLdvR" id="'+n(u)+'_x_line" style="height:'+n(b+20)+'px"><span mxs="xzKVLdv_:_" class="xzKVLdvU"></span></div></div><div mxa="xzKVLdv_:c" mx-mousemove="'+t+'\x1e__E()" mx-mouseout="'+t+'\x1e__F()" mx-click="'+t+'\x1e__I()"><div class="xzKVLdvQ" style="height:'+n(b)+'px;" id="'+n(u)+'_y"><div style="height:'+n(z)+'px;">',f){s+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 '+n(z)+'" style="cursor:default">';for(O=0;O<g;O+=C)s+=" ",s+=" ",s+=(K=p(O))%V==0?'<rect width="'+n(12)+'" height="1" x="'+n(8)+'" y="'+n(g-O)+'" style="fill:'+n(T)+';"/><text x="14" y="'+n(g-O+2)+'" style="font-size:10px;fill:#999;" transform="rotate(-90,13,'+n(g-O)+')">'+n(0===K?0:-K)+"</text>":'<rect width="'+n(4)+'" height="1" x="'+n(16)+'" y="'+n(g-O)+'" style="fill:'+n(T)+';"/>',s+=" ";s+=" ";for(O=C;O<k;O+=C)s+=" ",s+=" ",s+=(K=p(O))%V==0?'<rect width="'+n(12)+'" height="1" x="'+n(8)+'" y="'+n(g+O)+'" style="fill:'+n(T)+';"/><text x="14" y="'+n(g+O)+'" style="font-size:10px;fill:#999;;" transform="rotate(-90,13,'+n(g+O-2)+')">'+n(K)+"</text>":'<rect width="'+n(4)+'" height="1" x="'+n(16)+'" y="'+n(g+O)+'" style="fill:'+n(T)+';"/>',s+=" ";s+="</svg>"}return s+='</div></div><div class="xzKVLdvS" id="'+n(u)+'_y_line" style="width:'+n(v+20)+'px"><span mxs="xzKVLdv_:a" class="xzKVLdvV"></span></div></div><div mxs="xzKVLdv_:b" class="xzKVLdvT"></div>'},mixins:[e],init:function(e){var t=this,e=f.default("#"+e.cnt);e.on("scroll",function(){t.syncScroll()}),this.__n=e;function i(){n.set({xHelpers:p.get("__o"),yHelpers:p.get("__p")})}var n=this.updater,r=0,e=function(){clearTimeout(r),r=setTimeout(function(){i(),t.rerender(!0),t.syncScroll()},30)};n.set({sLeft:0,sTop:0}),i(),p.on("__q",e),p.on("__r",e),p.on("__s",e),this.__t=f.default("#"+this.id)},rerender:function(e){var t,i,n=this.__n,r=n.prop("scrollWidth")+50,o=n.prop("scrollHeight")+50,a=0,l=0,s=0,d=0,c=10,u=10;e&&(t=f.default("#stage_stage"),i=f.default("#stage_outer"),t=t.offset(),i=i.offset(),l=r-(a=Math.round(t.left-i.left)+20),d=o-(s=Math.round(t.top-i.top)),c=n.height(),u=n.width()),this.updater.digest({toMM:g,scale:p.get("__j"),width:r,height:o,draw:e,xStart:a,xEnd:l,yStart:s,vHeight:c,vWidth:u,yEnd:d}),this.__u=f.default("#"+this.id+"_x"),this.__v=f.default("#"+this.id+"_y"),this.__w=f.default("#"+this.id+"_y_help"),this.__x=f.default("#"+this.id+"_x_help"),this.__y=f.default("#"+this.id+"_x_line"),this.__z=this.__y.find("span"),this.__A=f.default("#"+this.id+"_y_line"),this.__B=this.__A.find("span")},syncScroll:function(){var e=this.__u,t=this.__v,i=this.__w,n=this.__x,r=this.__n,o=r.prop("scrollTop"),r=r.prop("scrollLeft");e.prop("scrollLeft",r),t.prop("scrollTop",o),i.css({top:-o}),n.css({left:-r}),this.updater.set({sLeft:r,sTop:o})},render:function(){var e=this;this.rerender();var t=setInterval(function(){f.default("#stage_stage").length&&(clearInterval(t),e.rerender(!0))},30)},"__C<mousemove>":function(e){var t=this.__t.offset(),i=this.__u,e=e.pageX-t.left,t=this.updater.get("xStart");this.__y.css({display:"block",left:e});i=g(e-t+i.prop("scrollLeft"));this.__z.html(i)},"__D<mouseout>":function(e){n.default.inside(e.relatedTarget,e.eventTarget)||this.__y.css({display:"none"})},"__E<mousemove>":function(e){var t=this.__t.offset(),i=e.pageY-t.top,e=this.updater.get("yStart"),t=this.__v;this.__A.css({display:"block",top:i});t=g(i-e-20+t.prop("scrollTop"));this.__B.html(t)},"__F<mouseout>":function(e){n.default.inside(e.relatedTarget,e.eventTarget)||this.__A.css({display:"none"})},"__H<click>":function(e){var t=this.__t.offset(),i=this.__u,e=e.pageX-t.left,t=this.updater.get("xStart"),t=g(e-t+i.prop("scrollLeft")),i=this.updater.get("xHelpers");i.push({mm:t,id:n.default.guid("x_")}),this.updater.digest({xHelpers:i}),p.fire("__G")},"__I<click>":function(e){var t=this.__t.offset(),i=e.pageY-t.top,e=this.updater.get("yStart"),t=this.__v,e=g(i-e-20+t.prop("scrollTop")),t=this.updater.get("yHelpers");t.push({mm:e,id:n.default.guid("x_")}),this.updater.digest({yHelpers:t}),p.fire("__G")},"__J<click>":function(e){for(var t=e.params,e=t.type,i=t.id,t=e+"Helpers",e=this.updater,n=e.get(t),r=n.length;r--;)if(n[r].id==i){n.splice(r,1);break}e.digest(((e={})[t]=n,e)),p.fire("__G")},"__K<mousedown>":function(t){if(t.target==t.eventTarget){for(var i,n,r,e=t.params,o=e.type,a=e.id,l=e.c,s=o+"Helpers",d=this.updater,c=d.get(s),u=0,f=c;u<f.length;u++){var h=f[u];if(h.id==a){i=h;break}}i&&(n=d.get(o+"Start"),r=!1,this.dragdrop(t.target,function(e){r=!0,e="x"==o?e.pageX-t.pageX+l:e.pageY-t.pageY+l-20,i.mm=g(e-n),d.digest(((e={})[s]=c,e))},function(){r&&p.fire("__G")}))}},"$win<resize>":function(){this.rerender(!0),this.syncScroll()},"$doc<toolboxtoggle>":function(){var e=this;clearTimeout(e.__L),e.__L=setTimeout(function(){e.rerender(!0),e.syncScroll()},160)}})}),define("editor/core/code",["magix","../../cainiao/serializer","gallery/mx-codemirror/index"],function(e,t,i){e("gallery/mx-codemirror/index"),t.__esModule=!0;var n=e("magix"),r=e("../../cainiao/serializer");n.default.applyStyle("xzKVLdvb",""),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.i18n,e=e.xml;return s+='<div mxa="xzKVLdva:_" class="xzKVLdvK"><b mxa="xzKVLdva:a" class="xzKVLdvd">'+n(d("_V"))+'</b></div><div mxv mxa="xzKVLdva:b" class="xzKVLdvL"><textarea mxa="xzKVLdva:c" class="xzKVLdvC" style="width:100%;height:500px;" mx-view="gallery/mx-codemirror/index" mx-change="'+t+'\x1e__S()">'+n(e)+'</textarea></div><div mxa="xzKVLdva:d" class="xzKVLdvM xzKVLdvw"><button mxa="xzKVLdva:e" class="xzKVLdvz xzKVLdvq" mx-click="'+t+'\x1e__U()">'+n(d("_W"))+'</button><button mxa="xzKVLdva:f" class="xzKVLdvz xzKVLdvA xzKVLdvd xzKVLdvq" mx-click="'+t+'\x1e__T()">'+n(d("_X"))+"</button></div>"},init:function(e){this.__O=e.stage,this.__P=e.dialog,this.__Q=e.enter},render:function(){var e=this.__O,t=r.default.encode(e),e=JSON.stringify(e.page);this.__R=e,this.updater.digest({xml:t})},"__S<change>":function(e){this.updater.set({xml:e.value})},"__T<click>":function(){var e,t=this.updater.get("xml");try{e=r.default.decode(t)}catch(e){return void this.alert(e.message)}this.__R!=JSON.stringify(e.page)&&(e.pageChange=!0),this.__Q(e),this.__P.close()},"__U<click>":function(){this.__P.close()}})}),define("editor/core/contextmenu",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0,t.Contextmenu=void 0;var a=e("magix"),l=e("../../i18n/index"),n={spliter:!0},r={id:0,text:"__Y",short:" (Ctrl+A)"},o={id:1,text:"__Z",short:" (Ctrl+C)"},s={id:14,text:"__a_",short:" (Ctrl+X)"},d={id:2,text:"__aa",short:" (Ctrl+V)"},c={id:5,text:"__ab"},u={id:6,text:"__ac"},f={id:3,text:"__ad"},h={id:4,text:"__ae"},p={id:7,text:"__af",short:" (Delete)"},g={id:8,text:"__ag"},v={id:9,text:"__ah"},_={id:10,text:"__ai"},x={id:11,text:"__aj"},m={id:12,text:"__ak"},y={id:13,text:"__al"},b={},e=function(o){return function(e){o.__am||(o.__am=a.default.guid("_m"));e+=o.__am;if(!b[e]){for(var t=[],i=0,n=o;i<n.length;i++){var r=n[i];r.spliter?t.push(r):t.push({id:r.id,text:l.default(r.text)+(r.short||"")})}b[e]=t}return b[e]}};t.Contextmenu={allId:r.id,pasteId:d.id,topId:f.id,upId:c.id,bottomId:h.id,downId:u.id,cutId:s.id,cellBottomId:v.id,cellTopId:g.id,cellLeftId:x.id,cellRightId:m.id,cellDeleteColId:y.id,cellDeleteRowId:_.id,singleElement:e([o,s,p,n,c,f,n,u,h]),multipleElement:e([o,s,p]),stage:e([r,d]),tableCell:e([r,d,n,g,v,_,n,x,m,y])}}),define("editor/core/cursor",["$","magix"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("$"),e=e("magix"),r=e.default.guid("cursor_");e.default.applyStyle("xzKVLdvc",".xzKVLdvaf{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),t.default={__an:function(e){var t=n.default("#"+r);t.length||(n.default("body").append('<div class="xzKVLdvaf" id="'+r+'"/>'),t=n.default("#"+r)),t.css({cursor:e}),t.show()},__ao:function(){n.default("#"+r).hide()}}}),define("editor/core/designer",["magix","../../cainiao/const","../../util/converter","../../util/transform","$","../../gallery/mx-dragdrop/index"],function(e,t,i){"use strict";t.__esModule=!0;var S=e("magix"),o=e("../../cainiao/const"),V=e("../../util/converter"),K=e("../../util/transform"),C=e("$"),e=e("../../gallery/mx-dragdrop/index");S.default.applyStyle("xzKVLdvd",".xzKVLdvah{width:24px;height:24px;padding:4px;cursor:move;color:#c3c3c3;transition:color .4s}.xzKVLdvah:hover{color:#000}.xzKVLdvag .xzKVLdvah{visibility:hidden}");var a=S.default.has,T={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3},n={},r={};S.State.on("__ap",function(e){var t=S.Vframe.get(e.eId);t&&t.invoke("__aq",[e.data])}),S.State.on("__s",function(){for(var e in n){var t=S.Vframe.get(e);t&&t.invoke("__ar")}}),S.State.on("__as",function(){for(var e in r){var t=S.Vframe.get(e);t&&(t.invoke("__at"),t.invoke("render"))}}),t.default=S.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.elementPath,c=e.ctor,u=e.id,f=e.type,h=e.props,p=e.onlyMove,g=e.vId,v=e.i18n,_=e.space,x=e.selected,m=e.count,e=e.size;s+='<div mxv="ctor,props,onlyMove" mx-view="'+n(d)+"?ctor="+a(i,c)+"&id="+o(u)+"&type="+o(f)+"&props="+a(i,h)+"&onlyMove="+a(i,p)+'&forceUpdate=true" id="entity_'+n(g)+'"></div>';p=h.height;s+=" ";var y,g=h.width;return s+=" ","table"==c.type?(s+=" ",p++,s+='<div style="left:'+n(h.x-24)+"px;top:"+n(h.y-6)+"px;z-index:"+n(h.zIndex)+';" class="xzKVLdvt xzKVLdvah" title="'+n(v("_aJ"))+'"><i mxs="xzKVLdvb:_" class="xzKVLdvN">&#xe660;</i></div>'):(s+='<div style="width:',h.useCNStyle?s+="calc(92% + "+n(_)+"px)":s+=n(g+2*_)+"px",s+=";height:",h.useCNStyle?s+="calc(92% + "+n(_)+"px)":s+=n(p+2*_)+"px",s+=";left:"+n(h.x-_)+"px;top:"+n(h.y-_)+"px;",h.rotate&&(s+="transform:rotate("+n(h.rotate)+"deg);"),s+="background:#fff;opacity:0.01;z-index:"+n(h.zIndex)+";\ncursor:pointer;","htext"!=c.type&&"vtext"!=c.type||!h.editable||(s+="pointer-events:none;"),s+='" class="xzKVLdvt" ',"htext"!=c.type&&"vtext"!=c.type||(s+=' mx-dblclick="'+t+'\x1e__aI()" '),s+="></div>"),s+=" ",x&&(s+=" ",x=h.locked||h.useCNStyle?"red":"#5390ef",s+='<div style="',h.rotate&&(s+="transform:rotate("+n(h.rotate)+"deg);"),s+="left:"+n(h.x-_)+"px;top:"+n(h.y-_)+"px;width:",h.useCNStyle?s+="calc(92% + "+n(_)+"px)":s+=n(Math.round(g+2*_))+"px",s+=";height:",h.useCNStyle?s+="calc(92% + "+n(_)+"px)":s+=n(p+2*_)+"px",s+=";border:dotted 1px "+n(x)+";pointer-events:none;z-index:"+n(h.zIndex)+'" class="xzKVLdvt">',!c.modifier.rotate||h.locked||h.useCNStyle||1!=m||(s+='<div style="left:'+n(g+_-1)+"px;top:-"+n(_)+"px;width:"+n(2*e)+"px;height:"+n(2*e)+"px;background:#5390ef;border-radius:"+n(e)+'px;cursor:url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAEIUExURUdwTOnp6QICAv7+/h0dHXJyco2NjQAAAAUFBQAAAKSkpP///////wQEBKqqqr+/v/Hx8f///6ioqAAAAP///6ysrD09Pf///+Li4tXV1be3t0xMTCYmJrKyssjIyPv7+2VlZYGBgfv7+5qams3Nzba2tv///yoqKkdHR5aWlgUFBfz8/PHx8f///////5OTk////7i4uO/v78TExOHh4a2trYiIiMDAwM/Pz0FBQf///2dnZ76+vv///93d3dra2q2trQAAADg4OBMTE3V1dQgICCYmJhwcHEdHR39/f0BAQF1dXTAwMLS0tI+Pj1VVVZaWlmVlZU9PT5ycnJiYmP39/Wlpaefn5+BeE2oAAABBdFJOUwDHBQkNd5QJFgH5p10b+vYeJLcQM6I8O/Lf30kowOaca4uOkEXPQjJQpihot4JyNH/4S9ferlW26mPfK85PkoTcnudyewAAAVlJREFUKM+FkeeWgjAQhQHpCirYe9e1be81AZFm3fb+b7JMotvOnrPzIwnfJcncG4b5p2L5aas1SaRhfZj4wtOi54YODtRxnskV4nueYYMZojVXs6crdsd7SQuQ74Ygb3xUjBGerkUcq4bYPHiyyc5jchUzdhCyqzlTkky5nQRhnQd+7yH0luXJP7clDIJN2nrwkXNHeepGd/F8hrZH8NVY4EWZdlG5FkSjW9IX0K+kCdUG5QoHA6/1B51owWmyLP2KQVHIJEl/hpQadVKxH6AezxB7hZdkkY1PEr2dcLnCZzDztahxy3HfHym/WCKkEqE7B0/LJr0wc2Uhi4ZogFlcyJH4R5Dn+oQIYgA7HJWtt+q1TRSi3aaHCh7ywkiaOSE51D7nqFB+XmertrV7KKyLe1uVV3E4FErLwPW3tm6UPw3JgmbyZmUgiGKz0f+egiwrjCJBccoX/QAYCzizwB7F9QAAAABJRU5ErkJggg==\') 12 12,auto;pointer-events:all" class="xzKVLdvt" mx-mousedown="'+t+'\x1e__aH()"></div>'),s+=" ",h.useCNStyle||(s+='<div class="xzKVLdvt" style="width:5px;height:1px;background:'+n(x)+";left:"+n((g+2*_)/2-3)+"px;top:"+n((p+2*_)/2-1)+'px;"></div><div class="xzKVLdvt" style="width:1px;height:5px;background:'+n(x)+";left:"+n((g+2*_)/2-1)+"px;top:"+n((p+2*_)/2-3)+'px;"></div>'),s+=" ",c.modifier.resize&&1==m&&(s+=" ",m=((h.rotate||0)+360)%360,s+=" ",!c.modifier.resizeX||h.locked||h.widthLocked||(s+=" ",s+=" ",(y=0|Math.max(0,Math.min(8*e,h.height-2*e-2*_)))<2*e&&!c.modifier.resizeY&&(s+=" ",y=2*e,s+=" "),s+='<div style="right:-'+n(Math.round(e/2))+"px;top:"+n((p+2*_-y)/2|0)+"px;width:"+n(e)+"px;height:"+n(y)+"px;background:#5390ef;cursor:",m<=22.5||337.5<m||157.5<m&&m<=202.5?s+="ew":m<=67.5||202.5<m&&m<=247.5?s+="nwse":m<=112.5||247.5<m&&m<=292.5?s+="ns":(m<=157.5||292.5<m&&m<=337.5)&&(s+="nesw"),s+='-resize;pointer-events:all;" class="xzKVLdvt" mx-mousedown="'+t+"\x1e__aE({key:'rm'})\"></div>"),s+=" ",!c.modifier.resizeY||h.locked||h.heightLocked||(s+=" ",s+=" ",(y=0|Math.max(0,Math.min(8*e,h.width-2*e-2*_)))<2*e&&!c.modifier.resizeX&&(s+=" ",y=2*e,s+=" "),s+='<div style="left:'+n((g+2*_-y)/2|0)+"px;bottom:-"+n(Math.round(e/2))+"px;width:"+n(y)+"px;height:"+n(e)+"px;background:#5390ef;cursor:",m<=22.5||337.5<m||157.5<m&&m<=202.5?s+="ns":m<=67.5||202.5<m&&m<=247.5?s+="nesw":m<=112.5||247.5<m&&m<=292.5?s+="ew":(m<=157.5||292.5<m&&m<=337.5)&&(s+="nwse"),s+='-resize;pointer-events:all;" class="xzKVLdvt" mx-mousedown="'+t+"\x1e__aE({key:'mb'})\"></div>"),s+=" ",!c.modifier.resizeXY||h.locked||h.widthLocked||h.heightLocked||(s+=" ",s+='<div style="right:-2px;bottom:-2px;width:'+n(h=0|Math.max(2*e,Math.min(4*e,h.width-10*e,h.height-10*e)))+"px;height:"+n(h)+"px;cursor:",m<=22.5||337.5<m||157.5<m&&m<=202.5?s+="nwse":m<=67.5||202.5<m&&m<=247.5?s+="ns":m<=112.5||247.5<m&&m<=292.5?s+="nesw":(m<=157.5||292.5<m&&m<=337.5)&&(s+="ew"),s+="-resize;pointer-events:all;border-right:solid "+n(e)+"px #5390ef;border-bottom:solid "+n(e)+'px #5390ef" class="xzKVLdvt" mx-mousedown="'+t+"\x1e__aE({key:'rb'})\"></div>"),s+=" "),s+="</div>"),s},mixins:[e],init:function(e){var t=this;t.assign(e),r[t.id]=1,"table"!=e.type&&(e.cell||"htext"!=e.type&&"vtext"!=e.type)||(n[t.id]=1),t.on("destroy",function(){delete r[t.id],delete n[t.id]}),t.__t=C.default("#"+t.id)},__at:function(){var e=S.State.get("__au"),t=S.State.get("__av").length,i=this.updater,n=i.get(),r=n.id;n.selected?a(e,r)||(n=S.Vframe.get("entity_"+this.id))&&n.invoke("__aw"):a(e,r),i.set({selected:a(e,r),count:t})},assign:function(e,t){var i=e.id,n=e.ctor,r=e.props,e=e.type;return this.updater.set({ctor:n,id:i,type:e,onlyMove:t&&t.move,space:o.default.ELEMENT_CTRL_SPACE,size:o.default.RESIZER_SIZE,props:r}),this.__at(),!0},render:function(){this.updater.digest()},__ar:function(){var e=this.updater,t=e.get("props");e.digest({onlyMove:!1,props:t})},__aq:function(e){this.updater.digest({onlyMove:!1,props:e})},"__aE<mousedown>":function(e){var o=this;e.stopPropagation();var t=o.updater.get(),a=t.props,i=t.ctor;if(!a.locked){S.State.fire("__ax",{locked:1});var n=C.default(e.eventTarget).css("cursor");n&&S.State.fire("__ay",{cursor:n});var l=a.rotate||0,r=e.params.key,l=(l+360)%360;0==a.width&&(a.width=.01),0==a.height&&(a.height=.01);for(var s=a.width,d=a.height,c=a.x,t=a.y,u=0,f=0,h=Number.MAX_VALUE,p=Number.MAX_VALUE,g=0,v=i.props;g<v.length;g++){var _=v[g];"width"==_.key?(S.default.has(_,"max")&&(h=_.max),S.default.has(_,"min")&&(u=_.min)):"height"==_.key&&(S.default.has(_,"max")&&(p=_.max),S.default.has(_,"min")&&(f=_.min))}var x=K.default.__az(a,l),n=K.default.__aA(x.point,r),i=n.opposite,r=n.current,m=i.index,n=i.point,i=r.point,r=n.x,n=n.y,y=Math.abs(i.x-r),b=Math.abs(i.y-n),w={x:c,y:t,rotate:l,width:s,height:d},L=e.pageX,z=e.pageY,k=!1;o.dragdrop(e.eventTarget,function(e){var t={x:1,y:1};k=!0;var i=b<y,n=1,r=e.pageX-L,e=e.pageY-z;0==m||7==m?i&&90<l&&l<270?r=-r:!i&&180<l&&l<360&&(e=-e):0!=m&&1!=m||(i&&45<l&&l<135?r=-r:!i&&90<l&&l<270&&(e=-e)),(n=i?(r+y)/y:(e+b)/b)<0&&(n=0);e=T[m];1===e?t.x=t.y=n:2===e?t.y=n:3===e&&(t.x=n);e=K.default.__aB(w,t,x,m),n=V.default.__aC(e.width),t=V.default.__aC(e.height);n<u?n=u:h<n&&(n=h),t<f?t=f:p<t&&(t=p),n==a.width&&t==a.height||(a.x=V.default.__aC(e.left),a.y=V.default.__aC(e.top),a.width=n,a.height=t,o.updater.digest({props:a}),S.State.fire("__aD"))},function(){k&&S.State.fire("__G"),S.State.fire("__ax"),S.State.fire("__ay")})}},"__aH<mousedown>":function(e){e.stopPropagation();var t,i,n,r,o,a=this,l=a.updater.get("props");l.locked||((n=C.default(e.eventTarget).css("cursor"))&&S.State.fire("__ay",{cursor:n}),t=V.default.__aF(a.__t,{x:e.pageX,y:e.pageY,find:1}),i=K.default.__aG(l),n=l.rotate,r=Math.atan2(t.y-i.y,t.x-i.x)-n*Math.PI/180,o=!1,S.State.fire("__ax",{locked:1}),a.dragdrop(e.eventTarget,function(e){e=V.default.__aF(a.__t,{x:e.pageX,y:e.pageY,find:1});o=!0;e=180*((e=Math.atan2(e.y-i.y,e.x-i.x))-r)/Math.PI;l.rotate=(360+(0|e))%360,a.updater.digest({props:l}),S.State.fire("__aD")},function(){o&&S.State.fire("__G"),S.State.fire("__ax"),S.State.fire("__ay")}))},"__aI<dblclick>":function(e){var t=this.updater,i=t.get("props");i.allowEdit&&(i.editable=!0,t.digest({props:i}))}})}),define("editor/core/draft",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e=e("magix");t.default=e.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.draft,c=e.i18n,u=e.after,f=e.saving,e=e.error;return d?s+=" "+n(c("_aK",0<u?u:""))+" ":f?s+=" "+n(c("_aL"))+" ":e&&(s+=" "+n(c("_aM"))+n(e.msg)+" "),s},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e),!0},render:function(){this.updater.digest()},__aq:function(e){this.updater.digest(e)}})}),define("editor/core/history",["magix","../../cainiao/const"],function(e,t,i){"use strict";t.__esModule=!0;function n(){return JSON.stringify({page:o.State.get("page"),scale:o.State.get("__j"),elements:o.State.get("__aN"),select:o.State.get("__av"),xLines:o.State.get("__o"),yLines:o.State.get("__p")})}function r(e){e=JSON.parse(e),o.State.fire("__aO",{json:e}),o.State.fire("__r",{history:!0}),o.State.fire("__as")}var o=e("magix"),a=e("../../cainiao/const"),l=[],s=[],d=null,c=-1,u="",f=null;t.default={__aP:function(){f=f||n()},__aQ:function(){l.length=0,s.length=0,o.State.fire("__r")},__aR:function(){return{canUndo:l.length,canRedo:s.length}},__aS:function(){var e;0<l.length&&(e=l.pop(),s.push(e),e=l[l.length-1]||f,r(e))},__aT:function(){var e=s.pop();e&&(l.push(e),r(e))},__aU:function(e,t){void 0===e&&(e="_save"),void 0===t&&(t=0);var i=n();e!=u&&d&&(l.push(d),d=null,u=e),s.length=0,t?(d=i,clearTimeout(c),c=setTimeout(function(){l.push(d),d=null},t)):l.push(i),l.length>a.default.HISTORY_MAX&&(f=l.shift()),o.State.fire("__r")}}}),define("editor/core/mask",["$","magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("$"),r=e("magix"),o=e("../../i18n/index"),a=r.default.guid("mask_");r.default.applyStyle("xzKVLdvf",".xzKVLdvai{opacity:0;background:#000;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10001;transition:opacity .2s}.xzKVLdvaj{opacity:.2}.xzKVLdvak{position:fixed;left:50%;top:50%;width:200px;height:30px;line-height:30px;background:#fff;margin-top:-15px;margin-left:-100px;z-index:10002;text-align:center}");var l=0;t.default={__an:function(e){clearTimeout(l);var t=n.default("#"+a);t.length||(n.default("body").append('<div id="'+a+'"><div class="xzKVLdvai" id="'+a+'_bk"/><div class="xzKVLdvak" id="'+a+'_text"></div></div>'),t=n.default("#"+a)),n.default("#"+a+"_text").html(o.default(e)),n.default("#"+a+"_bk").addClass("xzKVLdvaj"),t.show()},__ao:function(){l=setTimeout(function(){n.default("#"+a+"_bk").removeClass("xzKVLdvaj"),n.default("#"+a).hide()},200)}}}),define("editor/core/modifier",["magix","../../util/converter","../../cainiao/const"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../util/converter"),o=e("../../cainiao/const");t.default=n.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.hoverElement,c=e.transformProps,u=e.space,f=e.showRect,h=e.rectX,p=e.rectY,g=e.rectWidth,v=e.rectHeight;return d&&(s+=" ",e=d.ctor,s+=" ",s+=" ",d=(c=c(d.props)).height,s+=" ","table"==e.type&&(s+=" ",d+=1.5,s+=" "),s+='<div class="xzKVLdvt" style="',c.rotate&&(s+="transform:rotate("+n(c.rotate)+"deg);"),s+="left:"+n(c.x-u)+"px;top:"+n(c.y-u)+"px;width:"+n(c.width+2*u)+"px;height:"+n(d+2*u)+'px;border:solid 1px red;z-index:9998"></div>'),s+=" ",f&&(s+='<div style="border:dashed 1px #666;pointer-events:none;display:',s+=f?"block":"none",s+=";left:"+n(h)+"px;top:"+n(p)+"px;width:"+n(g)+"px;height:"+n(v)+'px;z-index:9999;" class="xzKVLdvt"><div mxs="xzKVLdvd:_" style="width:100%;height:100%;background:#000;opacity:0.02"></div></div>'),s},init:function(){var e=this;e.updater.set({showRect:!1,space:o.default.ELEMENT_CTRL_SPACE,rectX:0,rectY:0,rectWidth:0,rectHeight:0,hoverElement:n.State.get("__aV"),transformProps:function(e){var t={rotate:e.rotate,width:e.width,height:e.height,x:e.x,y:e.y},i=n.State.get("__aW");i&&(t.x+=i.pos.x,t.y+=i.pos.y,e.useCNStyle&&(t.width=.92*i.width,t.height=.92*i.height));i=r.default.__aX(t);return t.x=i.x,t.y=i.y,t}}),n.State.on("__aY",function(){e.updater.set({hoverElement:n.State.get("__aV")}),e.render()})},render:function(){this.updater.digest()},__aZ:function(e,t){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y),r=Math.min(e.x,t.x),t=Math.min(e.y,t.y);this.updater.digest({showRect:!0,rectX:r,rectY:t,rectWidth:i,rectHeight:n})},__b_:function(){this.updater.digest({showRect:!1})}})}),define("editor/core/p-table",["magix","$","../../util/converter","./workaround","../../util/transform","gallery/mx-dragsort/index"],function(e,t,i){e("gallery/mx-dragsort/index"),t.__esModule=!0;var l=e("magix"),s=e("$"),o=e("../../util/converter"),n=e("./workaround"),r=e("../../util/transform");t.default=l.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){for(var s="",d=e.rows,c=e.sorted,u=e.eId,f=e.i18n,h=0,p=d.length;h<p;h++){var g=d[h];if(s+=" ","tr"==g.tag){s+=" ";for(var v=0,_=g.cells,x=_.length;v<x;v++){var m=_[v];if(s+=" ","td"==m.tag){if(s+=" ",m.children&&m.children.length){s+='<div class="xzKVLdvax" mx-view="gallery/mx-dragsort/index?selector=.xzKVLdvay" mx-dragfinish="'+t+"\x1e__bc({cell:'"+a(i,m)+"'})\">";var y=c(m.children);s+=" ";for(var b=0,w=y.length;b<w;b++){var L=y[b];s+='<div class="xzKVLdvaC xzKVLdvw" title="'+n(L.props.tip)+'" mx-mouseover="'+t+"\x1e__bg({element:'"+a(i,L)+"',cellId:'"+n(l(u))+"_c_"+n(l(h))+"_"+n(l(v))+"',cell:'"+a(i,m)+'\'})" data-eid="'+n(L.id)+'" mx-mouseout="'+t+'\x1e__bg()"><div class="xzKVLdvp xzKVLdvay" title="'+n(f("_bh"))+'">'+r(L.ctor.icon)+'</div><div mxa="xzKVLdve:_" class="xzKVLdvaA xzKVLdvw"><div mxa="xzKVLdve:a" class="xzKVLdvp">'+n(L.props.tip)+'</div><i title="'+n(f("_bi"))+'" class="xzKVLdvN xzKVLdvaB xzKVLdvq" mx-click="'+t+"\x1e__be({id:'"+n(l(L.id))+"'})\">&#xe600;</i></div></div>","table"==L.type&&(s+='<div mx-view="editor/core/p-table?eId='+o(L.id)+"&rows="+a(i,L.props.rows)+'" ds-draggable="false"></div>'),s+=" "}s+="</div>"}s+=" "}s+=" "}s+=" "}s+=" "}return s},init:function(e){this.assign(e),this.updater.set({sorted:function(e){return r.default.__ba(e).reverse()}})},assign:function(e){return this.updater.set(e),!0},render:function(){this.updater.digest()},"__bc<dragfinish>":function(e){for(var t=s.default(e.eventTarget).children(),e=e.params.cell.children,i=l.default.toMap(e,"id"),n=e.length,r=0,o=t;r<o.length;r++){var a=o[r].getAttribute("data-eid");a&&(i[a].props.zIndex=n--)}this.render(),l.State.fire("__bb"),l.State.fire("__G")},"__be<click>":function(e){n.StageElements.__bd(e.params.id,!0),this.updater.set({rows:this.updater.get("rows")}).digest(),l.State.set({__aV:null,__aW:null}),l.State.fire("__aY"),l.State.fire("__bb"),l.State.fire("__G")},"__bg<mouseover,mouseout>":function(e){if("p-table"!=e.from&&(e.from="p-table",!l.default.inside(e.relatedTarget,e.eventTarget))){var t=e.params,i=t.element,n=t.cellId,r=t.cell,t=null;if("mouseover"==e.type){n=s.default("#entity_"+n);if(!n.length)return;n=n.offset(),t={width:r.width,height:r.height,pos:o.default.__bf({x:n.left+1,y:n.top+1})}}l.State.set({__aV:i,__aW:t}),l.State.fire("__aY")}}})}),define("editor/core/property",["magix","../const/props-desc","../../util/transform","../../util/table","../../i18n/index","$","./workaround","gallery/mx-number/index","gallery/mx-dropdown/index","gallery/mx-picture/index","gallery/mx-font/lineheight","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-cell/index","gallery/mx-cell/size","gallery/mx-cell/focus","gallery/mx-dragsort/index","./p-table"],function(e,t,i){e("gallery/mx-number/index"),e("gallery/mx-dropdown/index"),e("gallery/mx-picture/index"),e("gallery/mx-font/lineheight"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-cell/index"),e("gallery/mx-cell/size"),e("gallery/mx-cell/focus"),e("gallery/mx-dragsort/index"),e("./p-table"),t.__esModule=!0;var p=e("magix"),n=e("../const/props-desc"),u=e("../../util/transform"),r=e("../../util/table"),s=e("../../i18n/index"),f=e("$"),o=e("./workaround");p.default.applyStyle("xzKVLdvg",".xzKVLdval{width:245px;height:100%;background:#edeef3;border-left:1px solid #ccc;position:relative;z-index:3000}.xzKVLdvam{height:calc(100% - 25px);overflow-y:scroll;padding:0 0 100px}.xzKVLdvan{background:#ccc;padding:0 10px;height:25px;line-height:25px;background-image:-webkit-gradient(linear,0 0,0 100%,from(#eee),to(#ccc),color-stop(0,#eee))}.xzKVLdvao{line-height:32px}.xzKVLdvap:hover{background:hsla(0,0%,100%,.6705882352941176)}.xzKVLdvaq{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.xzKVLdvar{width:80px;text-align:right;display:inline-block;margin-right:5px;vertical-align:middle}.xzKVLdvas{width:25px;height:25px;background:#474761;cursor:move;margin-top:4px;border-radius:4px}.xzKVLdvat{cursor:pointer;width:180px}.xzKVLdvau{width:158px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.xzKVLdvav{margin-top:8px;color:#848282;visibility:hidden}.xzKVLdvat:hover .xzKVLdvav{visibility:visible}.xzKVLdvaw{vertical-align:top}.xzKVLdvax{border-top:1px solid #e4e4e4;line-height:20px;margin-left:5px;cursor:default;font-size:12px}.xzKVLdvay{width:16px;height:16px;background:#474761;margin-top:2px;cursor:move}.xzKVLdvaz{padding-right:10px}.xzKVLdvaA{cursor:pointer;padding-right:20px;margin-left:19px}.xzKVLdvaB{font-size:12px;margin-top:4px;color:#848282;visibility:hidden}.xzKVLdvaA:hover .xzKVLdvaB{visibility:visible}.xzKVLdvaC{padding-left:2px}.xzKVLdvaC:hover{background:hsla(0,0%,100%,.5411764705882353)}"),t.default=p.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s,d="",c=e.hasElement,u=e.i18n,f=e.title,h=e.props,p=e.data,g=e.desc,v=e.lang,_=e.elements,x=e.vId;if(d+='<div mxv mxa="xzKVLdvf:_" class="xzKVLdval"><div mxa="xzKVLdvf:a" class="xzKVLdvan">',d+=n(u(c?"_bs":"_bt")),d+="</div>",c){d+='<ul mxv mxa="xzKVLdvf:b" class="xzKVLdvam"><li mxa="xzKVLdvf:c" class="xzKVLdvao"><span mxa="xzKVLdvf:d" class="xzKVLdvar">'+n(u("_bu"))+":</span>"+n(u(f))+"</li>";for(var m=0,y=h.length;m<y;m++){var b=h[m];d+=" ",b.ifShow&&!b.ifShow(p)||(d+='<li mxv class="xzKVLdvao',b.type==g.SPLITER&&(d+=" xzKVLdvaq"),d+='">',b.type!=g.SPLITER&&(d+='<span class="xzKVLdvar',b.styleVTop&&(d+=" xzKVLdvaw"),d+='">'+n(u(b.tip))+":</span>",b.type==g.LABEL?d+=" "+n(b.read?b.read(p[b.key]):p[b.key])+" ":b.type==g.INPUT?(d+='<input class="xzKVLdvB" value="'+n(p[b.key])+'" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+"',sync:'"+a(i,b.sync)+"',refresh:'"+a(i,b.refresh)+"'})\" ",(s=p.locked&&!b.role)&&(d+="disabled"),d+="/>"):b.type==g.TEXTAREA?(d+='<textarea class="xzKVLdvC" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+"'})\" ",(s=p.locked&&!b.role)&&(d+="disabled"),d+=' style="height:100px;">'+n(p[b.key])+"</textarea>"):b.type==g.NUMBER?(d+='<div mxv="props,data" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+"',read:'value',write:'"+a(i,b.write)+"',sync:'"+a(i,b.sync)+"',refresh:'"+a(i,b.refresh)+"'})\" ",(s=p.locked||p[b.key+"Locked"])&&(d+='readonly="'+n(s)+'" '),d+=' class="xzKVLdvB xzKVLdvu" mx-view="gallery/mx-number/index?value='+a(i,b.read?b.read(p[b.key]):p[b.key]),(s=b.min)&&(d+="&min="+o(s)),(s=b.max)&&(d+="&max="+o(s)),(s=b.step)&&(d+="&step="+o(s)),(s=b.fixed)&&(d+="&fixed="+o(s)),(s=p.locked||p[b.key+"Locked"])&&(d+="&disabled="+o(s)),d+='"></div>'):b.type==g.DROPDOWN?(d+='<div mxv="props" mx-change="'+t+"\x1e__bo({key:'"+n(l(b.key))+"',read:'value',refresh:'"+a(i,b.refresh)+'\'})" mx-view="gallery/mx-dropdown/index?list='+a(i,b.items),(s=b.textKey)&&(d+="&textKey="+o(s)),(s=b.valueKey)&&(d+="&valueKey="+o(s)),d+="&selected="+o(p[b.key]),(s=p.locked)&&(d+="&disabled="+o(s)),d+='"></div>'):b.type==g.CELLDROPDOWN?(d+='<div mxv="props" mx-change="'+t+'\x1e__bl()" mx-view="gallery/mx-dropdown/index?list='+a(i,b.items)+"&textKey=text&valueKey=value&selected="+o(p.rows[p.rowIndex].cells[p.colIndex].hasBorder),(s=p.locked)&&(d+="&disabled="+o(s)),d+='"></div>'):b.type==g.IMAGE?(d+='<div class="xzKVLdvr" mx-change="'+t+"\x1e__bp({key:'"+n(l(b.key))+"',updateSize:"+n(b.updateSize)+'})" mx-view="gallery/mx-picture/index?pic='+o(p[b.key])+"&lang="+o(v),(s=p.locked)&&(d+="&disabled="+o(s)),d+='"></div>'):b.type==g.ORIGINSIZE?(d+="<button ",(s=p.locked)&&(d+="disabled"),d+=' type="button" class="xzKVLdvz xzKVLdvO" mx-click="'+t+'\x1e__br()">'+n(u("_bv"))+"</button>"):b.type==g.BOOLEAN?(d+='<input type="checkbox" class="xzKVLdvE" mx-change="'+t+"\x1e__bo({key:'"+n(l(b.key))+"',bool:true,write:'"+a(i,b.write)+"',refresh:'"+a(i,b.refresh)+"'})\" ",(s=p[b.key])&&(d+="checked"),d+=" ",(s=p.locked&&!b.role||p.barred)&&(d+="disabled"),d+="/>"):b.type==g.LINEHEIGHT?(d+='<div mxv="data,props" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+'\',read:\'value\'})" class="xzKVLdvr" mx-view="gallery/mx-font/lineheight?',(s=p.locked)&&(d+="disabled="+o(s)),(s=b.min)&&(d+="&min="+o(s)),d+="&value="+a(i,p[b.key])+'"></div>'):b.type==g.FONTSTYLE?(d+='<div mxv="data,props" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+'\',read:\'value\'})" class="xzKVLdvr" mx-view="gallery/mx-font/style?',(s=p.locked)&&(d+="disabled="+o(s)),d+="&value="+a(i,p[b.key])+'"></div>'):b.type==g.FONTALIGN?(d+='<div mxv="data,props" mx-input="'+t+"\x1e__bo({key:'"+n(l(b.key))+'\',read:\'value\'})" class="xzKVLdvr" mx-view="gallery/mx-font/align?',(s=p.locked)&&(d+="disabled="+o(s)),d+="&value="+a(i,p[b.key])+'"></div>'):b.type==g.CELLOPERATE?(d+='<div mxv="data" mx-change="'+t+'\x1e__bk()" class="xzKVLdvr" mx-view="gallery/mx-cell/index?',(s=p.locked||p.__invalid)&&(d+="disabled="+o(s)),d+="&props="+a(i,p)+'"></div>'):b.type==g.CELLSIZE?(d+='<div mxv="data" mx-change="'+t+'\x1e__bk()" class="xzKVLdvr" mx-view="gallery/mx-cell/size?',(s=p.locked||p.__invalid)&&(d+="disabled="+o(s)),d+="&props="+a(i,p)+'"></div>'):b.type==g.CELLFOCUS?(d+='<div mxv="data" mx-change="'+t+'\x1e__bk({ui:true})" class="xzKVLdvr" mx-view="gallery/mx-cell/focus?',(s=p.locked||p.__invalid)&&(d+="disabled="+o(s)),d+="&props="+a(i,p)+'"></div>'):b.type==g.CELLCOLSHARE?(d+="<button ",(s=p.locked||p.__invalid)&&(d+="disabled"),d+=' type="button" class="xzKVLdvz xzKVLdvO" mx-click="'+t+"\x1e__bm({type:'x'})\">"+n(u("_bw"))+"</button>"):b.type==g.CELLROWSHARE&&(d+="<button ",(s=p.locked||p.__invalid)&&(d+="disabled"),d+=' type="button" class="xzKVLdvz xzKVLdvO" mx-click="'+t+"\x1e__bm({type:'y'})\">"+n(u("_bx"))+"</button>"),d+=" "),d+="</li>"),d+=" "}d+="</ul>"}else{d+='<ul mxv mxa="xzKVLdvf:e" mx-view="gallery/mx-dragsort/index?selector=li%20.xzKVLdvas" class="xzKVLdvx xzKVLdvam" mx-dragfinish="'+t+'\x1e__bc()">';for(var w=_.length;w--;){d+=" ";var L=_[w];d+='<li mxv class="xzKVLdvao xzKVLdvl xzKVLdvw xzKVLdvap" data-eid="'+n(L.id)+'" id="'+n(x)+"_"+n(L.id)+'"><div class="xzKVLdvw" mx-mouseover="'+t+"\x1e__bg({element:'"+a(i,L)+'\'})" mx-mouseout="'+t+'\x1e__bg()"><div class="xzKVLdvas xzKVLdvp xzKVLdvc" title="'+n(u("_bh"))+'">'+r(L.ctor.icon)+'</div><div mxa="xzKVLdvf:f" class="xzKVLdvp xzKVLdvw xzKVLdvat"><div class="xzKVLdvp xzKVLdvau" title="'+n(L.props.tip)+'">'+n(L.props.tip)+'</div><i title="'+n(u("_bi"))+'" class="xzKVLdvN xzKVLdvp xzKVLdvav" mx-click="'+t+"\x1e__be({id:'"+n(l(L.id))+"'})\">&#xe600;</i></div></div>","table"==L.type&&(d+='<div mxv="elements" mx-view="editor/core/p-table?eId='+o(L.id)+"&rows="+a(i,L.props.rows)+'" class="xzKVLdvaz"></div>'),d+="</li>"}d+="</ul>"}return d+="</div>"},init:function(){var e=this,t=e.__bj(function(){e.render()},100);p.State.on("__as",t),p.State.on("__aD",t),p.State.on("__s",t)},render:function(){var e,t=p.State.get("__av"),i=p.default.config("lang");this.updater.set({lang:i}),1===t.length?(i=(e=t[0]).ctor,t=e.props,e=e.id,this.updater.digest({hasElement:!0,title:i.title,desc:n.default,props:i.props,data:t,eId:e})):this.updater.digest({elements:u.default.__ba(p.State.get("__aN")),hasElement:!1})},"__bk<change>":function(e){var t=this.updater,i=t.get("data"),t=t.get("eId");p.State.fire("__ap",{data:i,eId:t}),this.render(),e.params.ui||p.State.fire("__G")},"__bl<change>":function(e){var t=this.updater,i=t.get("data"),n=t.get("eId"),r=i.rows,o=i.rowIndex,a=i.colIndex,t=i.hideBorder,o=r[o];((o=o||r[0]).cells[a]||o.cells[0]).hasBorder=e.value;var l=!0;e:for(var s=0,d=r;s<d.length;s++){var c=d[s];if("tr"==c.tag)for(var u=0,f=c.cells;u<f.length;u++){var h=f[u];if("td"==h.tag&&h.hasBorder){l=!1;break e}}}l!=t&&(i.hideBorder=l,this.render()),p.State.fire("__ap",{data:i,eId:n}),p.State.fire("__G")},"__bm<click>":function(e){var t=this.updater,i=t.get("data"),t=t.get("eId");r.default.__l(i,{share:e.params.type})&&(p.State.fire("__ap",{data:i,eId:t}),this.render(),p.State.fire("__G"))},"__bo<input,change>":function(e){var t,i=this.updater,n=i.get("data"),r=i.get("eId"),o=e.params,a=o.key,l=o.read,s=o.bool,d=o.write,c=o.refresh,i=o.sync,o="width"==a||"height"==a;o&&(t=u.default.__bn(n,n.rotate)),e=s?e.eventTarget.checked:l?e[l]:f.default(e.eventTarget).val(),d&&(e=d(e,n)),i&&(n[i]=e),n[a]=e,o&&(o=u.default.__bn(n,n.rotate),n.x+=t.x-o.x,n.y+=t.y-o.y,c=!0),(s||c)&&this.render(),p.State.fire("__ap",{data:n,eId:r}),p.State.fire("__G",{key:a,time:500})},"__bp<change>":function(e){var t=this.updater,i=p.State.get("__j"),n=t.get("data"),r=t.get("eId"),t=e.params,e=e.pic;n[t.key]=e.src,t.updateSize&&(n.width=e.width*i,n.height=e.height*i),this.render(),p.State.fire("__ap",{data:n,eId:r}),p.State.fire("__G")},"__br<click>":function(){var t=this,e=this.updater,i=e.get("data"),n=e.get("eId"),r=p.State.get("__j"),e=i.src,o=new Image,a=this,l=u.default.__bn(i,i.rotate);o.onerror=function(){a.alert(s.default("__bq"))},o.onload=function(){i.width=o.width*r,i.height=o.height*r;var e=u.default.__bn(i,i.rotate);i.x+=l.x-e.x,i.y+=l.y-e.y,t.render(),p.State.fire("__ap",{data:i,eId:n}),p.State.fire("__G")},o.src=e},"__bc<dragfinish>":function(e){for(var t=f.default(e.eventTarget).find("li"),e=p.State.get("__aN"),i=p.default.toMap(e,"id"),n=e.length,r=0,o=t;r<o.length;r++)i[o[r].getAttribute("data-eid")].props.zIndex=n--;this.render(),p.State.fire("__bb"),p.State.fire("__G")},"__be<click>":function(e){o.StageElements.__bd(e.params.id,!0),this.render(),p.State.set({__aV:null}),p.State.fire("__aY"),p.State.fire("__bb"),p.State.fire("__G")},"__bg<mouseover,mouseout>":function(e){"p-table"!=e.from&&(p.default.inside(e.relatedTarget,e.eventTarget)||(p.State.set({__aV:e.params.element}),p.State.fire("__aY")))}})}),define("editor/core/stage",["$","magix","../../cainiao/const","../../element/image/designer","../../gallery/mx-dragdrop/index","../../service/index","../../util/converter","../../util/table","../const/click-desc","../const/keys","./history","./workaround","./modifier"],function(e,t,i){e("./modifier"),t.__esModule=!0;var ze=e("$"),ke=e("magix"),f=e("../../cainiao/const"),h=e("../../element/image/designer"),n=e("../../gallery/mx-dragdrop/index"),r=e("../../service/index"),p=e("../../util/converter"),Se=e("../../util/table"),o=e("../const/click-desc"),u=e("../const/keys"),g=e("./history"),Ve=e("./workaround"),v=((e={})[u.default.A]="left",e[u.default.D]="right",e[u.default.W]="top",e[u.default.S]="bottom",e);ke.default.applyStyle("xzKVLdve",".xzKVLdvaD{pointer-events:all}.xzKVLdvaE{outline:0;display:flex}.xzKVLdvaF{margin:0 auto;flex:0 0 auto;padding:50px 100px}.xzKVLdvaG{box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}.xzKVLdvaH{background:#fff;line-height:1.28571}.xzKVLdvaI{background:transparent}.xzKVLdvaJ{background:#fafafa}.xzKVLdvaK{border-bottom:1px dashed #ccc}.xzKVLdvaL{border-top:1px dashed #ccc}.xzKVLdvag{pointer-events:none}"),t.default=ke.View.extend({mixins:[n,r.default],tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.vId,c=e.header,u=e.width,f=e.height,h=e.showPrintBG,p=e.printBG,g=e.bgSize,v=e.elements,e=e.footer;s+='<div mxv mxa="xzKVLdvg:_" class="xzKVLdvaE xzKVLdvu" mx-mousedown="'+t+'\x1e__bS()" id="stage_outer" tabindex="0" mx-keydown="'+t+'\x1e__cg()" mx-focusout="'+t+'\x1e__cr()" mx-focusin="'+t+'\x1e__cs()" mx-drop="'+t+'\x1e__cq()"><div mxv class="xzKVLdvaF" id="cx_'+n(d)+'"><div mxv mxa="xzKVLdvg:a" class="xzKVLdvaG"><div class="xzKVLdvaJ',0<c&&(s+=" xzKVLdvaK"),s+='" style="height:',s+=0<c?n(c):"0",s+="px;width:"+n(u)+'px;"></div><div mxv class="xzKVLdvu xzKVLdvaH" style="width:'+n(u)+"px;height:"+n(f)+"px;",h&&(s+="background-image:url("+n(p)+");background-repeat:no-repeat;"),"page"==g?s+="background-size:100% 100%":"bg"==g&&(s+="background-size:"+n(u)+"px "+n(f)+"px"),s+='" id="stage_stage" mx-contextmenu="'+t+'\x1e__cl()">';for(var _=0,x=v.length;_<x;_++){var m=v[_];s+=" ";var y=m.ctor,b=m.props,w=m.id,m=m.type;s+=" ","#script"!=m&&(s+='<div mxv="elements" id="'+n(w)+'" mx-view="element/'+n(y.type)+"/designer?type="+o(m)+"&id="+o(w)+"&ctor="+a(i,y)+"&props="+a(i,b)+'" class="xzKVLdvaD" mx-mousedown="'+t+"\x1e__bU({id:'"+n(l(w))+"',ctor:'"+a(i,y)+"',props:'"+a(i,b)+"',type:'"+n(l(m))+"'})\"></div>"),s+=" "}return s+='</div><div class="xzKVLdvaJ',0<e&&(s+=" xzKVLdvaL"),s+='" style="height:',s+=0<e?n(e):"0",s+="px;width:"+n(u)+'px;"></div></div></div><div mx-view="editor/core/modifier" id="m_'+n(d)+'"></div><div mxs="xzKVLdvg:_" id="outer_cm"></div></div><div mxs="xzKVLdvg:a" class="xzKVLdvaI" id="stayBar"></div>'},init:function(){function t(e){var t,i=ke.State.get("__aN");e&&e.scale?(Ve.StageElements.__by(e.from,e.to),(t=ke.State.get("page")).width=t.width/e.from*e.to,t.height=t.height/e.from*e.to,t.header=t.header/e.from*e.to,t.footer=t.footer/e.from*e.to,n.updater.set({elements:i})):n.updater.digest({elements:i})}var n=this;ke.State.on("__G",function(e){e.key?g.default.__aU(e.key,e.time):g.default.__aU()}),ke.State.on("__r",function(e){e.history&&(e=ke.State.get("__aN"),n.updater.set({elements:e}),n.render())}),ke.State.on("__q",function(e){e.scale?t(e):e.keepSelect||Ve.StageSelectElements.__bz(),n.render()}),ke.State.on("__bb",t),ke.State.on("__bA",function(e){e.zone!=o.default.CANVAS&&e.zone!=o.default.PROPERTY&&Ve.StageSelectElements.__bz()});var i=null;ke.State.on("__bB",function(e){var t=e.hoverNode;ke.default.inside(t,"stage_stage")?((e=Ve.StageElements.__bC(t))&&e.dashed==i||i&&i.addClass("xzKVLdvv"),e&&e.dashed&&e.dashed!=i&&(i=ze.default(e.dashed)).removeClass("xzKVLdvv")):t||(i&&i.addClass("xzKVLdvv"),i=null)}),ke.State.on("__bD",function(e){var t;ke.default.inside(e.dropNode,"stage_stage")&&(t=Ve.StageElements.__bC(e.dropNode),(e=Ve.StageElements.__bE(e,!1,t,e.ignoreSnapshot))&&n.updater.digest({elements:e}))}),ke.State.on("__bF",function(){var e=ke.State.get("__j"),t=ze.default("#stage_stage").offset(),e=80*Math.random()*e,e={pageX:t.left+e+n.__t.prop("scrollLeft"),pageY:t.top+e+n.__t.prop("scrollTop")},e=Ve.StageElements.__bE(e,!0);e&&(n.updater.digest({elements:e}),ke.State.fire("__G"))}),ke.State.on("__bG",function(e){n.__bH(e)}),ke.State.on("__ax",function(e){var t,i=ze.default("#stayBar"),n=ze.default("#app_stage");e.locked?(t=n.prop("scrollWidth"),e=n.prop("scrollHeight"),n=ke.State.get("page"),i.css({height:e,width:t,marginTop:-(n.height+100),display:"block"})):i.hide()}),ke.State.on("__bI",function(e){n.updater.digest({showPrintBG:e.show,printBG:e.src})}),ke.State.on("__bJ",function(e){n.updater.digest({bgSize:e.size})}),n.updater.set({elements:ke.State.get("__aN")}),n.__t=ze.default("#"+n.id),ke.State.on("__bK",function(e){n.__t[e.start?"addClass":"removeClass"]("xzKVLdvag")})},render:function(){var e=ke.State.get("page");this.updater.digest({header:e.header,footer:e.footer,width:e.width,height:e.height})},"__bS<mousedown>":function(e){var r=this,t=e.target.id;if("stage_outer"==t||"stage_stage"==t||t=="cx_"+r.id){var o=null;if(e.shiftKey){o={};for(var i=0,n=Ve.StageSelectElements.__bL();i<n.length;i++){var a=n[i];o[a.id]=1}}else Ve.StageSelectElements.__bz();var l=p.default.__bM({x:e.pageX,y:e.pageY}),s=ke.Vframe.get("m_"+r.id),d=!1,c=!1,u=Ve.StageElements.__bN();r.dragdrop(e.eventTarget,r.__bj(function(e){var t,i,n;c||(d=!0,n=p.default.__bM({x:e.pageX,y:e.pageY}),s.invoke("__aZ",[l,n]),t=Math.abs(l.x-n.x),i=Math.abs(l.y-n.y),e=Math.min(l.x,n.x),n=Math.min(l.y,n.y),(n=p.default.__bO({x:e,y:n})).width=t,n.height=i,i=Ve.StageElements.__bP(u,n,o),(n=JSON.stringify(i,["id"]))!=r.__bQ&&(r.__bQ=n,Ve.StageSelectElements.__bR(i)))},50),function(){d&&(delete r.__bQ,c=!0,s.invoke("__b_"))})}},"__bU<mousedown>":function(e){"element_table"!=e.from&&Ve.StageElements.__bT(e,this)},"__cg<keydown>":function(e){var t=e.target;if("text-element"!=ze.default(t).data("role")){e.metaKey||e.shiftKey||e.altKey||e.ctrlKey||(e.keyCode==u.default.F?(e.preventDefault(),Ve.StageElements.__bV()):e.keyCode!=u.default.A&&e.keyCode!=u.default.S&&e.keyCode!=u.default.D&&e.keyCode!=u.default.W||(e.preventDefault(),ke.State.fire("__bW",{dir:v[e.keyCode]})));var i,n=Ve.StageSelectElements.__bL(),r=ke.State.get("__aN");if(e.keyCode==u.default.TAB)return e.preventDefault(),void Ve.StageElements.__bX(e);if(n.length)if(e.ctrlKey||e.metaKey)(e.ctrlKey||e.metaKey)&&e.keyCode==u.default.C&&(e.preventDefault(),Ve.Clipboard.__c_());else{e.preventDefault();var t=!1,o=!1;if(e.keyCode==u.default.DELETE||e.keyCode==u.default.BACKSPACE)t=!0,Ve.StageElements.__bY();else for(var a=e.shiftKey?10:1,l=0,s=n;l<s.length;l++){var d,c=s[l];c.props.locked||(e.keyCode==u.default.UP?(o=!0,c.props.y-=a):e.keyCode==u.default.DOWN?(o=!0,c.props.y+=a):e.keyCode==u.default.LEFT?(o=!0,c.props.x-=a):e.keyCode==u.default.RIGHT&&(o=!0,c.props.x+=a)),!o||(d=ke.Vframe.get(c.id))&&d.invoke("assign",c)&&d.invoke("render")}(o||t)&&(t&&(n.length=0),ke.State.fire("__aD"),ke.State.fire("__G",{key:"__bZ",time:500})),t&&this.updater.digest({elements:r})}(e.ctrlKey||e.metaKey)&&(e.keyCode==u.default.N?(e.preventDefault(),ke.State.fire("__ca")):e.keyCode==u.default.V?(e.preventDefault(),Ve.Clipboard.__cb()&&(i=Ve.StageElements.__cc(),Ve.Clipboard.__cd(i),ke.State.fire("__G"))):e.keyCode==u.default.A?(e.preventDefault(),(i=Ve.StageElements.__cc()).coll.length&&Ve.StageElements.__ce(i.coll)):e.keyCode==u.default.X?(e.preventDefault(),Ve.Clipboard.__cf()):e.keyCode==u.default.Z?(e.preventDefault(),e.shiftKey?g.default.__aT():g.default.__aS()):e.keyCode==u.default.Y&&(e.preventDefault(),g.default.__aT()))}},__bH:function(e){if("align"==e.action){for(var t=ze.default("#"+this.id).offset(),i=Ve.StageSelectElements.__bL(),n=-Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,a=-Number.MAX_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,d=0,c=i;d<c.length;d++){var u,f=c[d],h=ze.default("#"+f.id+" [mx-view]>*")[0].getBoundingClientRect();"right"==e.to?h.right>n&&(n=h.right):"left"==e.to?h.left<r&&(r=h.left):"top"==e.to?h.top<o&&(o=h.top):"bottom"==e.to?h.bottom>a&&(a=h.bottom):"vcenter"==e.to?(u=(h.bottom-h.top)/2,h.top+u<l&&(l=h.top+u)):"hcenter"==e.to&&(u=(h.right-h.left)/2,h.left+u<s&&(s=h.left+u))}n-=t.left,r-=t.left,o-=t.top,a-=t.top,l-=t.top,s-=t.left;for(var p=0,g=0,v=i;g<v.length;g++){var _,f=v[g],h=ze.default("#"+f.id+" [mx-view]>*")[0].getBoundingClientRect(),x=0;"right"==e.to?0!=(_=n-(h.right-t.left))&&(x=p=1,f.props.x+=_):"left"==e.to?0!=(_=r-(h.left-t.left))&&(x=p=1,f.props.x+=_):"top"==e.to?0!=(_=o-(h.top-t.top))&&(x=p=1,f.props.y+=_):"bottom"==e.to?0!=(_=a-(h.bottom-t.top))&&(x=p=1,f.props.y+=_):"vcenter"==e.to?0!=(_=l-(h.top-t.top+(h.bottom-h.top)/2))&&(x=p=1,f.props.y+=_):"hcenter"==e.to&&0!=(_=s-(h.left-t.left+(h.right-h.left)/2))&&(x=p=1,f.props.x+=_),x&&(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render")}p&&(ke.State.fire("__aD"),ke.State.fire("__G"))}else if("put"==e.action){for(var m=Ve.StageElements.__ch(),y=ke.State.get("page"),p=0,b=0,w=m;b<w.length;b++){var L=0,z=0,i=(H=w[b]).elements;z="stage"==H.type?(L=y.width,y.height):(L=(Z=H.table.props.rows[H.row].cells[H.col]).width,Z.height);var k=L/2,S=z/2;if(e.shift)for(var V=0,K=i;V<K.length;V++){var C=(f=K[V]).props,x=0;"hc"==e.to?(D=k-C.width/2)!=C.x&&(C.x=D,x=p=1):(O=S-C.height/2)!=C.y&&(C.y=O,x=p=1),x&&(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render")}else{for(var T=Number.MAX_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,E=-Number.MAX_SAFE_INTEGER,M=-Number.MAX_SAFE_INTEGER,N=0,I=i;N<I.length;N++)(C=(f=I[N]).props).x<T&&(T=C.x),C.x+C.width>E&&(E=C.x+C.width),C.y<A&&(A=C.y),C.y+C.height>M&&(M=C.y+C.height);for(var D=k-(T+(E-T)/2),O=S-(A+(M-A)/2),B=0,R=i;B<R.length;B++){var P,C=(f=R[B]).props,x=0;"hc"==e.to?(P=C.x+D,C.x!=P&&(p=x=1,C.x=P)):(P=C.y+O,C.y!=P&&(p=x=1,C.y=P)),x&&(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render")}}}p&&(ke.State.fire("__aD"),ke.State.fire("__G"))}else if("avg"==e.action){if(1==(m=Ve.StageElements.__ch()).length){var H,p=0;if(2<(i=(H=m[0]).elements).length||e.ctrl){for(var W=-Number.MAX_SAFE_INTEGER,j=Number.MAX_SAFE_INTEGER,X=-Number.MAX_SAFE_INTEGER,F=Number.MAX_SAFE_INTEGER,$=[],U=0,q=i;U<q.length;U++){var G=(C=(f=q[U]).props).x+C.width/2,Y=C.y+C.height/2;W<G&&(W=G),G<j&&(j=G),X<Y&&(X=Y),Y<F&&(F=Y),$.push({m:f,mx:G,my:Y})}var Z,Q,J,ee=-1,te=-1,ie=0,ne=($="av"==e.to?$.sort(function(e,t){return e.my-t.my}):$.sort(function(e,t){return e.mx-t.mx})).length,re=ne+1,oe=null,oe=e.ctrl?(ee="stage"==H.type?(te=(y=ke.State.get("page")).width,y.height):(te=(Z=H.table.props.rows[H.row].cells[H.col]).width,Z.height),{props:{x:0,y:0,width:0,height:0}}):(Q=$[0],J=$[$.length-1],m=Q.m.props,ee=(J=J.m.props).y-m.y-m.height,te=J.x-m.x-m.width,ie+=1,--ne,re-=2,Q.m);if(e.shift){e.ctrl&&(W=te,F=j=0,X=ee);for(var ae=(X-F)/re,le=(W-j)/re,se=ie;se<ne;se++){var de,f=$[se].m,x=0;"av"==e.to?(de=oe.props.y+oe.props.height/2,de+=ae,de-=f.props.height/2,f.props.y!=de&&(x=p=1,f.props.y=de)):(de=oe.props.x+oe.props.width/2,de+=le,de-=f.props.width/2,f.props.x!=de&&(x=p=1,f.props.x=de)),x&&(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render"),oe=f}}else{for(var ce=0,ue=0,se=ie;se<ne;se++)ce+=(C=$[se].m.props).height,ue+=C.width;for(var fe=(ee-ce)/re,he=(te-ue)/re,se=ie;se<ne;se++){var pe,f=$[se].m,x=0;"av"==e.to?(pe=oe.props.y+oe.props.height+fe,f.props.y!=pe&&(x=p=1,f.props.y=pe)):(pe=oe.props.x+oe.props.width+he,f.props.x!=pe&&(x=p=1,f.props.x=pe)),x&&(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render"),oe=f}}p&&(ke.State.fire("__aD"),ke.State.fire("__G"))}}}else if("same"==e.action){for(var i=Ve.StageSelectElements.__bL(),ge=-Number.MAX_SAFE_INTEGER,ve=-Number.MAX_SAFE_INTEGER,_e=Number.MAX_SAFE_INTEGER,xe=Number.MAX_SAFE_INTEGER,me=0,ye=i;me<ye.length;me++)(C=(f=ye[me]).props).width>ge&&(ge=C.width),C.width<_e&&(_e=C.width),C.height>ve&&(ve=C.height),C.height<xe&&(xe=C.height);for(var p=0,be=0,we=i;be<we.length;be++){var Le,C=(f=we[be]).props,x=0;"maw"==e.to?C.width!=ge&&(p=x=1,C.width=ge):"miw"==e.to?C.width!=_e&&(p=x=1,C.width=_e):"mah"==e.to?C.width!=ve&&(p=x=1,C.height=ve):"mih"==e.to&&C.width!=xe&&(p=x=1,C.height=xe),x&&("table"==f.type?Se.default.__l(f.props,{fsize:!0}):"qrcode"==f.type&&("mah"==e.to||"mih"==e.to?C.width=C.height:C.height=C.width),(Le=ke.Vframe.get(f.id))&&Le.invoke("assign",f)&&Le.invoke("render"))}p&&(ke.State.fire("__aD"),ke.State.fire("__G"))}},"__cl<contextmenu>":function(e){var t,i,n;e.preventDefault(),"element_table"!=e.from&&(t=Ve.StageSelectElements.__bL(),i=ke.State.get("__aN"),(n=this).__ci=p.default.__bf({x:e.pageX,y:e.pageY}),Ve.StageElements.__cj(n,e,null,i,function(e){0==e.id?Ve.StageElements.__ce(i):1==e.id?Ve.Clipboard.__c_():14==e.id?Ve.Clipboard.__cf():(2==e.id?Ve.Clipboard.__cd({coll:i,collType:"stage",width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER},n.__ci):(e=7==e.id?Ve.StageElements.__bY(!0):Ve.StageElements.__ck(e.id,t[0],i),n.updater.digest({elements:e})),ke.State.fire("__G"))}))},"__cq<drop>":function(o){var c=this,e=o.originalEvent.dataTransfer.files,u=[],a=[],l=o.pageX,s=o.pageY,d=ke.default.guid("g_");Ve.StageElements.__cm(e,function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t],r=ke.default.guid("file_");u.push(r),a.push(n.file),ke.State.set({__cn:h.default,__co:{locked:!0,barred:r,groupId:d,src:f.default.DROP_STAGE_LOADING,width:n.width,height:n.height}}),ke.State.fire("__bD",{dropNode:o.target,pageX:l,pageY:s,ignoreSnapshot:1}),l+=40,s+=40}a.length&&(ke.State.set({__cn:null,__co:null}),ke.State.fire("__q")),c.upload(a,d,function(i,e){for(var t=ke.State.get("__aN"),n=[],r={},o=0,a=0;a<u.length;a++)e[a]&&(r[u[a]]=e[a]);if(Ve.StageElements.__cp(t,function(e,t){"element"==t&&(t=e.props.barred,e.props.groupId==i&&t&&((t=r[t])&&!t.error?(o=1,ke.default.mix(e.props,t),e.props.locked=!1,delete e.props.barred,delete e.props.groupId):n.push(e)))}),n.length)for(var l=0,s=n;l<s.length;l++){var d=s[l];Ve.StageElements.__bd(d.id,!0)}o&&ke.State.fire("__G"),(o||n.length)&&c.updater.digest({elements:t})})})},"__cr<focusout>":function(){this.__t.addClass("xzKVLdvaS")},"__cs<focusin>":function(){this.__t.removeClass("xzKVLdvaS")}})}),define("editor/core/store",["magix"],function(e,t,i){"use strict";t.__esModule=!0;e("magix");t.default={__aU:function(){},__ct:function(){var e={};try{var t=localStorage.getItem("l.state");t&&((e=JSON.parse(t)).success=!0)}catch(e){}return e},__aQ:function(){try{localStorage.removeItem("l.state")}catch(e){}}}}),define("editor/core/template",["magix","../../cainiao/serializer","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../cainiao/serializer"),e=e("../../service/index");n.default.applyStyle("xzKVLdvi",".xzKVLdvaY{width:80px;height:80px;border:1px solid #ccc;text-align:center;line-height:80px;margin:3px;cursor:pointer;float:left}.xzKVLdvaY:hover{border-color:#999}.xzKVLdvaZ,.xzKVLdvaZ:hover{border-color:#06f}.xzKVLdvb_{min-height:500px}"),t.default=n.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.i18n,c=e.error,u=e.templates,f=e.selected;if(s+='<div mxa="xzKVLdvh:_" class="xzKVLdvK"><b mxa="xzKVLdvh:a" class="xzKVLdvd">'+n(d("_cw"))+'</b></div><div mxa="xzKVLdvh:b" class="xzKVLdvL xzKVLdvw xzKVLdvb_">',c)s+=" "+n(c.msg)+" ";else if(u.length){s+=" ";for(var h=0,p=u.length;h<p;h++){var g=u[h];s+='<div class="xzKVLdvaY',f==g.id&&(s+=" xzKVLdvaZ"),s+='" mx-click="'+t+"\x1e__T({t:'"+a(i,g)+"'})\">"+n(g.name)+"</div>"}s+=" "}else s+=" "+n(d("_cx"))+" ";return s+="</div>"},mixins:[e.default],init:function(e){this.__cu=JSON.stringify(e.page),this.__P=e.dialog,this.__Q=e.enter},render:function(){var i=this;this.fetch({name:"__cv",params:{biz_id:n.default.config("bizId")}},function(e,t){i.updater.digest({selected:"-1",error:e,templates:t.get("data",[])})})},"__T<click>":function(e){var t,i=e.params.t.code;try{(t=r.default.decode(i)).xLines=[],t.yLines=[]}catch(e){return void this.alert(e.message)}this.__cu!=JSON.stringify(t.page)&&(t.pageChange=!0),this.__Q(t),this.__P.close()},"__U<click>":function(){this.__P.close()}})}),define("editor/core/toolbar",["magix","$","../../gallery/mx-monitor/index","../../util/converter","../../cainiao/const","./history","../../i18n/index","./workaround","gallery/mx-number/index"],function(e,t,i){e("gallery/mx-number/index"),t.__esModule=!0;var a=e("magix"),n=e("$"),r=e("../../gallery/mx-monitor/index"),o=e("../../util/converter"),l=e("../../cainiao/const"),s=e("./history"),d=e("../../i18n/index"),c=e("./workaround");a.default.applyStyle("xzKVLdvj",".xzKVLdvba{padding:0 12px;background:#ccc;color:#333;height:100%;background-image:-webkit-gradient(linear,0 0,0 100%,from(#eee),to(#ccc),color-stop(0,#eee))}.xzKVLdvbb{cursor:pointer;height:25px;line-height:25px;float:left;padding:0 4px;width:25px}.xzKVLdvbb:hover{background:#eee;color:#111}.xzKVLdvbc,.xzKVLdvbc:hover{background:#fff;z-index:200000}.xzKVLdvbd{height:21px;width:1px;background:#ccc;margin:2px 12px;float:left}.xzKVLdvbe{position:absolute;right:0;top:calc(100% - 1px);background:#fff;width:400px;z-index:199999;border:1px solid #ccc}.xzKVLdvbf{width:125px}.xzKVLdvbg{width:105px}.xzKVLdvbh{width:20px;text-align:center}.xzKVLdvbi{width:60px;text-align:right;vertical-align:middle}.xzKVLdvbj{overflow:auto;min-height:50px;margin-left:100px;display:block;max-height:160px}.xzKVLdvbk{width:41px;height:50px;float:left;border:1px solid #ccc;line-height:50px;font-size:16px;cursor:pointer;text-align:center;margin:2px}.xzKVLdvbk:hover{border-color:#999}.xzKVLdvbl,.xzKVLdvbl:hover{border-color:#06f}.xzKVLdvbm{transform:scaleX(-1)}.xzKVLdvbn{color:#aaa;cursor:not-allowed}.xzKVLdvbn:hover{color:#aaa;background:transparent}.xzKVLdvbo{transform:rotate(90deg)}.xzKVLdvbp{position:relative;overflow:hidden}.xzKVLdvbq{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:100px}.xzKVLdvbr{display:inline-flex;align-items:center}");function u(e){e.scale=e.scale||a.State.get("__j"),a.State.fire("__aO",{json:e}),e.pageChange&&a.State.fire("__q"),a.State.fire("__bb"),a.State.fire("__as"),a.State.fire("__G")}t.default=a.default.View.extend({tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.hs,c=e.i18n,u=e.canCenter,f=e.canAvg,h=e.selectCount,p=e.page,g=e.toMM,v=e.showBg,_=e.vId,x=e.CNC,m=e.showBG,y=e.bgSize,e=e.scale;s+='<div mxv mxa="xzKVLdvi:_" class="xzKVLdvba xzKVLdvw xzKVLdvx xzKVLdvu"><div mxa="xzKVLdvi:a" class="xzKVLdvp xzKVLdvn"><i class="xzKVLdvN xzKVLdvbb',d.canUndo||(s+=" xzKVLdvbn"),s+='" title="'+n(c("_cR"))+'(Ctrl+Z)" ',d.canUndo&&(s+=' mx-click="'+t+"\x1e__cN({type:'undo'})\" "),s+='>&#xe682;</i><i class="xzKVLdvN xzKVLdvbb xzKVLdvbm',d.canRedo||(s+=" xzKVLdvbn"),s+='" title="'+n(c("_cS"))+'(Ctrl+Y)" ',d.canRedo&&(s+=' mx-click="'+t+"\x1e__cN({type:'redo'})\" "),s+='>&#xe682;</i><i mxs="xzKVLdvi:_" class="xzKVLdvbd"></i><i class="xzKVLdvN xzKVLdvbb" title="'+n(c("_cT"))+'" mx-click="'+t+'\x1e__cL()">&#xe615;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+'\x1e__aU()" title="'+n(c("_V"))+'">&#xe611;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+'\x1e__cD()" title="'+n(c("_cw"))+'">&#xe601;</i>',u()&&(s+='<i mxs="xzKVLdvi:_" class="xzKVLdvbd"></i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({action:'put',to:'vc'})\" title=\""+n(c("_cU"))+'">&#xe679;</i><i class="xzKVLdvN xzKVLdvbb xzKVLdvbo" mx-click="'+t+"\x1e__cK({action:'put',to:'hc'})\" title=\""+n(c("_cV"))+'">&#xe679;</i>'),s+=" ",f()&&(s+='<i class="xzKVLdvN xzKVLdvbb xzKVLdvbo" mx-click="'+t+"\x1e__cK({action:'avg',to:'av'})\" title=\""+n(c("_cW"))+'">&#xe604;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({action:'avg',to:'ah'})\" title=\""+n(c("_cX"))+'">&#xe604;</i>'),s+=" ",1<h&&(s+='<i mxs="xzKVLdvi:_" class="xzKVLdvbd"></i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'left'})\" title=\""+n(c("_cY"))+'">&#xe70b;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'hcenter'})\" title=\""+n(c("_cZ"))+'">&#xe711;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'right'})\" title=\""+n(c("_d_"))+'">&#xe70c;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'top'})\" title=\""+n(c("_da"))+'">&#xe70d;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'vcenter'})\" title=\""+n(c("_db"))+'">&#xe712;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({to:'bottom'})\" title=\""+n(c("_dc"))+'">&#xe70e;</i><i mxs="xzKVLdvi:_" class="xzKVLdvbd"></i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({action:'same',to:'maw'})\" title=\""+n(c("_dd"))+'">&#xe789;</i><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+"\x1e__cK({action:'same',to:'miw'})\" title=\""+n(c("_de"))+'">&#xe788;</i><i class="xzKVLdvN xzKVLdvbb xzKVLdvbo" mx-click="'+t+"\x1e__cK({action:'same',to:'mah'})\" title=\""+n(c("_df"))+'">&#xe789;</i><i class="xzKVLdvN xzKVLdvbb xzKVLdvbo" mx-click="'+t+"\x1e__cK({action:'same',to:'mih'})\" title=\""+n(c("_dg"))+'">&#xe788;</i>'),s+="</div>";var b=""===p.width?"":g(p.width);s+=" ";var w=""===p.height?"":g(p.height);s+='<div mxv class="xzKVLdvbe xzKVLdvi',v||(s+=" xzKVLdvv"),s+='" id="bg_'+n(_)+'"><div mxa="xzKVLdvi:b" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:c" class="xzKVLdvG">'+n(c("_dh"))+'\uff1a</label><div mxa="xzKVLdvi:d" class="xzKVLdvH"><div class="xzKVLdvB xzKVLdvbf xzKVLdvB xzKVLdvu" mx-input="'+t+"\x1e__cJ({key:'width'})\" mx-view=\"gallery/mx-number/index?value="+o(b)+"&min="+o(x.PAGE_WIDTH_MIN)+"&fixed=2&max="+o(x.PAGE_WIDTH_MAX)+'"></div><span mxs="xzKVLdvi:a" class="xzKVLdvr xzKVLdvbh">X</span><div class="xzKVLdvB xzKVLdvbf xzKVLdvB xzKVLdvu" mx-input="'+t+"\x1e__cJ({key:'height'})\" mx-view=\"gallery/mx-number/index?value="+o(w)+"&min="+o(x.PAGE_HEIGHT_MIN)+"&fixed=2&max="+o(x.PAGE_HEIGHT_MAX)+'"></div></div></div>';h=""===p.header?"":g(p.header);s+=" ";g=""===p.footer?"":g(p.footer);s+='<div mxa="xzKVLdvi:e" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:f" class="xzKVLdvG xzKVLdvp">'+n(c("_di"))+'\uff1a</label><div mxa="xzKVLdvi:g" class="xzKVLdvH"><div class="xzKVLdvB xzKVLdvbg xzKVLdvB xzKVLdvu" mx-input="'+t+"\x1e__cJ({key:'header'})\" mx-view=\"gallery/mx-number/index?value="+o(h)+"&min=0&fixed=2&max="+o(x.PAGE_WIDTH_MAX)+'"></div><span mxa="xzKVLdvi:h" class="xzKVLdvr xzKVLdvbi">'+n(c("_dj"))+'\uff1a</span><div class="xzKVLdvB xzKVLdvbg xzKVLdvB xzKVLdvu" mx-input="'+t+"\x1e__cJ({key:'footer'})\" mx-view=\"gallery/mx-number/index?value="+o(g)+"&min=0&fixed=2&max="+o(x.PAGE_HEIGHT_MAX)+'"></div></div></div><div mxv mxa="xzKVLdvi:i" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:j" class="xzKVLdvG xzKVLdvp">'+n(c("_dk"))+'\uff1a</label><div mxv mxa="xzKVLdvi:k" class="xzKVLdvH xzKVLdvp"><div mxv mxa="xzKVLdvi:l" class="xzKVLdvr xzKVLdvz xzKVLdvA xzKVLdvbp">'+n(c("_dl"))+'<input mxs="xzKVLdvi:b" class="xzKVLdvbq" accept="image/*" type="file" mx-change="'+t+'\x1e__cO()"/></div>',m&&(s+='<button mxa="xzKVLdvi:m" class="xzKVLdvz xzKVLdvg" mx-click="'+t+'\x1e__cQ()">'+n(c("_dm"))+"</button>"),s+="</div></div>",m&&(s+='<div mxv mxa="xzKVLdvi:n" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:o" class="xzKVLdvG xzKVLdvp">'+n(c("_dn"))+'\uff1a</label><div mxv mxa="xzKVLdvi:p" class="xzKVLdvH xzKVLdvp"><label mxv mxa="xzKVLdvi:q" class="xzKVLdvbr xzKVLdvd"><input type="radio" ',"auto"==y&&(s+=" checked"),s+=' name="bg.setting" class="xzKVLdvc" mx-change="'+t+"\x1e__cP({size:'auto'})\"/>"+n(c("_do"))+'</label><label mxv mxa="xzKVLdvi:r" class="xzKVLdvbr xzKVLdvd"><input type="radio" ',"page"==y&&(s+=" checked"),s+=' name="bg.setting" class="xzKVLdvc" mx-change="'+t+"\x1e__cP({size:'page'})\"/>"+n(c("_dp"))+'</label><label mxv mxa="xzKVLdvi:s" class="xzKVLdvbr"><input type="radio" ',"bg"==y&&(s+=" checked"),s+=' name="bg.setting" class="xzKVLdvc" mx-change="'+t+"\x1e__cP({size:'bg'})\"/>"+n(c("_dq"))+"</label></div></div>"),s+='<div mxv mxa="xzKVLdvi:t" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:u" class="xzKVLdvG xzKVLdvp">'+n(c("_dr"))+'\uff1a</label><div mxv mxa="xzKVLdvi:v" class="xzKVLdvH xzKVLdvp"><input ',p.splitable&&(s+="checked"),s+=' class="xzKVLdvE" type="checkbox" mx-change="'+t+'\x1e__cJ({key:\'splitable\'})"/></div></div><div mxa="xzKVLdvi:w" class="xzKVLdvF xzKVLdvw"><label mxa="xzKVLdvi:x" class="xzKVLdvG xzKVLdvp">'+n(c("_ds"))+'\uff1a</label><div mxa="xzKVLdvi:y" class="xzKVLdvH xzKVLdvbj">';for(var L=0,z=x.PAGES,k=z.length;L<k;L++){var S=z[L];s+='<div class="xzKVLdvbk',b==S.width&&w==S.height&&(s+=" xzKVLdvbl"),s+='" ',b==S.width&&w==S.height||(s+=' mx-click="'+t+"\x1e__cH({page:'"+a(i,S)+"'})\" "),s+=">"+n(S.text)+"</div>"}return s+='</div></div></div><div mxa="xzKVLdvi:z" class="xzKVLdvq"><div mxa="xzKVLdvi:A" class="xzKVLdvp xzKVLdvw xzKVLdvf"><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+'\x1e__cM({out:true})" title="'+n(c("_dt"))+'">&#xe602;</i><span mxa="xzKVLdvi:B" class="xzKVLdvr xzKVLdvp xzKVLdvc xzKVLdvo" style="width:40px;">'+n((100*e).toFixed(0))+'%</span><i class="xzKVLdvN xzKVLdvbb" mx-click="'+t+'\x1e__cM()" title="'+n(c("_du"))+'">&#xe699;</i></div><span mxa="xzKVLdvi:C" class="xzKVLdvr xzKVLdvp xzKVLdvc">'+n(Number(b).toFixed(2))+" x "+n(Number(w).toFixed(2))+'</span><i class="xzKVLdvN xzKVLdvbb',v&&(s+=" xzKVLdvbc"),s+='" title="'+n(c("_dv"))+'" mx-click="'+t+'\x1e__cG()" id="bgt_'+n(_)+'">&#xe627;</i></div></div>'},init:function(){var e=this;e.__t=n.default("#"+e.id);var t=e.__bj(function(){e.render()},100);a.State.on("__as",t),a.State.on("__r",t),a.State.on("__s",t),a.State.on("__ca",function(){0<a.State.get("__aN").length&&e.confirm(d.default("__cy"),function(){u({elements:[],select:[],xLines:[],yLines:[]})})}),r.__cz(),e.on("destroy",function(){r.__cA(e),r.__cB()}),e.updater.set({CNC:l.default,canCenter:function(){var e=a.State.get("__av");return 1!=e.length?1<e.length:!e[0].props.useCNStyle},canAvg:function(){var e=c.StageElements.__ch();return 1==e.length?1<e[0].elements.length:0},toMM:o.default.__i})},render:function(){var e=a.State.get("page");this.updater.digest({selectCount:a.State.get("__av").length,page:e,hs:s.default.__aR(),scale:a.State.get("__j")})},__cC:function(e){return!a.default.inside(e,"app")||(a.default.inside(e,"bg_"+this.id)||a.default.inside(e,"bgt_"+this.id))},"__aU<click>":function(){var e={elements:a.State.get("__aN"),page:a.State.get("page")},t=this;t.mxDialog("editor/core/code",{width:1100,enter:function(e){u(e),e.pageChange&&t.render()},stage:e})},"__cD<click>":function(){var t=this;t.mxDialog("editor/core/template",{width:900,enter:function(e){u(e),e.pageChange&&t.render()},page:a.State.get("page")})},__an:function(){this.__cE||(this.__cE=!0,this.updater.digest({showBg:!0}),r.__cF(this))},__ao:function(){this.__cE&&(this.__cE=!1,this.updater.digest({showBg:!1}),r.__cA(this))},"__cG<click>":function(){this.__cE?this.__ao():this.__an()},"__cH<click>":function(e){var t=e.params.page,i=o.default.__h(t.width),e=o.default.__h(t.height),t=this.updater.get("page");t.width=i,t.height=e,this.render(),a.State.fire("__q"),a.State.fire("__G")},"__cJ<change,input>":function(e){var t=e.params.key,i=this.updater.get("page"),n="splitable"==t?e.target.checked:""===e.value?"":o.default.__h(e.value);i[t]=n,this.render(),a.State.fire("__q"),"input"==e.type?a.State.fire("__G",{key:"__cI",time:300}):a.State.fire("__G")},"__cK<click>":function(e){var t=e.params,i=t.action,t=t.to;a.State.fire("__bG",{action:i||"align",shift:e.shiftKey,ctrl:e.ctrlKey||e.metaKey,to:t})},"__cL<click>":function(){a.State.fire("__ca")},"__cM<click>":function(e){var t=e.params.out,i=l.default.SCALE_STEP,n=a.State.get("__j"),r=n,e=!1;t?n>l.default.SCALE_MIN&&(n-=i,e=!0):n<l.default.SCALE_MAX&&(n+=i,e=!0),e&&(a.State.set({__j:n}),this.render(),a.State.fire("__q",{scale:!0,from:r,to:n}),a.State.fire("__G"))},"__cN<click>":function(e){"redo"==e.params.type?s.default.__aT():s.default.__aS()},"__cO<change>":function(e){var t=this,e=e.eventTarget.files[0],i=new FileReader;i.onload=function(){a.State.fire("__bI",{show:!0,src:i.result}),t.updater.digest({bgSize:"auto",showBG:!0,src:i.result})},i.onerror=function(){t.alert(d.default("__bq"))},i.readAsDataURL(e)},"__cP<change>":function(e){var n,r=this,e=e.params.size,o=this.updater.get("page");"bg"==e&&((n=new Image).onload=function(){var e=a.State.get("__j"),t=n.width*e,i=n.height*e,e=0;o.width!=t&&(e=1,o.width=t),o.height!=i&&(e=1,o.height=i),e&&(r.render(),a.State.fire("__q"))},n.src=this.updater.get("src")),a.State.fire("__bJ",{size:e}),this.updater.set({bgSize:e})},"__cQ<click>":function(){a.State.fire("__bI",{show:!1}),this.updater.digest({showBG:!1})}})}),define("editor/core/toolbox",["$","magix","../../element/index","../../gallery/mx-dragdrop/index","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("$"),l=e("magix"),r=e("../../element/index"),s=e("../../gallery/mx-dragdrop/index"),e=e("../../service/index");l.default.applyStyle("xzKVLdvk",".xzKVLdvbs{width:230px;height:100%;background:#1b1b29;color:#bfbebe;padding:10px 6px 30px;transition:margin-left .15s;position:relative;z-index:3000}.xzKVLdvbt{margin-left:-210px}.xzKVLdvbu{position:relative;height:20px;color:#fff}.xzKVLdvbv{position:absolute;cursor:pointer;right:3px;top:-2px;font-size:20px;transition:all .15s}.xzKVLdvbt .xzKVLdvbv{right:-4px;transform:scaleX(-1)}.xzKVLdvbw{height:calc(100% - 20px);overflow:auto;transition:all .5s}.xzKVLdvbx{height:80px;overflow:hidden}.xzKVLdvby{cursor:default}.xzKVLdvbz{border:1px solid #464646;width:60px;height:60px;margin:4px;border-radius:2px;transition:all .5s}.xzKVLdvbz:hover{border-color:#c2c2c2}.xzKVLdvbA{width:34px;height:34px;margin:3px}.xzKVLdvbB{text-align:center}.xzKVLdvbC{background:#474761;position:absolute;opacity:.5;left:-1000px;top:-1000px;width:40px;height:40px;border-radius:6px;z-index:5000}.xzKVLdvbD{height:1px;line-height:1px;margin:5px 0;background:hsla(0,0%,100%,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.xzKVLdvbE{width:190px}.xzKVLdvbF{height:calc(100% - 116px);overflow:auto}.xzKVLdvbG{height:30px;line-height:30px;padding:0 5px}.xzKVLdvbH{width:25px;height:25px;margin-top:2px}.xzKVLdvbI{width:160px}.xzKVLdvbG:hover{color:#fff}");var o=l.default.guid("de_"),d=function(e){var t=n.default("#"+o);t.length||(n.default(document.body).append('<div class="xzKVLdvbC" id="'+o+'"/>'),t=n.default("#"+o)),t.html(e.icon)},c=function(e){n.default("#"+o).css({left:e.pageX+10,top:e.pageY+18})},u=function(){n.default("#"+o).css({left:-1e3,top:-1e3})};t.default=l.default.View.extend({mixins:[s,e.default],tmpl:function(e,t,i,n,r,o,a,l){var s="",d=e.collapse,c=e.i18n,u=e.preList,f=e.designers,h=e.keyword;s+='<div mxv class="xzKVLdvbs xzKVLdvx',d&&(s+=" xzKVLdvbt"),s+='"><div mxa="xzKVLdvj:_" class="xzKVLdvbu"><i class="xzKVLdvN xzKVLdvbv" mx-click="'+t+'\x1e__dx()" title="',s+=n(c(d?"_dA":"_dB")),s+='">&#xe616;</i></div><div id="toolbox_list" class="xzKVLdvbw',u.length&&(s+=" xzKVLdvbx"),s+='">';for(var p=0,g=f.list,v=g.length;p<v;p++){var _=g[p];s+='<div class="xzKVLdvp xzKVLdvby" title="'+n(c(_.title))+'" mx-mousedown="'+t+"\x1e__bS({element:'"+a(i,_)+'\'})"><div class="xzKVLdvbz',u.length&&(s+=" xzKVLdvbA"),s+='">'+r(_.icon)+'</div><div class="xzKVLdvbB',u.length&&(s+=" xzKVLdvv"),s+='">'+n(c(_.title))+"</div></div>"}if(s+="</div>",u.length){s+='<div mxs="xzKVLdvj:_" class="xzKVLdvbD"></div><input class="xzKVLdvB xzKVLdvg xzKVLdvbE" placeholder="'+n(c("_dC"))+'" mx-input="'+t+'\x1e__dz()" value="'+n(h)+'"/><div mxa="xzKVLdvj:a" class="xzKVLdvbF xzKVLdvi" id="toolbox_prelist">';for(var x=0,m=u.length;x<m;x++){var y,b=u[x];s+=" ",(!h||0<=b.name.indexOf(h))&&(s+=" ",s+='<div class="xzKVLdvbG xzKVLdvw" mx-mousedown="'+t+"\x1e__bS({element:'"+a(i,y=f.byType(b.type))+"',props:'"+a(i,b.props)+"',pre:true,name:'"+n(l(b.name))+'\'})"><div mxa="xzKVLdvj:b" class="xzKVLdvbH xzKVLdvp">'+r(y.icon)+'</div><div class="xzKVLdvbI xzKVLdvp xzKVLdvy" title="'+n(b.name)+'">'+n(b.name)+"</div></div>"),s+=" "}s+="</div>"}return s+="</div>"},init:function(){var t=this;l.State.on("__s",function(e){t.updater.digest({lang:e.lang})})},render:function(){var i=this;this.updater.digest({designers:r.default,keyword:"",preList:[]}),this.fetch({name:"__dw",params:{biz_id:l.default.config("bizId")}},function(e,t){t=t.get("data",[]);t.length&&i.updater.digest({preList:t})})},"__bS<mousedown>":function(e){var t=e.params,i=t.element,n=t.props,r=t.pre,t=t.name;d(i),r&&((n=n||{}).allowEdit=0,n.tip=n.tip||t),l.State.set({__cn:i,__co:n});var o=!1,a=null;this.dragdrop(e.eventTarget,function(e){c(e),o=!0;e=s.fromPoint(e.clientX,e.clientY);e!=a&&(a=e,l.State.fire("__bB",{hoverNode:a}))},function(e){return a=null,l.State.fire("__bB"),o?(u(),void(e&&(t=s.fromPoint(e.clientX,e.clientY),l.State.fire("__bD",{dropNode:t,pageX:e.pageX,pageY:e.pageY}),l.State.set({__cn:null,__co:null})))):(l.State.fire("__bF"),void l.State.set({__cn:null,__co:null}));var t})},"__dx<click>":function(){var e=this.updater,t=!e.get("collapse");e.digest({collapse:t}),n.default(document).trigger({type:"toolboxtoggle",collapse:t})},"__dz<input>":function(e){clearTimeout(this.__dy);var t=this.updater;t.set({keyword:e.eventTarget.value}),this.__dy=setTimeout(this.wrapAsync(function(){t.digest()}),300)}})}),define("editor/core/workaround",["magix","../../util/converter","../../util/transform","../../gallery/mx-menu/index","./contextmenu","$","../../util/table"],function(e,b,t){"use strict";var x=this&&this.__assign||function(){return(x=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};b.__esModule=!0,b.Clipboard=b.StageElements=b.StageSelectElements=void 0;var w=e("magix"),c=e("../../util/converter"),L=e("../../util/transform"),p=e("../../gallery/mx-menu/index"),g=e("./contextmenu"),u=e("$"),d=e("../../util/table"),a=w.default.toMap,y=w.default.has,m=w.default.mix;b.StageSelectElements={__bz:function(e){var t,i,n=w.State.get("__av"),r=n.length;(r||e)&&(t=1<r?null:n[0],n.length=0,i=!1,e?(n.push(e),i=e!=t):r&&(i=!0),i&&(w.State.set({__au:a(n,"id")}),w.State.fire("__as"),w.State.fire("__G")))},__cF:function(e){for(var t=w.State.get("__av"),i=!1,n=0,r=t;n<r.length;n++)if(r[n].id===e.id){i=!0;break}i||(t.push(e),w.State.set({__au:a(t,"id")}),w.State.fire("__as"),w.State.fire("__G"))},__cA:function(e){for(var t=w.State.get("__av"),i=!1,n=-1,r=0,o=t;r<o.length;r++)if(n++,o[r].id===e.id){i=!0;break}i&&(t.splice(n,1),w.State.set({__au:a(t,"id")}),w.State.fire("__as"),w.State.fire("__G"))},__bR:function(e){var t=w.State.get("__av");t.length=0,t.push.apply(t,e),w.State.set({__au:a(t,"id")}),w.State.fire("__as"),w.State.fire("__G")},__dD:function(){return w.State.get("__av").length},__bL:function(){return w.State.get("__av")}},b.StageElements={__bE:function(e,t,i,n){var r=w.State.get("__cn");if(r){var o=w.State.get("__aN"),a=w.State.get("__j"),l=(s=b.StageElements.__dE(e,t,i)).xy,e=s.collection,t=s.focus,i=s.collType,s=r.getProps(l.x,l.y);s.zIndex=e.length+1;l=w.State.get("__co");l&&m(s,l),b.StageElements.__dF(r,s,a);a={id:w.default.guid("e_"),ctor:r,type:r.type,props:s};return"vtext"==r.type||"htext"==r.type?s.supportCNStyle="td"==i:"table"==r.type&&d.default.__l(s),e.push(a),t&&!n&&b.StageSelectElements.__bz(a),o}},__ch:function(){var v=w.State.get("__au"),_={},x=[],m=function(e,t,i,n){for(var r=0,o=e;r<o.length;r++){var a,l=o[r];if(y(v,l.id)&&(a=t?[t.id,i,n].join("-"):"stage",_[a]||x.push(_[a]={type:t?"td":"stage",table:t,row:i,col:n,elements:[]}),_[a].elements.push(l)),"table"==l.type)for(var s=0,d=0,c=l.props.rows;d<c.length;d++){var u=c[d];if("tr"==u.tag)for(var f=0,h=0,p=u.cells;h<p.length;h++){var g=p[h];"td"==g.tag&&g.children&&m(g.children,l,s,f),f++}s++}}},e=w.State.get("__aN");return m(e),x},__bV:function(){var e,t=this.__ch();1!==t.length||"td"==(e=t[0]).type&&((t=e.table).props.rowIndex=e.row,t.props.colIndex=e.col,w.State.fire("__ap",{eId:t.id,data:t.props}),b.StageSelectElements.__bz(t))},__cp:function(e,f){var h=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if(f(n,"element"),"table"==n.type)for(var r=0,o=0,a=n.props.rows;o<a.length;o++){var l=a[o];if(f(l,"row",{row:r}),"tr"==l.tag)for(var s=0,d=0,c=l.cells;d<c.length;d++){var u=c[d];f(u,"td",{row:r,col:s}),"td"==u.tag&&u.children&&h(u.children),s++}r++}}};h(e)},__dE:function(e,t,i){var n,r=b.StageSelectElements.__bL(),o=r[0],a=c.default.__bf({x:e.pageX,y:e.pageY}),l=w.State.get("__aN"),s=!0,d="stage";return t&&1==r.length&&"table"==o.type&&-1<o.props.rowIndex?(r=(n=o.props).rows,o=n.rowIndex,n=n.colIndex,!(o=r[o])||(n=o.cells[n])&&(n.children||(n.children=[]),l=n.children,d="td",s=!(a={x:5,y:5}))):!t&&i&&(t=u.default(i.node).offset(),a={x:e.pageX-t.left,y:e.pageY-t.top},l=i.children,d="td"),{collection:l,xy:a,focus:s,collType:d}},__bC:function(u){var e=w.State.get("__aN"),f=null,h=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t],r=w.default.node(n.id);if(w.default.inside(u,r)){if("table"==n.type)for(var o=n.props.rows,a=o.length;a--;){var l=o[a];if(l.cells)for(var s=l.cells.length;s--;){var d=w.default.node("entity_"+n.id+"_c_"+a+"_"+s),c=l.cells[s];w.default.inside(u,d)&&(c.children||(c.children=[]),f={node:d,dashed:"#entity_"+n.id+"_dashed_"+a+"_"+s,children:c.children},h(f.children))}}break}}};return h(e),f},__cc:function(){var e=b.StageSelectElements.__bL();if(1===e.length){var e=(i=(n=e[0]).props).rows,t=i.rowIndex,i=i.colIndex;if(-1<t&&-1<i)return{coll:(r=e[t].cells[i]).children,type:"td",width:r.width,height:r.height}}var n,r,t=this.__ch(),i={coll:w.State.get("__aN"),type:"stage",width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};return 1===t.length&&"td"==(n=t[0]).type&&(i={coll:(r=n.table.props.rows[n.row].cells[n.col]).children,type:"td",width:r.width,height:r.height}),i},__dG:function(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked&&!t.props.xLocked&&!t.props.yLocked){var i=b.StageSelectElements.__bL(),u={},f={},n=[];"table"==t.type&&n.push(t);for(var r=!1,o=i.length;o--;)(s=i[o]).id==t.id&&(r=!0),s.props.locked||s.props.xLocked||s.props.yLocked?i.splice(o,1):"table"==s.type&&n.push(s);if(r&&1<i.length)b.StageSelectElements.__cA(t);else{var h=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if("#script"!=r.type&&(t&&(u[r.id]=1,f[r.id]=t),"table"==r.type))for(var o=0,a=r.props.rows;o<a.length;o++){var l=a[o];if("tr"==l.tag)for(var s=0,d=l.cells;s<d.length;s++){var c=d[s];"td"==c.tag&&c.children&&h(c.children,r.id)}}}};if(h(n,0),y(u,t.id))for(var a=t.id;;){var l=f[a];if(!l)break;u[l]=1,a=l}for(o=i.length;o--;){var s=i[o];y(u,s.id)&&i.splice(o,1)}b.StageSelectElements.__cF(t)}}}else b.StageSelectElements.__bz(t)},__bN:function(e){for(var t=[],i=0,n=e&&e.children||w.State.get("__aN");i<n.length;i++){var r=n[i],o=r.props;if("#script"!=r.type&&!o.locked){s=o.rotate||0;var a={x:o.x,y:o.y,width:o.width,height:o.height};o.useCNStyle&&e&&(a.width=.92*e.width,a.height=.92*e.height);for(var l=L.default.__az(a,s),o=l.point[0],a=l.point[2],s=l.point[6],l=l.point[4],d=o,c=o,u=o,f=o,h=0,p=[a,s,l];h<p.length;h++){var g=p[h];g.x<d.x&&(d=g),g.x>u.x&&(u=g),g.y<c.y&&(c=g),g.y>f.y&&(f=g)}t.push({element:r,left:d,top:c,right:u,bottom:f,points:[o,a,s,l],lines:[{start:o,end:a},{start:a,end:l},{start:l,end:s},{start:s,end:o}]})}}return t},__ck:function(e,t,i){for(var n,r,o,a=-1,l=t.props,s=L.default.__ba(i),d=s.length,c=s.length;c--;)if(s[c].id===t.id){a=c;break}if(3==e){for(c=a+1;c<d;c++)s[c].props.zIndex=c;l.zIndex=d}else if(4==e){for(c=0;c<a;c++)s[c].props.zIndex=c+2;l.zIndex=1}else 5==e?(n=s[a+1])&&(r=l.zIndex,o=n.props.zIndex,n.props.zIndex=r,l.zIndex=o):6!=e||(e=s[a-1])&&(r=l.zIndex,o=e.props.zIndex,e.props.zIndex=r,l.zIndex=o);return i},__ce:function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];"#script"==r.type||r.props.locked||r.props.xLocked||r.props.yLocked||t.push(r)}b.StageSelectElements.__bR(t)},__bY:function(e){var t=b.StageSelectElements.__bL(),c=a(t,"id"),i=w.State.get("__aN"),u=function(e){for(var t=!1,i=e.length;i--;)if("#script"!=(d=e[i]).type)if(y(c,d.id))e.splice(i,1),t=!0;else if("table"==d.type)for(var n=0,r=d.props.rows;n<r.length;n++){var o=r[n];if("tr"==o.tag)for(var a=0,l=o.cells;a<l.length;a++){var s=l[a];"td"==s.tag&&s.children&&u(s.children)}}if(t)for(var d,i=e.length;i--;)"#script"!=(d=e[i]).type&&(d.props.zIndex=i+1)};if(u(i),e)return t.length=0,w.State.fire("__as"),i},__bd:function(c,e){var t=w.State.get("__aN"),u=function(e){for(var t=!1,i=e.length;i--;)if("#script"!=(d=e[i]).type)if(c==d.id)e.splice(i,1),t=!0;else if("table"==d.type)for(var n=0,r=d.props.rows;n<r.length;n++){var o=r[n];if("tr"==o.tag)for(var a=0,l=o.cells;a<l.length;a++){var s=l[a];"td"==s.tag&&s.children&&u(s.children)}}if(t)for(var d,i=e.length;i--;)"#script"!=(d=e[i]).type&&(d.props.zIndex=i+1)};u(t),e||(b.StageSelectElements.__bL().length=0,w.State.fire("__as"))},__dF:function(e,t,i,n){if(n&&(t.x*=i,t.y*=i),t.width*=i,t.height*=i,"table"==e.type)for(var r=0,o=t.rows;r<o.length;r++){var a=o[r];if("tr"==a.tag)for(var l=0,s=a.cells;l<s.length;l++){var d=s[l];"td"==d.tag&&(d.width*=i,d.height*=i,d.children&&b.StageElements.__dH(d.children,i,n))}}},__dH:function(e,t,i){for(var n=0,r=e;n<r.length;n++){var o=r[n];"#script"!=o.type&&b.StageElements.__dF(o,o.props,t,i)}},__by:function(e,t){var i=w.State.get("__aN"),e=t/e;b.StageElements.__dH(i,e,!0)},__bT:function(s,e){var t=s.params;if(!t.props.barred){var d=b.StageSelectElements.__bL();if(void 0===s.button||0==s.button)if(s.shiftKey||s.ctrlKey||s.metaKey)b.StageElements.__dG(s,t);else{w.State.fire("__ax",{locked:1});for(var c=[],i=!1,n=0,r=d;n<r.length;n++){var o=r[n];t.id==o.id&&(i=!0),c.push({x:o.props.x,y:o.props.y})}i||(b.StageSelectElements.__bz(t),c.length=0,c.push({x:t.props.x,y:t.props.y}),d.length=0,d.push(t));var u=!1,f=!1;e.dragdrop(s.eventTarget,function(e){u||w.State.fire("__ay",{cursor:"move"}),u=!0;for(var t=e.pageX-s.pageX,i=e.pageY-s.pageY,n=0,r=0,o=d;r<o.length;r++){var a,l=o[r];l.props.locked||l.props.xLocked||l.props.yLocked||(f=!0,a=c[n++],l.props.x=a.x+t,l.props.y=a.y+i,(a=w.Vframe.get(l.id))&&a.invoke("assign",[l,{move:!0}])&&a.invoke("render"))}w.State.fire("__as")},function(){u&&f&&w.State.fire("__G"),w.State.fire("__ax"),w.State.fire("__ay")})}else{for(var i=!1,a=0,l=d;a<l.length;a++)if(l[a].id===t.id){i=!0;break}i||b.StageSelectElements.__bz(t)}}},__cj:function(e,t,i,n,r){var o,a,l,s=b.StageSelectElements.__bL(),d=w.default.config("lang"),c=g.Contextmenu.stage(d),u=1,f={},h=b.Clipboard.__dI();n=L.default.__ba(n),f[g.Contextmenu.allId]=!n.length,f[g.Contextmenu.pasteId]=!h.length,1===s.length?(o=(l=s[0]).props.locked||l.props.__invalid,i&&s[0].id==i?(u=4,c=g.Contextmenu.tableCell(d),f[g.Contextmenu.cellTopId]=o,f[g.Contextmenu.cellBottomId]=o,f[g.Contextmenu.cellLeftId]=o,f[g.Contextmenu.cellRightId]=o,f[g.Contextmenu.cellDeleteColId]=o,f[g.Contextmenu.cellDeleteRowId]=o):(u=2,c=g.Contextmenu.singleElement(d),a=o||l.props.useCNStyle,i=!(h=n.length)||n[h-1].id==l.id,l=!h||n[0].id==l.id,f[g.Contextmenu.cutId]=o,f[g.Contextmenu.topId]=i||a,f[g.Contextmenu.bottomId]=l||a,f[g.Contextmenu.upId]=i||a,f[g.Contextmenu.downId]=l||a)):1<s.length&&(u=3,c=g.Contextmenu.multipleElement(d)),p.show(e,t,{cnt:"#outer_cm",offset:"#stage_outer",scroller:"#app_stage",width:150,disabled:f,list:c,listKey:d+u,picked:r})},__bX:function(e){var p,g,v,_,x,m,y,t=b.StageSelectElements.__bL(),i=w.State.get("__aN"),n=L.default.__ba(i),r=t.length,i=null;0===r||1<r?i=n[e.shiftKey?0:n.length-1]:(_=v=g=p=null,x=!1,m=t[0].id,(y=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if("#script"!=n.type&&(n.id==m?(x=!0,p=n):p&&!g?g=n:x?_=n:v=n,"table"==n.type)){var r=(a=n.props).rows,o=a.rowIndex,n=a.colIndex,a=0;if(-1<o&&-1<n&&((n=r[o].cells[n]).children&&(f=L.default.__ba(n.children)).length&&(a=1,y(f))),!a)for(var l=0,s=r;l<s.length;l++){var d=s[l];if("tr"==d.tag)for(var c=0,u=d.cells;c<u.length;c++){var f,h=u[c];"td"==h.tag&&h.children&&(f=L.default.__ba(h.children),y(f))}}}}})(n),e.shiftKey?v?i=v:"table"==(i=n[n.length-1]).type&&_&&(i=_):i=g||n[0]),b.StageSelectElements.__bz(i)},__bP:function(e,t,i){for(var n,r,o,a,l,s=[],d=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}],c=0,u=e;c<u.length;c++){var f=u[c],h=!1;if(i&&i[f.element.id])i&&s.push(f.element);else{for(var p=0,g=f.points;p<g.length;p++){var v=g[p];if(v.x>=t.x&&v.y>=t.y&&v.x<=t.x+t.width&&v.y<=t.y+t.height){s.push(f.element),h=!0;break}}if(!h)for(var _=0,x=f.lines;_<x.length;_++){for(var m=x[_],y=0,b=d;y<b.length;y++)if(r=b[y],l=l=a=o=void 0,o=(n=m).start,a=n.end,l=r.start,n=r.end,r=((a.x-o.x)*(l.y-o.y)-(a.y-o.y)*(l.x-o.x))*((a.x-o.x)*(n.y-o.y)-(a.y-o.y)*(n.x-o.x)),l=((n.x-l.x)*(o.y-l.y)-(n.y-l.y)*(o.x-l.x))*((n.x-l.x)*(a.y-l.y)-(n.y-l.y)*(a.x-l.x)),r<0&&l<0){h=!0,s.push(f.element);break}if(h)break}}}return s},__cm:function(e,t){for(var r=[],o=0,i=0,n=0,a=function(){o==i&&t(r)},l=0;l<e.length;l++){var s=e[l];0===s.type.indexOf("image/")&&(i++,function(i,n){var e=new FileReader;e.onload=function(e){var t=new Image;t.onload=function(){r[n]={file:i,width:t.width,height:t.height},o++,a()},t.onerror=function(){o++,a()},t.src=e.target.result},e.readAsDataURL(i)}(s,n++))}a()}};b.Clipboard={__cb:function(){return(this.__dJ||[]).length},__dI:function(){return this.__dJ||[]},__c_:function(){for(var e=[],t=0,i=b.StageSelectElements.__bL();t<i.length;t++){var n=i[t];e.push(n)}this.__dJ=e},__cf:function(){var e=b.StageSelectElements.__bL();1==e.length&&e[0].props.locked||(this.__c_(),this.__dK=!0)},__cd:function(v,n){var r=this,e=r.__dJ,_=v.coll;if(e){for(var o=[],a=0,l=0,s=0,d=function(e){for(var t=0,i=_;t<i.length;t++){var n=i[t];if(n.props.x==e.x&&n.props.y==e.y)return 1}return 0},t=function(e){var t,t=(i=e,t={},u.default.extend(!0,t,i));!function(e){if(0===a)if(n)l=e.x-n.x,s=e.y-n.y,e.x=n.x,e.y=n.y;else{for(var t=e.x,i=e.y;d(e);)e.x+=20,e.y+=20;for(e.x>v.width?e.x=v.width-e.width/2:e.x+e.width<0&&(e.x=-e.width/2),e.y>v.height?e.y=v.height-e.height/2:e.y+e.height<0&&(e.y=-e.height/2);d(e);)e.x-=4,e.y-=4;l=t-e.x,s=i-e.y}else e.x-=l,e.y-=s}(t.props),a++;var i={},g=function(e,t){if(m(t,e),"#script"!=e.type&&(t.id=w.default.guid("e_"),t.props={},m(t.props,e.props),"htext"!=e.type&&"vtext"!=e.type||(t.props.useCNStyle&&"td"==v.type?(t.props.x=.76,t.props.y=.76):(t.props.zIndex=_.length+1,t.props.locked=!1,t.props.supportCNStyle="td"==v.type,t.props.useCNStyle&&(t.props.xLocked=!1,t.props.yLocked=!1,t.props.widthLocked=!1,t.props.heightLocked=!1,t.props.useCNStyle=!1,t.props.width=t.props._width||("htext"==e.type?94.49:22.68),t.props.height=t.props._height||("htext"==e.type?18.9:128.5))))),"table"==e.type){t.props.rows=[];for(var i=0,n=e.props.rows;i<n.length;i++){var r=n[i],o=x({},r);if("tr"==r.tag){for(var a=[],l=0,s=r.cells;l<s.length;l++){var d=s[l],c=x(x({},d),{children:[]});if("td"==d.tag&&d.children)for(var u=0,f=d.children;u<f.length;u++){var h=f[u],p={};g(h,p),c.children.push(p)}a.push(c)}o.cells=a}t.props.rows.push(o)}}};g(t,i),_.push(i),o.push(i),r.__dK&&b.StageElements.__bd(e.id,!0)},i=0,c=e;i<c.length;i++)t(c[i]);r.__dK&&(delete r.__dK,delete r.__dJ),b.StageSelectElements.__bR(o),w.State.fire("__bb"),w.State.fire("__as")}}}});